(function(h){var s=h;document.head||(document.head=document.getElementsByTagName("head")[0]);(function(){try{h.pt||(h.pt={})}catch(c){h.pt={}}void 0===h.pt._cache&&(h.pt._cache={});h.SPWidgets={};h.SPWidgets.version="20140314062642";h.SPWidgets.defaults={};h.fn.SPMsgHasError=function(){var c=h(this).find("ErrorCode"),e=!1;if(!c.length)return h(this).find("faultcode").length?!0:!1;c.each(function(){if("0x00000000"!==h(this).text())return e=!0,!1});return e};h.fn.SPGetMsgError=function(){var c=
h(this),e="",d=c.find("ErrorCode"),b=0;d.length||(d=c.find("faultcode"));if(!d.length)return"";d.each(function(){var a=h(this);"0x00000000"!==a.text()&&(b+=1,e+="("+b+") "+a.text()+": "+a.parent().children().not(a).text()+"\n")});return e=b+" error(s) encountered! \n"+e};h.SPWidgets.fillTemplate=function(c,e){var d,b,a,g,f,m,n,q,l;"object"===typeof c&&1===arguments.length&&(e=c.data,c=c.tmplt);d="";b="string"!==typeof c?String(h("<div/>").append(c).html()):c;a=b.match(/(\{\{.*?\}\})/g);h.isArray(e)||
(e=[e]);if(null!==a)for(m=0,n=e.length;m<n;m++){q=b;g=0;for(f=a.length;g<f;g++)a[g]=a[g].replace(/[\{\}]/g,""),l=e[m][a[g]]||"",h.isFunction(l)&&(l=l()),q=q.replace("{{"+a[g]+"}}",l);d+=q}return d};h.SPWidgets.parseLookupFieldValue=function(c){var e=[],d=String(c).split(";#"),b=d.length,a,g;if(void 0===c)return e;for(c=0;c<b;c++)a=d[c],c++,g=d[c],(a||g)&&e.push({id:a,title:g});return e};h.SPWidgets.getCamlLogical=function(c){c=h.extend({},{type:"AND",values:[],onEachValue:null},c);var e="<And>",d=
"</And>",b="",a=0,g=0,f=!1;c.type=String(c.type).toUpperCase();h.isArray(c.values)||(c.values=[c.values]);"AND"!==c.type&&(e="<Or>",d="</Or>");b=e;a=c.values.length;g=a-1;f=h.isFunction(c.onEachValue);2>a&&(b="");for(e=0;e<a;e++)if(b=f?b+String(c.onEachValue(c.values[e])).toString():b+String(c.values[e]).toString(),1<g-e){b+=h.SPWidgets.getCamlLogical(h.extend({},c,{values:c.values.slice(e+1,a-e)}));break}1<a&&(b+=d);return b};h.SPWidgets.SPGetDateString=function(c,e){function d(a){return 10>a?"0"+
a:a}e=String(e||"local").toLowerCase();c=c||new Date;var b="";return b="utc"===e?c.getUTCFullYear()+"-"+d(c.getUTCMonth()+1)+"-"+d(c.getUTCDate())+"T"+d(c.getUTCHours())+":"+d(c.getUTCMinutes())+":"+d(c.getUTCSeconds())+"Z":c.getFullYear()+"-"+d(c.getMonth()+1)+"-"+d(c.getDate())+"T"+d(c.getHours())+":"+d(c.getMinutes())+":"+d(c.getSeconds())};h.SPWidgets.parseDateString=function(c){var e=null,d,b;if(!c)return e;if(e=Date.parse(10===c.length?c+"T00:00":c))return new Date(e);b=[1,4,5,6,7,10,11];c=
c.match(/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/);if(!c)return e;e=0;for(d=b.length;e<d;e++)c[b[e]]=~~c[b[e]];--c[2];"Z"===c[8]?(void 0!==c[9]&&(b=60*c[10]+c[11],"+"===c[9]&&(b=-b),c[5]+=b),e=new Date(Date.UTC(c[1],c[2],c[3],c[4],c[5],c[6],c[7]))):e=new Date(c[1],c[2],c[3],c[4],c[5],c[6],c[7]);return e};h.SPWidgets.makeSameHeight=function(c,e,d){var b=0,a=h(c);d||(d="height");a.each(function(){var a=h(this).css(d,
"");b<a.outerHeight(!0)&&(b=a.outerHeight(!0))});0<b&&(e&&(b+=e),a.css(d,b));return c};h.SPWidgets.escapeXML=function(c){return"string"!==typeof c?"":c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")};h.SPWidgets.unEscapeXML=function(c){return"string"!==typeof c?"":c.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"')};h.SPWidgets.getRuntimeInfo=function(){function c(){this.SPWidgets=
h.SPWidgets.version;this.jQuery=h.fn.jquery||"?";this.SPServices=this.jQueryUICss=this.jQueryUI="?";return this}c.prototype.asString=function(){var a="",c;for(c in this)this.hasOwnProperty(c)&&(a+="[ "+c+" = "+this[c]+" ] ");return a};var e=new c,d=h('<div style="position:fixed;width:100px;left:-1000px;"/>').appendTo("body"),b="";try{e.jQueryUI=s.ui.version}catch(a){}try{e.SPServices=h().SPServices.Version()}catch(g){h.fn.SPServices&&(e.SPServices="loaded")}b=d.css("background-image");d.addClass("ui-widget-header");
d.css("background-image")!==b&&(e.jQueryUICss="loaded");d.remove();return e};h.SPWidgets.getSPVersion=function(c){var e={12:"2007",14:"2010",15:"2013"},d=12;"undefined"!==typeof SP&&(d=14,SP.ClientSchemaVersions?SP.ClientSchemaVersions.currentVersion&&(d=parseInt(SP.ClientSchemaVersions.currentVersion)):(d=parseInt(_spPageContextInfo.webUIVersion),4===d&&(d=14)));c&&(d=e[d]||d);return d}})(s);(function(c){var k={initDone:!1,maxColumns:20};c.SPWidgets.defaults.board={list:"",field:"",CAMLQuery:"<Query></Query>",
CAMLViewFields:"",fieldFilter:null,optionalLabel:"(none)",template:null,webURL:c().SPServices.SPGetCurrentSite(),showColPicker:!1,colPickerLabel:"Columns",colPickerVisible:[],colPickerCloseLabel:"Close",colPickerApplyLabel:"Apply",colPickerCheckLabel:"Check-Uncheck All",colPickerTotalLabel:"Selected.",colPickerMaxColMsg:"Can not exceed 10 columns!",colPickerMinColMsg:"Mininum of 2 required!",onGetListItems:null,onPreUpdate:null,onBoardCreate:null};c.fn.SPShowBoard=function(e){k.initDone||(k.initDone=
!0,""!==k.styleSheet&&c('<style type="text/css">\n\n'+k.styleSheet+"\n\n</style>").prependTo("head"));var d=arguments;return this.each(function(){var b=c(this),a="string"===typeof e,g=b.hasClass("hasSPShowBoard"),f=null,m="",n=null;if(g&&!a)return this;if(a&&g&&!b.hasClass("loadingSPShowBoard"))return m=e.toLowerCase(),n=b.data("SPShowBoardOptions"),"refresh"===m?n._getListItems().then(function(){n.showItemsOnBoard({refresh:!0})}):"redraw"===m?n.setBoardColumnHeight():"setvisible"===m&&n.setUserDefinedVisibleCol(d[1]),
this;if(b.hasClass("loadingSPShowBoard"))return this;f=c.extend({},c.SPWidgets.defaults.board,e,{ele:b,states:[],statesMap:{},tmpltHeader:"",tmpltState:"",statesCntr:"",headersCntr:"",listItems:[],initDone:!1,formUrls:null,isStateRequired:!0,maxColumnVisible:10,showNumberOfColumns:10,getBoardStates:function(){return c.Deferred(function(a){c().SPServices({operation:"GetList",listName:f.list,cacheXML:!0,async:!1,webURL:f.webURL,completefunc:function(d,e){var g=c(d.responseXML),m=g.find("Fields Field[StaticName='"+
f.field+"']");if(!m.length){m=g.find("Fields Field[DisplayName='"+f.field+"']");if(!m.length){a.rejectWith(b,["Field ("+f.field+") not found in list definition!",d,e]);return}f._origField=f.field;f.field=m.attr("StaticName")}"FALSE"===m.attr("Required")&&(f.isStateRequired=!1);switch(m.attr("Type").toLowerCase()){case "choice":f.isStateRequired||(f.states.push({type:"choice",title:f.optionalLabel,name:f.optionalLabel}),f.statesMap[""]=f.states[f.states.length-1]);f.fieldFilter&&(f.fieldFilter=f.fieldFilter.split(/\,/));
m.find("CHOICES CHOICE").each(function(a,b){var d=c(this).text();if(!f.fieldFilter||c.grep(f.fieldFilter,function(a){return a===d}).length){if(a>=k.maxColumns){try{console.log("SPWIDGETS:BOARD:Warning: Can only build a max of "+k.maxColumns+" columns!")}catch(e){}return!1}f.states.push({type:"choice",title:d,name:d});f.statesMap[d]=f.states[f.states.length-1]}});a.resolveWith(f,[d,e]);break;case "lookup":f.fieldFilter||(f.fieldFilter="<Query></Query>");c().SPServices({operation:"GetListItems",listName:m.attr("List"),
async:!0,cacheXML:!0,CAMLQuery:f.fieldFilter,webURL:f.webURL,CAMLRowLimit:k.maxColumns,CAMLViewFields:'<ViewFields><FieldRef Name="'+m.attr("ShowField")+'" /></ViewFields>',completefunc:function(d,e){if("error"===e)a.rejectWith(b,["Communications Error!",d,e]);else{var g=c(d.responseXML);g.SPMsgHasError()?a.rejectWith(b,[g.SPGetMsgError(),d,e]):(f.isStateRequired||(f.states.push({type:"lookup",title:f.optionalLabel,name:""}),f.statesMap[""]=f.states[f.states.length-1]),g.SPFilterNode("z:row").each(function(a,
b){if(a>=k.maxColumns){try{console.log("SPWIDGETS:BOARD:Warning: Can only build a max of "+k.maxColumns+" columns!")}catch(d){}return!1}var e=c(this),g=e.attr("ows_ID"),e=e.attr("ows_"+m.attr("ShowField")),g=g+";#"+e;f.states.push({type:"lookup",title:e,name:g});f.statesMap[g]=f.states[f.states.length-1]}),a.resolveWith(f,[d,e]))}}});break;default:a.rejectWith(b,["Field ("+f.field+") Type ("+m.attr("Type")+") is not supported!",d,e])}}})}).promise()},_getListItems:function(){return c.Deferred(function(a){function d(e){c.isFunction(f.onGetListItems)&&
f.onGetListItems.call(b,f.listItems,e);a.resolveWith(b,[f.listItems])}c.isFunction(f.CAMLQuery)?f.CAMLQuery.call(b,function(a){c.isArray(a)&&(f.listItems=a,d(f.CAMLQuery))},e):c().SPServices({operation:"GetListItems",listName:f.list,async:!0,CAMLQuery:f.CAMLQuery,CAMLRowLimit:0,CAMLViewFields:f.CAMLViewFields,webURL:f.webURL,completefunc:function(e,g){if("error"===g)a.rejectWith(b,["Communications Error!",e,g]);else{var m=c(e.responseXML);m.SPMsgHasError()?a.rejectWith(b,[m.SPGetMsgError(),e,g]):
(f.listItems=m.SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0}),d(m))}}})}).promise()},getBoardItemDataObject:function(a){var d=null,b,e,g;if(a)for(a=String(a),b=0,e=f.listItems.length;b<e;b++)g=f.listItems[b].ID,c.isFunction(g)&&(g=f.listItems[b].ID()),g=String(g),a===g&&(d=f.listItems[b],b=e+e);return d},showItemsOnBoard:function(a){function d(a,g){var m="",l=null,q="";c.isFunction(f.template)?(m=f.template.call(b,a,g))&&(m=String(m)):m=c.SPWidgets.fillTemplate(f.template,t);void 0!==g&&
""!==m?g.html(m):""!==m&&(l=a.ID,c.isFunction(a.ID)&&(l=a.ID()),void 0===k[h]&&(k[h]=""),f.initDone&&e.refresh&&(q+=" spwidget-temp"),k[h]+='<div class="spwidget-board-state-item ui-state-default ui-corner-all'+q+'" data-id="'+l+'">'+m+"</div>");return m}var e=c.extend({},{rows:f.listItems,refresh:!1,doBoardInsert:!0},a);a=[];var g=[],m=[],k={},n=null,h=null,p=n=null,t=null,x;if(!e.refresh)for(p=0,x=f.states.length;p<x;p++)f.states[p].headerTotalEle.html("0"),f.states[p].dataEle.empty();p=0;for(x=
e.rows.length;p<x;p++)t=e.rows[p],h=t[f.field]||"",n=t.ID,c.isFunction(h)&&(h=t[f.field]()),c.isFunction(n)&&(n=n()),f.statesMap[h]&&(!1===e.refresh?(f.initDone&&a.push(t),d(t)):(n=f.statesCntr.find("div[data-id='"+n+"']"),n.length?(n.addClass("spwidget-temp"),n.closest("div.spwidget-board-state").data("boardstate")!==h&&(n.appendTo(f.statesMap[h].dataEle),m.push(t)),d(t,n)):(f.initDone&&a.push(t),d(t))));if(e.doBoardInsert){for(p in k)k.hasOwnProperty(p)&&""!==k[p]&&f.statesMap[p].dataEle.append(k[p]);
f.updBoardHeaders();c.pt.addHoverEffect(b.find(".spwidget-board-state-item"))}f.initDone&&e.refresh&&f.statesCntr.find("div.spwidget-board-state-item").not("div.spwidget-temp").each(function(){g.push(f.getBoardItemDataObject(c(this).data("id")));c(this).remove()}).end().removeClass("spwidget-temp");f.initDone&&(f.statesCntr.find("div.spwidget-board-state").sortable("refresh").end().disableSelection(),f.setBoardColumnHeight(),p=f.getEventObject(),a.length&&(p.itemsModified.length=0,p.itemsModified.push(a),
b.trigger("spwidget:boarditemadd",[b,c.extend({},p)])),g.length&&(p.itemsModified.length=0,p.itemsModified.push(g),b.trigger("spwidget:boarditemremove",[b,c.extend({},p)])),p.itemsModified.length=0,p.itemsModified.push.apply(p.itemsModified,a),p.itemsModified.push.apply(p.itemsModified,g),p.itemsModified.push.apply(p.itemsModified,m),p.itemsModified.length&&b.trigger("spwidget:boardchange",[b,p]));return k},updBoardHeaders:function(a){var b;if(!c.extend({},{state:null},a).state)for(a=0,b=f.states.length;a<
b;a++)f.states[a].headerTotalEle.html(f.states[a].dataEle.children().length)},getEventObject:function(a){a||(a=f.statesCntr.find("div.spwidget-board-state-item:first"));a=c(a);a={stateTotals:{},itemTotal:0,currentState:a.closest("div.spwidget-board-state").data("boardstate"),itemObj:f.getBoardItemDataObject(a.data("id"))||{},itemsModified:[]};var b,d;b=0;for(d=f.states.length;b<d;b++)a.itemTotal+=a.stateTotals[f.states[b].name]=Number(f.states[b].headerTotalEle.text());return a},getListFormUrl:function(a){function b(){c().SPServices({operation:"GetFormCollection",
listName:f.list,webURL:f.webURL,cacheXML:!0,async:!1,completefunc:function(a,b){c(a.responseXML).find("Form").each(function(){var a=c(this);f.formUrls[String(a.attr("Type")).toLowerCase()]=f.webURL+"/"+a.attr("Url")})}})}a=String(a).toLowerCase();null===f.formUrls&&(f.formUrls={},b());return f.formUrls[a]||""},setBoardColumnClass:function(a){var b=f.headersCntr.add(f.statesCntr);a=parseInt(a);if(!a||2>a)a=0,c.each(f.states,function(c,b){b.isVisible&&a++});if(f.showNumberOfColumns===a)return f;b.addClass("spwidget-states-"+
a);f.showNumberOfColumns&&b.removeClass("spwidget-states-"+f.showNumberOfColumns);f.showNumberOfColumns=a;return f},setupColumnPicker:function(){var a=b.find(".spwidget-board-column-list-cntr"),d=a.find("div.spwidget-board-column-list"),e=a.children("div.ui-state-default:last"),g={$totalCntr:a.find("span.spwidget-board-column-total"),setTotalSelected:function(){var a=g.getSelected().length;g.$totalCntr.html(a);return a},getSelected:function(){return d.find("a.ui-state-highlight")},showMessage:function(a){c('<div class="spwidget-board-msg ui-state-error ui-corner-all">'+
a+"</div>").appendTo(e).fadeOut(8E3,function(){c(this).remove()})},setSelected:function(){var a=d.find("a");c.each(f.states,function(c,b){var d=a.filter("[data-board_col_index='"+c+"']");b.isVisible?g.selectColumn(d,!1):g.selectColumn(d,!0)});g.setTotalSelected()},selectColumn:function(a,b){c(a).each(function(){var a=c(this),d=a.find(".ui-icon");a.hasClass("ui-state-highlight")||b?!1!==b&&(d.removeClass("ui-icon-check"),a.removeClass("ui-state-highlight")):(d.addClass("ui-icon-check"),a.addClass("ui-state-highlight"))});
return a},setVisibleColumns:function(a){a||(a=g.getSelected());var b=a.length;c.each(f.states,function(c,b){a.filter("[data-board_col_index='"+c+"']").length?!1===b.isVisible&&(b.isVisible=!0,b.dataEle.css("display",""),b.headerEle.css("display","")):(b.isVisible=!1,b.dataEle.css("display","none"),b.headerEle.css("display","none"))});f.setBoardColumnClass(b);f.setBoardColumnHeight()}};g.setUserDefinedVisibleCol=f.setUserDefinedVisibleCol=function(a){var b=0,e="";if(!c.isArray(a)||!a.length){if(!c.isArray(a)&&
"all"!==String(a).toLowerCase())return;a=[];c.each(f.states,function(c,b){a.push(b.title)})}c.each(a,function(a,d){c.each(f.states,function(a,c){if(c.title===d)return b++,1<b&&(e+=","),e+="a[data-board_col_name='"+c.name+"']",!1});if(b>=f.maxColumnVisible)return!1});2<=b&&(g.setVisibleColumns(d.find(e)),g.triggerEvent())};g.triggerEvent=function(){var a=[];f.initDone&&(c.each(f.statesMap,function(c,b){b.isVisible&&a.push(b.title)}),f.ele.trigger("spwidget:boardColumnChange",[f.ele,a]))};a.find("button[name='apply']").button({label:f.colPickerApplyLabel,
icons:{secondary:"ui-icon-circle-check"}}).on("click",function(c){c=g.getSelected();var b=c.length;b>f.maxColumnVisible?g.showMessage(f.colPickerMaxColMsg):2>b?g.showMessage(f.colPickerMinColMsg):(a.hide(),g.setVisibleColumns(c),g.triggerEvent())});a.find("button[name='check']").attr("title",f.colPickerCheckLabel).button({text:!1,icons:{primary:"ui-icon-radio-off"}}).on("click",function(a){a=g.getSelected();a.length?g.selectColumn(a,!0):g.selectColumn(d.find("a"));g.setTotalSelected()});a.find("button[name='close']").attr("title",
f.colPickerCloseLabel).button({text:!1,icons:{primary:"ui-icon-circle-close"}}).on("click",function(c){a.hide()});b.find("div.spwidget-board-settings").css("display","").find("div.spwidget-board-settings-columns").each(function(){var b=c(this);b.button({label:f.colPickerLabel,icons:{secondary:"ui-icon-triangle-1-s"}}).on("click.SPWidgets",function(){a.is(":visible")?a.hide():(g.setSelected(),a.show().position({my:"left top",at:"left bottom",of:b}))});return!1});d.each(function(){var a=c(this),b="";
c.each(f.states,function(a,c){b+='<a href="javascript:" data-board_col_index="'+a+'" data-board_col_name="'+c.name+'"><span class="ui-icon ui-icon-minus"></span><span>'+c.title+"</span></a>"});a.html(b);return!1}).on("click","a",function(){g.selectColumn(this);g.setTotalSelected()});a.find("span.spwidget-board-column-total-label").html(f.colPickerTotalLabel);c.isArray(f.colPickerVisible)&&f.colPickerVisible.length&&g.setUserDefinedVisibleCol(f.colPickerVisible)},setBoardColumnHeight:function(){f.statesCntr.is(":visible")&&
c.SPWidgets.makeSameHeight(f.statesCntr.find("div.spwidget-board-state:visible"),20,"min-height");f.headersCntr.is(":visible")&&c.SPWidgets.makeSameHeight(f.headersCntr.find("div.spwidget-board-state:visible"),0,"min-height")}});if(!f.list||!f.field)return b.html("<div>SPWidgets:Board [ERROR] Missing required input parameters!</div>"),this;b.addClass("loadingSPShowBoard").data("SPShowBoardOptions",f);f.getBoardStates().then(function(){""===f.CAMLViewFields?f.CAMLViewFields='<ViewFields><FieldRef Name="ID" /><FieldRef Name="Title" /><FieldRef Name="'+
f.field+'" /></ViewFields>':0>f.CAMLViewFields.indexOf(f.field)&&(f.CAMLViewFields=f.CAMLViewFields.replace(/\<\/ViewFields\>/i,'<FieldRef Name="'+f.field+'" /></ViewFields>'));b.html(c(k.htmlTemplate).filter("div.spwidget-board"));f.tmpltHeader=c("<div/>").append(b.find("div.spwidget-board-headers-cntr div.spwidget-board-state").clone()).html();f.tmpltState=c("<div/>").append(b.find("div.spwidget-board-states-cntr div.spwidget-board-state")).html();f.states.length<=f.maxColumnVisible&&(f.showNumberOfColumns=
f.states.length);f.statesCntr=b.find("div.spwidget-board-states-cntr").addClass("spwidget-states-"+f.showNumberOfColumns).empty();f.headersCntr=b.find("div.spwidget-board-headers-cntr").addClass("spwidget-states-"+f.showNumberOfColumns).empty();c.each(f.states,function(a,b){b.headerEle=c(f.tmpltHeader).appendTo(f.headersCntr).attr("data-boardstate",b.name).attr("data-boardindex",a).html("<span>"+b.title+"</span>");b.dataEle=c(f.tmpltState).appendTo(f.statesCntr).attr("data-boardindex",a).attr("data-boardstate",
b.name);b.headerTotalEle=c('<span class="spwidget-stat-item-stat-cntr">&nbsp;<span class="spwidget-stat-item-stat ui-widget-content ui-corner-all spwidget-state-item-total">0</span></span>').appendTo(b.headerEle).find("span.spwidget-state-item-total");b.isVisible=!0;a>f.maxColumnVisible-1&&(b.headerEle.css("display","none"),b.dataEle.css("display","none"),b.isVisible=!1)});c(f.headersCntr,f.statesCntr).append('<div style="clear:both;"></div>');!0===f.showColPicker&&f.setupColumnPicker();b.on("sortreceive sortremove",
function(a,b){f.updBoardHeaders();c(b.item).removeClass("ui-state-hover")}).on("sortreceive",function(a,d){var g=f.getEventObject(d.item),e=c.Deferred(),m="",m=c.isFunction(g.itemObj.ID)?g.itemObj.ID():g.itemObj.ID;g.updates=[];g.updatePromise=e.promise();g.updates.push([f.field,g.currentState]);if(c.isFunction(f.onPreUpdate)&&!0===f.onPreUpdate.call(d.item,a,d.item,g)||!g.updates.length)return this;c().SPServices({operation:"UpdateListItems",listName:f.list,async:!0,ID:m,valuepairs:g.updates,webURL:f.webURL,
completefunc:function(f,m){if("error"===m)e.rejectWith(b,["Communications Error!",f,m]);else{var k=c(f.responseXML),n=null;k.SPMsgHasError()?e.rejectWith(b,[k.SPGetMsgError(),f,m]):(n=c(f.responseXML).SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0}),c(a.target).trigger("spwidget:boardchange",[d.item,g]),e.resolveWith(a.target,[n[0],g.itemObj,f]))}}})}).on("click","a.spwidgets-board-action",function(a){a=c(a.currentTarget);var b=String(a.data("spwidgets_board_action")).toLowerCase(),d="",g=
c.pt.getEscapedUrl(window.location.href);switch(b){case "edit-item":d=f.getListFormUrl("EditForm");break;case "view-item":d=f.getListFormUrl("DisplayForm")}window.location.href=d+"?ID="+a.data("spwidgets_id")+"&Source="+g;return this});null===f.template&&(f.template=c(k.htmlTemplate).filter("div.spwidget-item-template"));f._getListItems().then(function(){f.showItemsOnBoard();f.statesCntr.find("div.spwidget-board-state").each(function(){var a=c(this);a.sortable({connectWith:a.siblings(),containment:b,
cursor:"move",tolerance:"pointer",opacity:".80",placeholder:"ui-state-highlight spwidget-board-placeholder",forcePlaceholderSize:!0,remove:function(a,c){f.setBoardColumnHeight()}})});f.statesCntr.disableSelection();f.initDone=!0;f.setBoardColumnHeight();b.addClass("hasSPShowBoard").removeClass("loadingSPShowBoard");c.isFunction(f.onBoardCreate)&&f.onBoardCreate.call(b,f.getEventObject());c(b).trigger("spwidget:boardcreate",[b,f.getEventObject()])})}).fail(function(a,c,d){b.append('<div class="ui-state-error"><p>'+
a+"</p></div>")});return this})};k.styleSheet="/** \n * Stylesheet for the Board widget\n * \n * BUILD: Paul:January 12, 2014 09:41 PM\n */\ndiv.spwidget-board {\n    width: 100%;\n    position: relative;\n}\n\ndiv.spwidget-board div.spwidget-board-headers,\ndiv.spwidget-board div.spwidget-board-headers-cntr,\ndiv.spwidget-board div.spwidget-board-states-cntr, \ndiv.spwidget-board div.spwidget-board-states {\n    width: 100%;\n}\n\ndiv.spwidget-board div.spwidget-board-state {\n    width: 49%;\n    float: left;\n    margin: .1%;\n    padding: .2%;\n    overflow: auto;\n}\n\ndiv.spwidget-board div.spwidget-board-headers-cntr div.spwidget-board-state {\n    text-align: center;\n    font-weight: bold;\n    font-size: 1.1em;\n    overflow: hidden;\n    word-wrap: break-word;\n}\ndiv.spwidget-board div.spwidget-board-headers-cntr div.spwidget-board-state .spwidget-stat-item-stat {\n    padding: 0em .2em;\n    display: inline-block;\n}\ndiv.spwidget-board div.spwidget-board-states div.spwidget-board-state {\n    margin-bottom: 1em;\n    min-height: 10em;\n}\n\ndiv.spwidget-board div.spwidget-board-state div.spwidget-board-state-item {\n    padding: .2em;\n    margin: .5em .2em;\n    font-weight: normal;\n    cursor: move;\n    overflow: auto;\n}\ndiv.spwidget-board div.spwidget-board-state-item div.spwidget-board-item-actions{\n    margin-top: .2em;\n    padding: .2em .5em;\n    overflow: hidden;\n}\ndiv.spwidget-board .spwidget-board-placeholder {\n    height: 3em;\n}\n\n/** Setting container */\ndiv.spwidget-board-settings {\n    font-size: .8em;\n    margin: .2em;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr {\n    z-index: 5;\n    position: absolute;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr > div {\n    padding: .2em;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr > div:first-child,\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr > div:last-child {\n    text-align: right;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list {\n    width: 20em;\n    height: 17em;\n    overflow: auto;\n    position: relative\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr .spwidget-board-msg {\n    position: absolute;\n    top: 1px;\n    left: 1px;\n    padding: .2em;\n}\ndiv.spwidget-board-settings div.ui-state-default {\n    position: relative;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list > a {\n    display: block;\n    margin: .2em;\n    padding: .2em;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list > a > span.ui-icon {\n    display: inline-block;\n}\n\n/* Number of Columns (96 % #columns)\n * Currently support 10 columns. \n */\ndiv.spwidget-board .spwidget-states-3 div.spwidget-board-state {\n    width: 32.4%;\n}\ndiv.spwidget-board .spwidget-states-4 div.spwidget-board-state {\n    width: 24%;\n}\ndiv.spwidget-board .spwidget-states-5 div.spwidget-board-state {\n    width: 19.1%;\n}\ndiv.spwidget-board .spwidget-states-6 div.spwidget-board-state {\n    width: 15.8%;\n}\ndiv.spwidget-board .spwidget-states-7 div.spwidget-board-state {\n    width: 13.4%;\n}\ndiv.spwidget-board .spwidget-states-8 div.spwidget-board-state {\n    width: 11.6%;\n}\ndiv.spwidget-board .spwidget-states-9 div.spwidget-board-state {\n    width: 10.2%;\n}\ndiv.spwidget-board .spwidget-states-10 div.spwidget-board-state {\n    width: 9.1%;\n}\n";
k.htmlTemplate='<div class="spwidget-board">\n    <div class="spwidget-board-settings" style="display:none;">\n        <div class=\'spwidget-board-settings-columns\'>Columns</div>\n        <div class="spwidget-board-column-list-cntr ui-widget-content ui-corner-all" style="display: none">\n            <div class="ui-state-default">\n                <span>\n                    <span class="spwidget-board-column-total"></span> \n                    <span class="spwidget-board-column-total-label">Selected.</span>\n                </span>\n                <button type="button" name="check" title="Check-Uncheck All">Check</button>\n                <button type="button" name="close" title="Close">Close</button>\n            </div>\n            <div class="spwidget-board-column-list">\n            </div>\n            <div class="ui-state-default">\n                <button type="button" name="apply">Apply</button>\n            </div>\n        </div>\n    </div>\n    <div class="spwidget-board-headers">\n        <div class="spwidget-board-headers-cntr">\n            <div class="spwidget-board-state ui-widget-content ui-corner-all"></div>\n            <div style="clear:both;"></div>\n        </div>\n    </div>\n    <div style="clear:both;"></div>\n    <div class="spwidget-board-states">\n        <div class="spwidget-board-states-cntr">\n            <div class="spwidget-board-state ui-widget-content ui-corner-all"></div>\n            <div style="clear:both;"></div>\n        </div>\n    </div>\n    <div style="clear:both;"></div>\n</div>\n<div class="spwidget-item-template">\n    <div>\n        <div>#{{ID}}: {{Title}}</div>\n        <div class="ui-state-active ui-corner-all spwidget-board-item-actions">\n            <a class="spwidgets-board-action" href="javascript:" title="View Item" data-spwidgets_id="{{ID}}" data-spwidgets_board_action="view-item"><img src="/_layouts/images/icgen.gif" border="0"/></a>\n            <a class="spwidgets-board-action" href="javascript:" title="Edit Item" data-spwidgets_id="{{ID}}" data-spwidgets_board_action="edit-item"><img src="/_layouts/images/CMSEditSourceDoc.GIF" border="0"/></a>\n        </div>\n    </div>\n</div>\n'})(s);
(function(c){var k={_islookupFieldCssDone:!1,_isLookupbodyEventDone:!1};c.SPWidgets.defaults.LookupField={list:"",allowMultiples:!0,inputLabel:"",inputPlaceholder:"Type and Pick",readOnly:!1,exactMatch:!0,uiContainer:null,selectFields:["Title"],filter:"",filterFields:["Title"],filterOrderBy:"",template:'<div>{{Title}} <span class="spwidgets-item-remove">[x]</span></div>',listTemplate:"{{Title}}",listHeight:0,onItemAdd:null,onItemRemove:null,onReady:null,msgNoItems:"",maxResults:50,minLength:2,hideInput:!0,
padDelimeter:!1,showSelector:!1};c.fn.SPLookupField=function(e){k._islookupFieldCssDone||(k._islookupFieldCssDone=!0,c('<style type="text/css">\n\n'+k.styleSheet+"\n\n</style>").prependTo("head"));var d=arguments;this.each(function(){var b=c(this);if(!b.is("input")&&!b.is("textarea")||b.hasClass("hasLookupSPField")){if("string"===typeof e&&b.is("input")){var a=b.data("SPWidgetLookupFieldUI").data("SPWidgetLookupFieldOpt");if("method"===e.toLowerCase()){var b=String(d[1]||"").toLowerCase(),g=d[2];
"clear"===b?(c.isArray(g)||(g=g?[g]:[]),g.length?function(){var b=c();c.each(g,function(c,d){b=b.add(a._selectedItemsCntr.find("div.spwidgets-item-id-"+d))});k.removeItem(a,b)}():k.removeItem(a,a._selectedItemsCntr.find("div.spwidgets-item"))):"add"===b&&k.addItem(a,g)}}return this}a=c.extend({},c.SPWidgets.defaults.LookupField,e,{_ele:b.css("display","none").addClass("hasLookupSPField")});a.showSelectedItems=function(b,d){var f=a._selectedItemsCntr.css("display",""),g=[],e=!1;f.find("div.spwidgets-item").length&&
!1!==a.allowMultiples||f.empty();c.isArray(b)?g=b:g.push(b);c.each(g,function(b,g){if(!f.find("div.spwidgets-item-id-"+g.ID).length){var m=c('<div class="spwidgets-item spwidgets-item-id-'+g.ID+'" data-spid="'+g.ID+'" style="display:none">'+c.SPWidgets.fillTemplate(a.template,g)+"</div>").appendTo(f).find(".spwidgets-item-remove").on("click.SPWidgets",function(c){k.removeItem(a,this)}).end();c.isFunction(a.onItemAdd)&&!0!==d&&a.onItemAdd.call(a._ele,m,g,a._cntr);0<f.find("div.spwidgets-item-id-"+
g.ID).length&&(e=!0,m.fadeIn("slow").promise().then(function(){c(this).css("display","")}),!0!==d&&a.storeItemIDs(g.ID,a.allowMultiples),!1===a.allowMultiples&&!0===a.hideInput&&a._lookupInputEleCntr.css("display","none"))}});a.readOnly&&a._cntr.find(".spwidgets-item-remove").remove();e&&a._ele.trigger("change")};a.storeItemIDs=function(b,d){var f=c.trim(a._ele.val()),g=!1;c.isArray(b)||(b=[b]);!0!==d&&(f="");c.each(b,function(c,b){b&&(1>f.length&&(!0===a.padDelimeter&&!g)&&(f+=";#",g=!0),0<f.length&&
(f+=";#"),f+=b+";#")});a._ele.val(f)};a.showCurrentInputSelection=function(b){return c.Deferred(function(d){var f=c.extend({},{async:!0},b),g=c.SPWidgets.parseLookupFieldValue(a._ele.val());g.length?c().SPServices({operation:"GetListItems",async:f.async,listName:a.list,CAMLQuery:"<Query><Where>"+c.SPWidgets.getCamlLogical({type:"OR",values:g,onEachValue:function(a){var c="";a.id&&(c="<Eq><FieldRef Name='ID'/><Value Type='Counter'>"+a.id+"</Value></Eq>");return c}})+"</Where></Query>",CAMLViewFields:"<ViewFields>"+
a._selectFields+"</ViewFields>",CAMLRowLimit:0,completefunc:function(b,f){var g=c(b.responseXML).SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0,removeOws:!0});a.addToAutocompleteCache(g);a.showSelectedItems(g,!0);d.resolveWith(a,[b,f])}}):d.resolveWith(a,[null,null])}).promise()};a.getItemObjectFromCache=function(b){var d=null;c.each(a._autocompleteCache,function(a,f){c.each(f,function(a,c){if(c.ID==b)return d=c,!1});if(null!==d)return!1});return d};a.addToAutocompleteCache=function(b){c.isArray(b)||
(b=[b]);c.each(b,function(c,b){a._autocompleteCache[b.ID]||(a._autocompleteCache[b.ID]=[]);a._autocompleteCache[b.ID].push(b)})};a._cntr=c(k.htmlTemplate).find(".spwidgets-lookup-cntr").clone(1);null===a.uiContainer?a._cntr.insertAfter(a._ele):a._cntr.appendTo(c(a.uiContainer));a._selectedItemsCntr=a._cntr.find("div.spwidgets-lookup-selected");a._lookupInputEleCntr=a._cntr.find("div.spwidgets-lookup-input");a._lookupInputEle=a._lookupInputEleCntr.find("input[name='spwidgetLookupInput']");a._ignoreKeywordsRegEx=
/^(of|and|a|an|to|by|the|or)$/i;a._cntr.data("SPWidgetLookupFieldOpt",a);a._ele.data("SPWidgetLookupFieldUI",a._cntr);a.showSelector?(a._selectorCntr=a._cntr.find("div.spwidget-lookup-selector-cntr"),a._queryInitDone=!1,a._cntr.find(".spwidget-lookup-selector-showhide").on("click",function(c){a._selectorCntr.is(":visible")?a._selectorCntr.css("display","none"):(a._selectorCntr.css("display","block").position({my:"left top",at:"left bottom",of:a._lookupInputEle}),a._queryInitDone||(a._queryInitDone=
!0,k.doSelectorDataInit(a)))}),a._selectorCntr.find("button[name='close']").button({text:!1,icons:{primary:"ui-icon-circle-close"}}).click(function(){a._selectorCntr.css("display","none")}),a._lookupInputEle.on("focus",function(c){a._selectorCntr.is(":visible")&&a._selectorCntr.css("display","none")})):a._cntr.find(".spwidget-lookup-selector-showhide,.spwidget-lookup-selector-cntr").remove();a.inputLabel?a._cntr.find("div.spwidgets-lookup-input label").empty().append(a.inputLabel):a._cntr.find("div.spwidgets-lookup-input label").remove();
a.inputPlaceholder&&a._lookupInputEleCntr.find("input").attr("placeholder",a.inputPlaceholder);!0===a.readOnly&&(a._lookupInputEleCntr.css("display","none"),a._cntr.find("div.spwidget-lookup").addClass("spwidget-lookup-readyonly"));a._selectFields="";c.each(a.selectFields,function(c,b){a._selectFields+="<FieldRef Name='"+b+"'/>"});a._templateTokens=String(a.template).match(/(\$\{.*?\})/g);null==a._templateTokens&&(a._templateTokens=[]);c.each(a._templateTokens,function(c,b){a._templateTokens[c]=b.replace(/[\$\{\}]/g,
"")});var f=a._autocompleteCache={};a._cntr.find("div.spwidgets-lookup-input input").autocomplete({minLength:2,appendTo:a._cntr,open:function(b,d){c(this).autocomplete("widget").each(function(){0<a.listHeight&&c(this).css("height",a.listHeight+"px");return!1})},source:function(b,d){b.term=c.trim(b.term);var g=String(c.trim(b.term)).toUpperCase();if(g in f)d(f[g]);else{f[g]=[];var e=[],k=String(b.term);if(null===k.match(/\D/)&&null!==k.match(/\d/))e.push("<Eq><FieldRef Name='ID'/><Value Type='Counter'>"+
k+"</Value></Eq>");else{k=[b.term];a.exactMatch||(k=String(b.term).split(/ /));for(var h=0,u=a.filterFields.length;h<u;h++){for(var v=[],w=0,z=k.length;w<z;w++)a._ignoreKeywordsRegEx.test(k[w])||v.push("<Contains><FieldRef Name='"+a.filterFields[h]+"'/><Value Type='Text'>"+k[w]+"</Value></Contains>");e.push(c.SPWidgets.getCamlLogical({values:v,type:"AND"}))}}e=c.SPWidgets.getCamlLogical({values:e,type:"OR"});a.filter&&(e=c.SPWidgets.getCamlLogical({values:[e,a.filter],type:"AND"}));c().SPServices({operation:"GetListItems",
listName:a.list,async:!0,CAMLQuery:"<Query><Where>"+e+"</Where>"+a.filterOrderBy+"</Query>",CAMLRowLimit:a.maxResults,CAMLViewFields:"<ViewFields>"+a._selectFields+"</ViewFields>",completefunc:function(b,e){c(b.responseXML).SPFilterNode("z:row").each(function(){var b=c(this).SPXmlToJson({includeAllAttrs:!0})[0];b.value="";b.label=c.SPWidgets.fillTemplate(a.listTemplate,b);f[g].push(b)});d(f[g])}})}},select:function(c,b){a.showSelectedItems(b.item)}}).on("keyup.SPWidgets",function(b){if(13==b.which){var d=
c(b.target).val();d&&String(d).length<a.minLength&&c(b.target).autocomplete("search",d+"    ")}});a._ele.val()?a.showCurrentInputSelection().then(function(b,d){c.isFunction(a.onReady)&&a.onReady.call(a._ele,a._cntr)}):c.isFunction(a.onReady)&&a.onReady.call(a._ele,a._cntr);return this});return this};k.removeItem=function(e,d){var b=c(d).closest("div.spwidgets-item"),a=e._selectedItemsCntr,g=[];if(c.isFunction(e.onItemRemove)){b.each(function(){g.push(e.getItemObjectFromCache(c(this).data("spid")))});
if(!1===e.onItemRemove.call(e._ele,b,g,e._cntr))return k;g=[]}b.fadeOut("fast").promise().then(function(){b.remove();!e.msgNoItems&&(!1===e.allowMultiples||!0===e.allowMultiples&&1>a.find("div.spwidgets-item").length)&&a.css("display","none");!1===e.allowMultiples&&!0===e.hideInput&&e._lookupInputEleCntr.css("display","");1>a.find("div.spwidgets-item").length&&e.msgNoItems&&a.append("<div>"+e.msgNoItems+"</div>");a.find("div.spwidgets-item").each(function(){g.push(c(this).data("spid"))});e._lookupInputEleCntr.find("input").focus();
e.storeItemIDs(g);e._ele.change()});return k};k.addItem=function(c,d){if(!d||"string"!==typeof d)return c;var b=c._ele.val();""===b&&!0===c.padDelimeter&&(b+=";#");b&&(b+=";#");c._ele.val(b+d);c.showCurrentInputSelection();return c};k.doSelectorDataInit=function(e){var d={$resultsCntr:e._selectorCntr.find("div.spwidget-lookup-selector-item-cntr"),nextPageToken:"",isLoading:!1,hasMorePages:!0,$lastPage:c(),queryXml:e.filter?"<Query><Where>"+e.filter+"</Where>"+e.filterOrderBy+"</Query>":"<Query>"+
e.filterOrderBy+"</Query>"};k._isLookupbodyEventDone||(k._isLookupbodyEventDone=!0,c("body").on("click",function(b){b=c(b.target);var a=c("div.spwidget-lookup-selector-cntr:visible"),d=null;a.length&&(d=b.closest("div.spwidget-lookup-selector-cntr"),!d.length&&b.is(".spwidget-lookup-selector-showhide")&&(d=b.parent().find("div.spwidget-lookup-selector-cntr")),a.not(d).hide())}));d.getListRows=function(){return c.Deferred(function(b){d.isLoading?b.resolveWith($lastPage,[$lastPage]):(d.isLoading=!0,
c().SPServices({operation:"GetListItems",listName:e.list,async:!0,CAMLQuery:d.queryXml,CAMLRowLimit:e.maxResults,CAMLViewFields:"<ViewFields>"+e._selectFields+"</ViewFields>",CAMLQueryOptions:function(){if(""!==d.nextPageToken)return"<QueryOptions><Paging ListItemCollectionPositionNext='"+c.SPWidgets.escapeXML(d.nextPageToken)+"'/></QueryOptions>"}(),completefunc:function(a,g){var f=c(a.responseXML),m=f.SPFilterNode("rs:data").eq(0),k=f.SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0,removeOws:!0}),
f=c("<div/>").insertBefore(d.$nextPage),h="";d.nextPageToken=m.attr("ListItemCollectionPositionNext")||"";""===d.nextPageToken&&(d.hasMorePages=!1);c.each(k,function(a,b){e.addToAutocompleteCache(b);b.value="";b.label=c.SPWidgets.fillTemplate(e.listTemplate,b);h+='<div class="spwidget-lookup-item" data-spwidgetsindex="'+a+'">'+b.label+"</div>"});f.html(h).find("div.spwidget-lookup-item").each(function(){var a=c(this);a.hover(function(){a.addClass("ui-state-hover")},function(){a.removeClass("ui-state-hover")})}).end().on("click",
"div.spwidget-lookup-item",function(a){a=c(this).data("spwidgetsindex");e.showSelectedItems(k[a])});d.isLoading=!1;b.resolveWith(f,[f])}}))})};d.$nextPage=c('<div class="ui-state-highlight spwidget-lookup-selector-next">Next...</div>').appendTo(d.$resultsCntr.empty()).click(function(c){d.hasMorePages&&(d.$nextPage.css("display","none"),d.getListRows().then(function(a){d.hasMorePages?d.$nextPage.css("display",""):a.children().length||a.append("<div class='ui-state-highlight'>No Items Found!</div>");
d.$resultsCntr.scrollTop(a.position().top)}))});d.$nextPage.click();return e};k.styleSheet='/**\n * Stylesheet for the Lookup Field widget.\n * \n */\n\n.spwidgets-lookup-cntr {\n    position: relative;\n    display: inline-block;\n    zoom: 1; /* IE7 hack */\n    *display: inline; /* IE7 hack */\n}\n\n\n.spwidgets-lookup-cntr .spwidgets-lookup-selected {\n    -moz-appearance: textfield;\n    -webkit-appearance: textfield;\n    background-color: white;\n    background-color: -moz-field;\n    border: 1px solid  darkgray;\n    box-shadow: 1px 1px 1px 0 lightgray inset;  \n    font: -moz-field;\n    font: -webkit-small-control;\n    margin-top: 5px;\n    padding: 2px 5px; \n}\n\n.spwidgets-lookup-cntr  .spwidgets-lookup-selected .spwidgets-item {\n    display: inline-block;\n    margin-left: .5em;\n}\n.spwidgets-lookup-cntr .spwidgets-item:first-child {\n    margin-left: 0px;\n}\n.spwidgets-lookup-cntr .spwidgets-item-remove {\n    color: red;\n    font-size: xx-small;\n    vertical-align: super;\n    cursor: pointer;\n}\n\n.spwidgets-lookup-cntr .spwidgets-lookup-input {\n    margin: .2em 0em;\n    position: relative;\n}\n.spwidgets-lookup-cntr .spwidgets-lookup-input input {\n    width: 99%;\n}\n.spwidgets-lookup-cntr ul.ui-autocomplete {\n    overflow: auto;\n    z-index: 1;\n}\n\n/* Ready only display */\n.spwidgets-lookup-cntr div.spwidget-lookup-readyonly .spwidgets-lookup-selected {\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    background-color: transparent;\n    border: none;\n    box-shadow: none;\n    font: inherit;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-readyonly .spwidgets-item-remove {\n    display: none;\n}\n\n/** SELECTOR */\n.spwidgets-lookup-cntr .spwidget-lookup-selector-showhide {\n    background-repeat: no-repeat;\n    background-image: url("/_layouts/images/bizdatacontentsource.gif");\n    cursor: pointer;\n    display: block;\n    position: absolute;\n    text-indent: -99999px;\n    z-index: 5;\n    height: 16px;\n    width: 16px;\n    right: 5px;\n    top: .3em;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-cntr {\n    display: none;\n    position: absolute;\n    left: 0px;\n    z-index: 10;\n    padding: .2em;\n    width: 98%;\n    font-size: .8em;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-cntr > .ui-state-default {\n    padding: .2em;\n    text-align: right;\n}\n\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr {\n    height: 15em;\n    overflow: auto;\n    padding: .2em;\n    font-size: 1em;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr .ui-state-highlight {\n    padding: .5em;\n    margin: 1em .2em;\n    text-align: center;\n    font-size: 1.1em;\n    font-weight: bold;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr .spwidget-lookup-selector-next {\n    cursor: pointer;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr .spwidget-lookup-item {\n    padding: .2em .5em;\n    margin: .2em;\n    cursor: pointer;\n    font-weight: normal;\n}\n\n';
k.htmlTemplate='<div>\n    <div class="spwidgets-lookup-cntr">\n        <div class="spwidget-lookup">\n            <div class="spwidgets-lookup-selected" style="display:none;">\n            </div>\n            <div class="spwidgets-lookup-input">\n                <label>Add</label>\n                <input type="text" name="spwidgetLookupInput" value="" />\n                <span class="spwidget-lookup-selector-showhide" title="Browse">Browse</span>\n                <div class="spwidget-lookup-selector-cntr ui-widget-content">\n                    <div class="ui-state-default">\n                        <button type="button" name="close" title="Close">Close</button>\n                    </div>\n                    <div class="spwidget-lookup-selector-item-cntr"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n'})(s);
(function(){h.pt.pickSPUser={_isPickSPUserCssDone:!1};h.fn.pickSPUser=function(c){h.pt.pickSPUser._isPickSPUserCssDone||(h.pt.pickSPUser._isPickSPUserCssDone=!0,h('<style type="text/css">\n\n'+h.pt.pickSPUser.styleSheet+"\n\n</style>").prependTo("head"));var k=arguments,e=this;if("string"===typeof c)return function(c){return c.is("input")&&c.hasClass("hasPickSPUser")?h.pt.pickSPUser.handleAction.apply(c,k):e}(e.eq(0));this.each(function(){var d=h(this),b=h.extend({},{allowMultiples:!0,maxSearchResults:50,
webURL:h().SPServices.SPGetCurrentSite(),type:"User",onPickUser:null,onCreate:null,onRemoveUser:null,inputPlaceholder:"Type and Pick"},c,{eleUserInput:d.css("display","none").addClass("hasPickSPUser")});b.maxSearchResults=parseInt(b.maxSearchResults)||50;var a=h(h.pt.pickSPUser.htmlTemplate).find(".pt-pickSPUser").clone(1).insertAfter(d);b.eleSelected=a.find("div.pt-pickSPUser-selected").empty().on("click",".tt-delete-icon",function(){h.pt.pickSPUser.removeUser(this)});b.elePickInput=a.find("div.pt-pickSPUser-input");
b.addPeopleToList=function(a,c){var d=(new String(a)).split(";#"),g=d.length,e,k,r;for(e=0;e<g;e++)k=d[e],e++,r=d[e],k=h.pt.pickSPUser.getUserHtmlElement(b,k,r).appendTo(b.eleSelected),function(a,c){b.getSearchResults(c).done(function(b,d,f){var g=String(c).toLowerCase();h.each(b,function(c,b){if(String(b.displayName).toLowerCase()===g)return a.data("pickspuser_object",b),!1})})}(k,r);h.pt.addHoverEffect(b.eleSelected.find("div.pt-pickSPUser-person-cntr"));!1===b.allowMultiples&&b.elePickInput.css("display",
"none");h.pt.pickSPUser.storeListOfUsers(b.eleSelected,c)};b.getSearchResults=function(a){return h.Deferred(function(c){h().SPServices({operation:"SearchPrincipals",searchText:a,maxResults:b.maxSearchResults,principalType:b.type,async:!0,webURL:b.webURL,completefunc:function(a,b){var d=[];h(a.responseXML).find("PrincipalInfo").each(function(){var a=h(this),a={displayName:a.find("DisplayName").text(),accountId:a.find("UserInfoID").text(),accountName:a.find("AccountName").text(),accountType:a.find("PrincipalType").text(),
value:a.find("DisplayName").text(),label:""};a.label+=a.displayName;d.push(a)});c.resolveWith(a,[d,a,b])}})}).promise()};!0===b.allowMultiples&&b.eleSelected.addClass("pt-pickSPUser-selected-multiple");var g={};b.elePickInput.find("input[name='pickSPUserInputField']").attr("placeholder",b.inputPlaceholder).autocomplete({minLength:3,appendTo:b.elePickInput,source:function(a,c){a.term in g?c(g[a.term]):(g[a.term]=[],b.getSearchResults(a.term).then(function(b,d,e){g[a.term].push.apply(g[a.term],b);c(g[a.term])}))},
select:function(c,g){if(!1===b.allowMultiples)b.eleSelected.empty();else if(b.eleSelected.find("div[data-pickspuserid='"+g.item.accountId+"']").length)return;h.pt.pickSPUser.getUserHtmlElement(b,g.item.accountId,g.item.displayName).appendTo(b.eleSelected).data("pickspuser_object",g.item);h.pt.pickSPUser.storeListOfUsers(a);h.pt.addHoverEffect(a.find("div.pt-pickSPUser-person-cntr"));setTimeout(function(){c.target.value=""},50);!1===b.allowMultiples&&b.elePickInput.hide();h.isFunction(b.onPickUser)&&
b.onPickUser.call(b.eleUserInput,h.extend({},g.item));d.trigger(h.Event("spwidget:peoplePickerAdd"),[b.eleUserInput,h.extend({},g.item)])}});a.data("pickSPUserContainerOpt",b);d.data("pickSPUserContainer",a);d.val()&&b.addPeopleToList(d.val(),!0);h.isFunction(b.onCreate)&&b.onCreate.call(d,d);d.trigger(h.Event("spwidget:peoplePickerCreate"),[b.eleUserInput]);return this});return this};h.pt.pickSPUser.getUserHtmlElement=function(c,k,e){c=h(h.pt.pickSPUser.htmlTemplate).find(".pt-pickSPUser-person").clone(1);
c.attr("data-pickSPUserID",k);c.find("span.pt-person-name").append(e).end().attr("data-pickSPUserNAME",e);return c};h.pt.pickSPUser.removeUser=function(c){var k=h(c).closest("div.pt-pickSPUser"),e=k.data("pickSPUserContainerOpt");c=h(c).closest("div.pt-pickSPUser-person");var d=c.data("pickspuser_object");h.isFunction(e.onRemoveUser)&&e.onRemoveUser.call(e.ele,e.ele,c,d);c.fadeOut("fast",function(){h(this).remove();h.pt.pickSPUser.storeListOfUsers(k)});!1===e.allowMultiples&&e.elePickInput.show("fast",
function(){e.elePickInput.find("input").focus()});e.eleUserInput.trigger(h.Event("spwidget:peoplePickerRemove"),[e.eleUserInput,d])};h.pt.pickSPUser.storeListOfUsers=function(c,k){var e=h(c).closest("div.pt-pickSPUser"),d=e.data("pickSPUserContainerOpt"),b="",a={};e.find("div.pt-pickSPUser-selected div.pt-pickSPUser-person").each(function(){a[h(this).attr("data-pickSPUserID")]||(a[h(this).attr("data-pickSPUserID")]=!0,b&&(b+=";#"),b+=h(this).attr("data-pickSPUserID"),b+=";#",b+=h(this).attr("data-pickSPUserNAME"))});
d.eleUserInput.val(b);k||d.eleUserInput.change()};h.pt.pickSPUser.handleAction=function(c,k,e){c=String(c).toLowerCase();k=String(k).toLowerCase();var d=h(this).data("pickSPUserContainer").data("pickSPUserContainerOpt"),b=this;if("method"===c)switch(k){case "clear":d.eleUserInput.val("");d.eleSelected.empty();!1===d.allowMultiples&&(d.eleSelected.css("display","none"),d.elePickInput.show());break;case "destroy":h(this).hasClass("hasPickSPUser")&&h(this).removeClass("hasPickSPUser").next(".pt-pickSPUser").remove().show().trigger("change");
break;case "add":d.addPeopleToList(e);break;case "remove":e&&(c=d.eleSelected.find("div[data-pickspuserid='"+e+"']"),c.length||(c=d.eleSelected.find("div[data-pickspusername='"+e+"']")),c.length&&h.pt.pickSPUser.removeUser(c));break;case "getselected":b=h.SPWidgets.parseLookupFieldValue(d.eleUserInput.val())}return b};h.pt.pickSPUser.styleSheet="/**\n * Styles for the Pick User Widget\n */\n.pt-pickSPUser .pt-pickSPUser-selected-multiple {\n    min-height: 3em;\n}\n\n.pt-pickSPUser .pt-pickSPUser-selected .pt-pickSPUser-person {\n    float: left;\n    margin-left: .2em;\n}\n.pt-pickSPUser .pt-pickSPUser-hint {\n    font-size: .9em;\n}\n\n.pt-pickSPUser div.pt-pickSPUser-input input.ui-autocomplete {\n    width: 99%;\n}\n.pt-pickSPUser div.pt-pickSPUser-input ul.ui-autocomplete {\n    z-index: 1;\n}\n\n.pt-pickSPUser .pt-pickSPUser-person-cntr {\n    margin: .2em 0em;\n    padding: .2em;\n    position: relative;\n}\n\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-person-name {\n    padding-right: 2em;\n}\n\n/* Item action container (delete button) */\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions {\n    position: absolute;\n    right: 1px;\n    top: 1px;\n    padding: .2em;\n    display: none;\n}\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions .pt-pickSPUser-person-action-links,\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions .pt-pickSPUser-person-action-links .tt-confirm-delete {\n    float:right;\n}\n\n/* Make the action visible if we hover or we are trying to confirm a deletion */\n.pt-pickSPUser .pt-pickSPUser-person-cntr.ui-state-hover .pt-pickSPUser-person-actions,\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions.tt-confirm,\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions a {\n    display:block;\n    float: right;\n}\n\n/* autocomplete busy image */\n.ui-autocomplete-loading {\n    background: white url('/_layouts/images/loading.gif') right center no-repeat;\n}\n\n\n";
h.pt.pickSPUser.htmlTemplate='\x3c!--\n    Html Templates for the PickSPUser plugin.\n    \n    |\n    |   $Author$\n    | $Revision$\n    |     $Date$\n    |       $Id$\n    |\n--\x3e\n<div>\n    <div class="pt-pickSPUser">\n        <div class="pt-pickSPUser-selected">\n            None Selected!\n        </div>\n        <div style="clear:both"></div>\n        <div class="pt-pickSPUser-input" \n                title="Type user name above to view search results.">\n            <input name="pickSPUserInputField" value="" type="text"/>\n        </div>\n    </div>\n    \n    <div class="pt-pickSPUser-person">\n        <div class="pt-pickSPUser-person-cntr ui-state-default ui-corner-all">\n            <span class="pt-person-name"></span>\n            <div class="pt-pickSPUser-person-actions">\n                <div class="tt-record-item-action-links">\n                    <a class="tt-delete-icon" href="javascript:" onclick="jQuery.pt.pickSPUser.removeUser(this);">\n                        <img style="border: medium none; margin-right: 2px;" alt="Delete" src="/_layouts/images/delitem.gif">\n                    </a>\n                    <div style="clear:both;"></div>\n                </div>\n                <div style="clear:both;"></div>\n            </div>\n        </div>\n    </div>\n</div>\n';
h.pt.addHoverEffect=function(c){return h(c).each(function(){if(!h(this).hasClass("addHoverEffectDone")){h(this).addClass("addHoverEffectDone");var c=this;h(c).mouseenter(function(){h(c).toggleClass("ui-state-hover")});h(c).mouseleave(function(){h(c).toggleClass("ui-state-hover")})}})}})(s);(function(c){var k={isSPUploadCssDone:!1};c.SPWidgets.defaults.upload={listName:"",folderPath:"",uploadDonePage:"",onPageChange:null,onUploadDone:null,uploadUrlOpt:"",overwrite:!1,uploadPage:"",overlayClass:"",
overlayBgColor:"white",overlayMessage:"<div>Working on it</div>",selectFileMessage:"Click here to select file...",uploadDoneMessage:"Upload Successful!",fileNameErrorMessage:'A file name cannot contain any of the following characters: \\ / : * ? " &lt; &gt; | # { } % ~ &amp;',noFileErrorMessage:"No file selected!",checkInFormHeight:"25em",webURL:null,debug:!1,filenameInputSelector:"input[id$='onetidIOFile']"};c.fn.SPControlUpload=function(e){k.isSPUploadCssDone||(k.isSPUploadCssDone=!0,c('<style type="text/css">\n\n'+
k.StyleSheet+"\n\n</style>").prependTo("head"),c.SPWidgets.defaults.upload.webURL||(c.SPWidgets.defaults.upload.webURL=c().SPServices.SPGetCurrentSite()));return c(this).each(function(){var d=c.extend({},c.SPWidgets.defaults.upload,e),b;d.log=d.debug?k.log:function(){};d.showHideBusy=function(a){return c.Deferred(function(c){a?d.$busyOverlay.fadeOut("fast").promise().then(function(){c.resolve()}):d.$busyOverlay.fadeIn("slow").promise().then(function(){c.resolve()})}).promise()};d.showHideFullForm=
function(a){a?(d.$content.removeClass("spwidget-show-full-form"),d.$iframeCntr.css({overflow:"",height:""})):(d.$content.addClass("spwidget-show-full-form"),d.$iframeCntr.css({overflow:"auto",height:"auto"}));return d};d.showHideSuccess=function(a){a?d.$successCntr.stop().fadeOut().promise(function(){d.$successCntr.css("display","none")}):d.$successCntr.stop().show().promise(function(){d.$successCntr.css("display","block")});return d};d.showError=function(a){a=c.extend({},{message:"",autoHide:!0},
a);d.$errorCntrMsg.html(a.message);d.$errorCntr.stop().css("display","block");a.autoHide&&d.$errorCntr.animate({opacity:1},5E3,function(){d.clearError()});return d};d.clearError=function(){d.$errorCntr.css("display","none");return d};d.resetWidget=function(){d.ev={state:1,action:"uploading",hideOverlay:!0,pageUrl:"",page:null,isUploadDone:!1,file:{}};d.$iframe.attr("src",d.uploadPage);return d};d.getUploadedFileRow=function(){var a={};c().SPServices({operation:"GetListItems",async:!1,webURL:d.webURL,
listName:d.listName,CAMLQuery:"<Query><Where><Eq><FieldRef Name='Author' LookupId='TRUE'/><Value Type='Integer'><UserID/></Value></Eq></Where><OrderBy><FieldRef Name='Modified' Ascending='FALSE'/></OrderBy></Query>",CAMLViewFields:"<ViewFields><FieldRef Name='ID'/><FieldRef Name='EncodedAbsUrl'/><FieldRef Name='FileLeafRef' /><FieldRef Name='Author' /><FieldRef Name='Editor' /><FieldRef Name='Created' /><FieldRef Name='Modified' /></ViewFields>",CAMLRowLimit:1,CAMLQueryOptions:"<QueryOptions><ViewAttributes Scope='Recursive' /></QueryOptions>",
completefunc:function(b,d){var e=c(b.responseXML).SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0});e.length&&(a=e[0])}});return a};d.isUploadPage=function(a){var c=!1,b=document.createElement("a"),e=null;b.href=String(a).toLowerCase();d.userUploadPage?(e=document.createElement("a"),e.href=String(d.userUploadPage).toLowerCase(),b.pathname===e.pathname&&(c=!0)):c=/upload(ex)?\.aspx$/.test(b.pathname);return c};d.listName&&0!==d.listName.indexOf("{")&&(d.listName=c.pt.getListUID(d.listName));
if(!d.listName)return c(this).html('<div class="ui-state-error">Input parameter [listName] not valid!</div>'),this;d.spVersion=c.SPWidgets.getSPVersion(!0);d.userUploadPage=d.uploadPage;d.uploadPage=String(d.uploadPage);if(d.uploadPage)-1===d.uploadPage.toLowerCase().indexOf("http")&&(b="/",0==d.uploadPage.indexOf("/")&&(b=""),d.uploadPage=d.webURL+b+d.uploadPage);else switch(d.spVersion){case "2013":d.uploadPage=d.webURL+"/_layouts/15/UploadEx.aspx";break;case "2010":d.uploadPage=d.webURL+"/_layouts/UploadEx.aspx";
break;default:d.uploadPage=d.webURL+"/_layouts/Upload.aspx"}d.uploadDonePage=String(d.uploadDonePage);d.uploadDonePage||(d.uploadDonePage=d.webURL+"/_layouts/images/STS_ListItem_43216.gif");d._iframeLoadId=1;d._uploadUrlParams="?List="+c.pt.getEscapedUrl(d.listName)+"&RootFolder="+c.pt.getEscapedUrl(d.folderPath)+"&Source="+c.pt.getEscapedUrl(d.uploadDonePage)+"&"+(new Date).getTime()+"=1&"+d.uploadUrlOpt;d.uploadPage+=d._uploadUrlParams;d._lastError="";d._reloadCount=0;d.ev={state:1,action:"uploading",
hideOverlay:!0,pageUrl:"",page:null,isUploadDone:!1,file:{}};d.$ele=c(this);b={};d.overlayBgColor&&(b["background-color"]=d.overlayBgColor);d.$cntr=c(c(k.HtmlUI).filter("div.SPControlUploadUI").clone()).appendTo(d.$ele.addClass("hasSPControlUploadUI").empty()).data("SPControlUploadOptions",d);d.$buttonCntr=d.$cntr.find("div.buttonPane").click(function(a){k.onUpload(this)});d.$content=d.$cntr.find("div.mainContainer");d.$iframeCntr=d.$cntr.find("div.iFrameWindow");d.$iframe=d.$iframeCntr.children("iframe");
d.$busyOverlay=d.$cntr.find("div.loadingOverlay");d.$busyOverlayMsg=d.$busyOverlay.find("div.loadingOverlayMsg");d.$successCntr=d.$cntr.find("div.spwidget-success-cntr");d.$errorCntr=d.$cntr.find("div.spwidget-error-cntr");d.$errorCntrMsg=d.$errorCntr.find(".spwidget-msg");d.reInvalidChr=/[\/:*?"<>|#{}%~&]/;d.$successCntr.on("click",".spwidget-close",function(a){d.showHideSuccess(!0)}).find(".spwidget-msg").html(d.uploadDoneMessage);d.$errorCntr.on("click",".spwidget-close",function(a){d.clearError()});
d.$busyOverlay.addClass(d.overlayClass).css(b);d.$busyOverlayMsg.html(d.overlayMessage);d.showHideBusy();d.$cntr.find("iframe").css("height",d.checkInFormHeight).load(function(a){k.onIframeChange(d.$ele.find(".SPControlUploadUI"))}).attr("src",d.uploadPage).end();return this})};k.onUpload=function(e){var d=c(e).closest(".SPControlUploadUI"),b=d.find("iframe").contents(),a=b.find("input[type='file']").closest("tr").siblings().find("span"),g=d.data("SPControlUploadOptions");e=g.ev;g.log("Upload.onUpload("+
g._iframeLoadId+"): Start....");a.css("display","none");if(b.find("input[type='file']").val())if(g.reInvalidChr.test(b.find("div.SPControlUploadModUIFileSelected").text()))g.showError({message:g.fileNameErrorMessage});else{e.state=2;e.action="preLoad";if(g.onPageChange&&!1===g.onPageChange.call(g.$ele,e))return!1;g.showHideFullForm(!0);g.showHideBusy().then(function(){g.log("Upload.onUpload("+g._iframeLoadId+"): Clicking the OK button on upload form.");b.find("input[type='button'][id$='btnOK']").click();
if(a.is(":visible"))return g.log("Upload.onUpload("+g._iframeLoadId+"): Error message reported! \n"+a.text()),d.find(".loadingOverlay").css("display","none").end(),!1})}else g.showError({message:g.noFileErrorMessage})};k.isSPBusyAnimation=function(c){return c.find("#GearPage").length||c.find("#ms-loading-box").length?!0:!1};k.onIframeChange=function(e){var d=c(e).closest(".SPControlUploadUI"),b=d.data("SPControlUploadOptions"),a=0,g=c(d.find("iframe").contents());if(b.debug)try{b.log("Upload.onIframeChange(): ENTERING... Document readyState: "+
g[0].readyState+" IFRAME URL: "+g[0].location.href)}catch(f){}k.isSPBusyAnimation(g)?b.log("Upload.onIframeChange(): EXITING... Gear page displyed."):2===b.ev.state&&"preLoad"===b.ev.action&&!0===g[0].spcontrolupload_init_done?(b.log("Upload.onIframeChange("+b._iframeLoadId+"): Exiting! ev.action=["+b.ev.action+"] and ev.state=["+b.ev.state+"] - Nothing to do. Action handled by onUpload(). Setting action to postLoad"),b.ev.action="postLoad"):(b._iframeLoadId++,a=b._iframeLoadId,b.log("Upload.onIframeChange("+
a+"): State=["+b.ev.state+"] Action=["+b.ev.action+"]"),setTimeout(function(){if(a!==b._iframeLoadId)b.log("Upload.onIframeChange("+a+"): not latest invokation! Existing.");else{var f=b.ev,e=g.find("form").eq(0);g=c(d.find("iframe").contents());b.log("Upload.onIframeChange("+a+"): STARTING... Executing setTimeout(). URL:"+g[0].location.href);if(!0===g.spcontrolupload_init_done)b.log("Upload.onIframeChange("+a+"): EXITING!!! Page was already processed!");else{g.spcontrolupload_init_done=!0;f.pageUrl=
g[0].location.href;f.page=g;b.$iframeCntr.scrollTop(0);g.scrollTop(0);if(b.isUploadPage(f.pageUrl)){b.log("Upload.onIframeChange("+a+"): URL is the upload page!");g.find("body").css({overflow:"hidden"});e.children(":visible").hide().end().append(c(k.HtmlUI).filter("div#SPControlUploadModUI").clone()).find("div.SPControlUploadModUIFileSelected").html(b.selectFileMessage);if(RegExp(/error/i).test(c.trim(g.find(".ms-pagetitle").text()))||RegExp(/error/i).test(c.trim(g.find("title").text()))||RegExp(/error\.aspx/i).test(c.trim(g.find("form").attr("action")))){b.log("Upload.onIframeChange("+
a+"): page displaying an error... Storing it and reloading upload form.");b._lastError=g.find("[id$='LabelMessage']").text();if(1<b._reloadCount){alert("Error encountered during upload which is causing program to loop. Last upload error was: "+b._lastError);d.find(".loadingOverlay").fadeOut();return}b._reloadCount+=1;d.find("iframe").attr("src",b.uploadPage);return}if(k.isSPBusyAnimation(g)&&!g.find("input[type='file']").length){b.log("Upload.onIframeChange("+a+"): SP processing page (GearPage)... Exiting and waiting for next page...");
return}g.find("input[type='file']").closest("table").appendTo(g.find("#SPControlUploadModUI")).removeClass("ms-authoringcontrols");var h=g.find("#SPControlUploadModUI").find("input[type='file']").closest("tr").siblings().css("display","none").end().end().siblings("tr .ms-error").css("display","").end().on("change focus click",function(a){a=c(this).val();var d="",f="/_layouts/images/urn-content-classes-smartfolder16.gif";if(a){try{d=a.substr(a.lastIndexOf(".")+1)}catch(e){d="GEN"}f="/_layouts/images/IC"+
d.toUpperCase()+".GIF";a=a.replace(/\\/g,"/").split("/").pop()||a}else a=b.selectFileMessage;g.find("#SPControlUploadModUI > div").html(a).css("background-image","url('"+f+"')")}).css({cursor:"pointer",height:"100px",position:"absolute",left:"0px",top:"0px",filter:"alpha(opacity=1)",opacity:"0.01",outline:"none","-moz-opacity":"0.01","font-size":"100px","z-index":"5"});e.on("mousemove",function(a){h.css({left:a.pageX-(h.width()-50),top:a.pageY-30}).blur()});b._lastError&&(b.showError({message:b._lastError}),
b._lastError="");b._reloadCount=0;b.overwrite?g.find("input[type='checkbox'][name$='OverwriteSingle']").prop("checked","checked"):g.find("input[type='checkbox'][name$='OverwriteSingle']").prop("checked","");f.state=1;f.action="postLoad";f.hideOverlay=!0}else{b.log("Upload.onIframeChange("+b._iframeLoadId+"): File uploaded to server! Need ["+b.uploadDonePage+"] to be done.");f.state=3;f.action="postLoad";f.hideOverlay=!0;f.file=b.getUploadedFileRow();if(k.isSameUrlPage(f.pageUrl,b.uploadDonePage))b.log("Upload.onIframeChange("+
b._iframeLoadId+"): Upload widget process DONE!"),f.isUploadDone=!0,f.hideOverlay=!1,b.showHideBusy(),b.showHideSuccess();else if(b.log("Upload.onIframeChange("+b._iframeLoadId+"): Post Upload Form being displayed! Hooking into form.onsubmit!"),e.length){var l=e.prop("onsubmit"),y=e.find(b.filenameInputSelector).eq(0);y.length&&(e.children(":visible").css("display","none").addClass("ptWasVisible"),y.closest("div[id^='WebPart']").appendTo(e).css("display","").removeClass("ptWasVisible"));e[0].onsubmit=
function(){b.log("Upload.onIframeChange("+a+"): iframe form.onsubmit triggered!");b.showHideBusy();var d=!0;c.isFunction(b.onPageChange)&&(d=b.onPageChange.call(b.$ele,c.extend({},f,{state:3,action:"preLoad"})));if(!1===d)return b.showHideBusy(!0),d;c.isFunction(l)&&(d=l());if(!1===d)return b.showHideBusy(!0),d;b.showHideFullForm(!0);return d}}c(d.find("iframe")[0].contentWindow).unload(function(a){b.log("Upload.onIframeChange("+b._iframeLoadId+"): iframe.unload() triggered!");b.showHideBusy();b.showHideFullForm(!0);
if(c.isFunction(b.onPageChange))return b.onPageChange.call(b.$ele,c.extend({},f,{state:3,action:"preLoad"}))})}b.log("Upload.onIframeChange("+b._iframeLoadId+"): iframe page setup done!");b.onPageChange&&b.onPageChange.call(b.$ele,f);if("postload"!==f.action.toLowerCase()||!0===f.hideOverlay)b.showHideBusy(!0),!1===f.isUploadDone&&3===f.state&&b.showHideFullForm();f.isUploadDone&&(b.resetWidget(),b.$successCntr.animate({opacity:1},3E3,function(){b.showHideSuccess(!0)}),c.isFunction(b.onUploadDone)&&
b.onUploadDone.call(b.$ele,f.file))}}},500))};k.isSameUrlPage=function(c,d){if(!c||!d)return!1;var b=function(a){var c=document.createElement("a");c.href=a;return unescape(c.pathname)},a=String(b(c)).toLowerCase(),b=String(b(d)).toLowerCase();return a===b};c.pt.getEscapedUrl=escapeProperly;c.pt.getUnEscapedUrl=unescapeProperly;c.pt.getListUID=function(e){if(!e)return"";var d="";if(c.pt._cache["getListUID:"+e])return d=c.pt._cache["getListUID:"+e];c().SPServices({operation:"GetList",listName:e,async:!1,
completefunc:function(b,a){d=c(b.responseXML).find("List").attr("ID")}});d&&(c.pt._cache["getListUID:"+e]=d);return d};k.log=function(){var e,d,b=1,a=0,g=!1,f=!1,k=["#FFFFFF","#F5F5F2"];"undefined"===typeof console||"undefined"===typeof console.debug?e=function(){var c,f,g="";c=0;for(f=arguments.length;c<f;c++)g+='<div style="padding: .1em .1em;background-color:'+k[a]+'"><span>['+b+"] </span>"+arguments[c]+"</div>",b++,a=1===a?0:1;g&&(d.append(g),d.dialog("isOpen")||d.dialog("open"))}:g=!0;return function(){f||
(f=!0,g||(d=c("<div><h2>SPWidgets Debug Output</h2></div>").appendTo("body").dialog({title:"Debug output",height:300})));if(g){var a,b;a=0;for(b=arguments.length;a<b;a++)console.debug(arguments[a])}else e.apply(this,arguments)}}();k.StyleSheet="/**\n * FILE: jquery.SPControlUpload.css\n * \n * \n */\n.spcontrolupload .mainContainer {\n\tposition: relative;\n\tdisplay:block;\n\theight: 4em;\n}\n\n.spcontrolupload .iFrameWindow,\n.spcontrolupload .buttonPane,\n.spcontrolupload .spwidget-success-cntr,\n.spcontrolupload .loadingOverlay {\n    position: absolute;\n    top: 0px;\n    height: 3em;\n    width: 100%;\n}\n.spcontrolupload .buttonPane {\n    left: 0px;\n    width: 10%;\n    overflow: hidden;\n    cursor: pointer;\n}\n.spcontrolupload .buttonPane .upload_button {\n    font-weight: bold;\n    font-size: 1.1em;\n    text-align: center;\n    margin-top: .8em;\n}\n\n.spcontrolupload .iFrameWindow {\n    width: 90%;\n    left: 10%;\n    overflow: hidden;\n}\n.spcontrolupload .iFrameWindow iframe {\n\toverflow: auto;\n\twidth: 100%;\n\theight: 99%;\n}\n\n.spcontrolupload .spwidget-show-full-form .iFrameWindow {\n    overflow: auto;\n    width: 100%;\n    margin: 0em;\n    left: 0px;\n    right: auto;\n    z-index: 5;\n}\n\n.spcontrolupload .loadingOverlayMsg {\n\tfont-size: 1em;\n\tbackground-position: left top;\n    background-repeat: no-repeat;\n    background-image: url('/_layouts/images/loadingcirclests16.gif');\n    margin: 0.5em;\n    padding-left: 25px;\n}\n\n.spcontrolupload .spwidget-success-cntr,\n.spcontrolupload .spwidget-error-cntr {\n    display: none;\n}\n.spcontrolupload div.spwidget-msg-cntr {\n    margin: 0.5em .5em .5em 3em;\n\tfont-size: 1em;\n\tbackground-position: left top;\n    background-repeat: no-repeat;    \n}\n.spcontrolupload .spwidget-close {\n    color: red;\n    font-size: xx-small;\n    font-weight: bold;\n    vertical-align: super;\n    cursor: pointer;\n}\n\n.spcontrolupload .spwidget-success-cntr div.spwidget-msg-cntr {\n    background-image: url('/_layouts/images/STS_ListItem_43216.gif');\n    padding-left: 30px;\n}\n\n.spcontrolupload .spwidget-error-cntr {\n    bottom: -1.5em;\n    left: 0px;\n    width: 100%;\n    position: absolute;\n}\n\n/* For debug/dev purpose. Add it to .spcontrolupload container */\n.spcontrolupload-dev-mode .iFrameWindow {\n    overflow: auto !important;\n    height: auto !important;\n    z-index: 5 !important;\n}\n.spcontrolupload-dev-mode .iFrameWindow iframe {\n    overflow: scroll !important;\n}\n\n";
k.HtmlUI='<div class="SPControlUploadUI spcontrolupload">\n    <div class="mainContainer">\n        <div class="buttonPane ui-state-default">\n            <div class="upload_button">\n                Upload\n            </div>\n        </div>\n        <div class="iFrameWindow ui-state-default">\n            <iframe name="SPControlUploadUI" frameborder="0" scrollbars="yes" scrolling="yes"></iframe>\n        </div>\n        <div class="loadingOverlay ui-widget-content">\n            <div class="loadingOverlayMsg"></div>\n        </div>\n        <div class="spwidget-success-cntr ui-widget-content">\n            <div class="spwidget-msg-cntr">\n                <span class="spwidget-msg">Upload Successful!</span> \n                <span class="spwidget-close">x</span> \n            </div>\n        </div>\n        <div class="spwidget-error-cntr ui-state-error">\n            <div class="spwidget-msg-cntr">\n                <span class="spwidget-msg">Error</span> \n                <span class="spwidget-close">x</span> \n            </div>\n        </div>\n    </div>\n</div>\n\n<div id="SPControlUploadModUI" \n    style="\n        position:   absolute;\n        width:      99.9%;\n        height:     99.9%;\n        left:       0px;\n        top:        0px;\n        padding-left:       .5em;\n        background-color:   white;">\n    <div class="SPControlUploadModUIFileSelected"\n        style="\n        background-position: left center;\n        background-repeat: no-repeat;\n        background-image: url(\'/_layouts/images/urn-content-classes-smartfolder16.gif\');\n        padding: 0.5em 2em;">Select...</div>\n</div>\n'})(s);
(function(c){var k={isInitDone:!1,evNamespace:".spwidgets.spdatefield"};c.SPWidgets.defaults.date={allowMultiples:!1,delimeter:";",remainOpen:!0,datepicker:{dateFormat:"mm/dd/yy",buttonImage:"/_layouts/images/CALENDAR.GIF",showOn:"both",buttonImageOnly:!0},dateTemplate:'{{date}} <span class="spwidgets-item-remove">[x]</span>',showTimepicker:!1,timeFormat:" {{hour}}:{{minutes}} {{ampm}}",timeUTC:!0,labelHour:"Hour",labelMinutes:"Minutes",labelAMPM:"AM|PM",labelTime:"Time",labelSet:"Set",onSelect:null};
c.fn.SPDateField=function(e){var d=arguments,b=this;k.isInitDone||(k.isInitDone=!0,""!==k.styleSheet&&c('<style type="text/css">\n\n'+k.styleSheet+"\n\n</style>").prependTo("head"),c("body").on("click"+k.evNamespace,k.onPageClick));return"string"===typeof e?function(){var a=String(d[0]).toLowerCase(),g=b;c(b).each(function(f,e){if(c(b).hasClass("hasSPDateField")){var k=c(e),h=k.data("SPDateFieldInstance");if(h&&0<k.length)switch(a){case "getdate":g=h.getDate();break;case "setdate":d[1]&&h.setDate({date:d[1],
format:d[2]||h.opt.datepicker.dateFormat});break;case "removedate":d[1]&&h.removeDate({date:d[1],format:d[2]||h.opt.datepicker.dateFormat});break;case "reset":h.reset();break;case "destroy":h.destroy()}}});return g}():this.each(function(){var a={$ele:c(this).addClass("hasSPDateField"),isInline:!1,inlineCntr:null};if(!a.$ele.is("input[type='text']")){if(a.$ele.is(":input"))return;a.isInline=!0;a.inlineCntr=c(this);a.$ele=c('<input name="spdatefieldinline" value="" type="text" style="display:none" />')}a.opt=
c.extend(!0,{},c.SPWidgets.defaults.date,e);a.$ui=c(k.htmlTemplate).filter("div.spwidget-date-cntr").clone();a.isInline?(a.$ui.appendTo(a.inlineCntr).addClass("spwidget-inline").css("display","none"),a.$ele.appendTo(a.$ui)):a.$ui.insertAfter(a.$ele).css("display","none");a.eleOrigVal=a.$ele.val();a.$ele.val("");a.$input=a.$ui.find("input[name='SPDateFieldInput']").val(a.$ele.val());a.$inputCntr=a.$input.closest(".spwidget-date-input-cntr");a.$dtCntr=a.$ui.find("div.spwidget-date-selected-cntr");a.getDate=
function(){var c={input:a.$ele.val(),dates:[]};c.input&&(a.opt.allowMultiples?c.dates=c.input.split(a.opt.delimeter):c.dates.push(c.input));return c};a.reset=function(){a.$input.val("").datepicker("hide");a.$ele.val("").change();a.$dtCntr.empty();return a};a.setDate=function(b){var d=c.extend({},{date:"",time:"",format:a.opt.datepicker.dateFormat,setDatepicker:!0,triggerEvent:!0},b),e=a.$ele.val(),k="",h;if(!d.date)return a;c.isArray(d.date)||(d.date=[d.date]);c.each(d.date,function(b,g){var r=g,
u="",v="";if(!(r instanceof Date))if(r=String(r),-1<r.indexOf("T"))r=c.SPWidgets.parseDateString(r);else try{r=c.datepicker.parseDate(d.format,g)}catch(w){return a}h=r;u=c.datepicker.formatDate("yy-mm-dd",r);v=c.datepicker.formatDate(a.opt.datepicker.dateFormat,r);a.opt.showTimepicker&&(u=c.SPWidgets.SPGetDateString(r,a.opt._timeFmt),v+=a.$timepicker.formatTime(r));a.opt.allowMultiples?0>e.indexOf(u)&&(e&&(e+=a.opt.delimeter),e+=u,k+='<span class="spwidgets-item" data-spwidget_dt1="'+u+'" data-spwidget_dt2="'+
v+'">'+c.SPWidgets.fillTemplate({tmplt:a.opt.dateTemplate,data:{date:v}})+" </span>"):(e=u,k=v)});a.opt.allowMultiples?a.$dtCntr.append(k):d.setDatepicker&&(a.$input.val(k),a.isInline&&!a.opt.showTimepicker?a.$inputCntr.datepicker("setDate",h):a.isInline&&a.$timepicker.updateDateTimeWidgets(h));a.$ele.val(e);d.triggerEvent&&(a.isInline||a.$ele.change(),c.isFunction(a.opt.onSelect)&&a.opt.onSelect.call(a.isInline?a.inlineCntr:a.$ele));return a};a.removeDate=function(b){var d=c.extend({},{date:"",format:a.opt.datepicker.dateFormat},
b),e=a.getDate();if(!d.date)return a;c.isArray(d.date)||(d.date=[d.date]);c.each(d.date,function(b,g){var k=g,h="",r="";if(!(k instanceof Date))try{k=c.datepicker.parseDate(d.format,g)}catch(u){return a}h=a.opt.showTimepicker?c.SPWidgets.SPGetDateString(k,a.opt._timeFmt):c.datepicker.formatDate("yy-mm-dd",k);r=RegExp("("+a.opt.delimeter+")?"+h,"g");e.input=e.input.replace(r,"");a.opt.allowMultiples&&a.$dtCntr.find("span[data-spwidget_dt1='"+h+"']").remove()});e.input=e.input.replace(RegExp("^"+a.opt.delimeter),
"").replace(RegExp(a.opt.delimeter+"$"),"");a.$ele.val(e.input).change();return a};a.destroy=function(){a.$ele.removeData("SPDateFieldInstance");a.$ele.removeClass("hasSPDateField").css("display","");a.$ui.css("display","none");a.$input.datepicker("hide");a.$input.datepicker("destroy");a.$timepicker&&(a.$timepicker.$timePicker.off(".spdatefield"),a.$input.off(".spdatefield"));a.isInline&&a.inlineCntr.removeClass("hasSPDateField").removeData("SPDateFieldInstance");a.$ui.remove()};a.createDatePicker=
function(){var b={};if(a.opt.showTimepicker){b.$selectorCntr=c(k.htmlTemplate).filter("div.spwidget-datetime-selector").clone().appendTo(a.$inputCntr).css("display","none");b.$datePicker=b.$selectorCntr.find("div.spwidget-date-selector");b.$timePicker=b.$selectorCntr.find("div.spwidget-time-selector");b.$setButton=b.$selectorCntr.find("div.spwidget-btn-set");b.$hourSelect=b.$timePicker.find("select.spwidget-hour");b.$minSelect=b.$timePicker.find("select.spwidget-min");b.$ampmSelect=b.$timePicker.find("select.spwidget-ampm");
b.heightDone=!1;b.firstShowDone=!1;b.getTime=function(){var a={hour:b.$hourSelect.val(),minutes:b.$minSelect.val(),ampm:b.$ampmSelect.val()};a.hour24=a.hour;"PM"===a.ampm&&"12"!==a.hour?a.hour24=String(parseInt(a.hour)+12):"AM"===a.ampm&&"12"===a.hour&&(a.hour24="0");return a};b.formatTime=function(d){var e=d,k="";d instanceof Date?(e={hour:d.getHours(),hour24:String(d.getHours()),minutes:String(d.getMinutes()),ampm:"AM"},12<e.hour?(e.hour=String(e.hour-12),e.ampm="PM"):12===e.hour&&(e.ampm="PM"),
e.hour=String(e.hour),"0"===e.hour&&(e.hour="12"),2>String(e.minutes).length&&(e.minutes="0"+e.minutes)):d||(e=b.getTime());return k=c.SPWidgets.fillTemplate(a.opt.timeFormat,e)};b.setDateTime=function(c){var d=b.getTime();c instanceof Date||(c=b.$datePicker.datepicker("getDate"),null===c&&(c=new Date));c.setHours(d.hour24);c.setMinutes(d.minutes);a.setDate({date:c,format:a.opt.datepicker.dateFormat,setDatepicker:!0});b.execUsersCallback(a.$input.val())};b.updateDateTimeWidgets=function(a){var c;
a instanceof Date||(a=new Date);c=a.getHours();0===c?c="12":12<c&&(c-=12);b.$hourSelect.val(c);for(c=a.getMinutes();c%5;)--c;10>c&&(c="0"+c);b.$minSelect.val(c);11<a.getHours()?b.$ampmSelect.val("PM"):b.$ampmSelect.val("AM");b.$datePicker.datepicker("setDate",a)};b.showPicker=function(){b.$selectorCntr.show(function(){var d;b.heightDone||(b.heightDone=!0,c.SPWidgets.makeSameHeight(b.$datePicker.find("div.ui-datepicker-inline").add(b.$timePicker)));b.firstShowDone||(b.firstShowDone=!0,d=a.getDate(),
d=d.dates.length?c.SPWidgets.parseDateString(d.dates[d.dates.length-1]):new Date,b.updateDateTimeWidgets(d))}).position({my:"left top",at:"left bottom",of:a.$input})};b.execUsersCallback=function(d,e){c.isFunction(a.opt.datepicker._onSelect)&&a.opt.datepicker._onSelect.call(b.$datePicker,d,e)};a.opt.datepicker.altFormat="";a.opt.datepicker.altField="";if(a.opt.datepicker.buttonImage&&!a.isInline)c('<img class="ui-datepicker-trigger" src="'+a.opt.datepicker.buttonImage+'" alt="..." title="...">').appendTo(a.$inputCntr).on("click"+
k.evNamespace,function(){b.showPicker()});if(a.opt.allowMultiples||a.isInline)b.$selectorCntr.addClass("spwidget-date-multiples-cntr"),b.$setButton.find("div.spwidget-btn").button({label:a.opt.labelSet}).on("click"+k.evNamespace,function(a){b.setDateTime();return this});b.$timePicker.find("div.ui-widget-header").html(a.opt.labelTime).end().find("div.spwidget-time-hour > label").html(a.opt.labelHour).end().find("div.spwidget-time-min > label").html(a.opt.labelMinutes).end().find("div.spwidget-time-ampm > label").html(a.opt.labelAMPM).end();
c.isFunction(a.opt.datepicker.onSelect)&&(a.opt.datepicker._onSelect=a.opt.datepicker.onSelect);a.opt.datepicker.numberOfMonths=1;a.opt.datepicker.onSelect=function(c,d){if(a.opt.allowMultiples||a.isInline)return this;b.setDateTime(new Date(d.currentYear,d.currentMonth,d.currentDay))};b.$datePicker.datepicker(a.opt.datepicker);b.$timePicker.on("change"+k.evNamespace+" keyup"+k.evNamespace,"select",function(c){c.stopPropagation();c.preventDefault();if(a.opt.allowMultiples||a.isInline)return this;b.setDateTime();
return this});a.isInline&&(a.$input.css("display","none"),b.$selectorCntr.addClass("spwidget-inline").css("display",""));if(!a.isInline)a.$input.on("focus"+k.evNamespace,function(){b.showPicker()})}else a.opt.allowMultiples&&a.opt.remainOpen&&(a.opt.datepicker.showAnim=""),c.isFunction(a.opt.datepicker.onSelect)&&(a.opt.datepicker._onSelect=a.opt.datepicker.onSelect),a.opt.datepicker.onSelect=function(b,d){a.setDate({date:b,format:d.settings.dateFormat,setDatepicker:!1});c.isFunction(a.opt.datepicker._onSelect)&&
a.opt.datepicker._onSelect.call(this,b,d);a.opt.allowMultiples&&a.$input.val("");a.opt.allowMultiples&&(a.opt.remainOpen&&!a.isInline)&&setTimeout(function(){a.$input.datepicker("show")},5)},a.isInline?(a.$inputCntr.datepicker(a.opt.datepicker),a.$input.css("display","none")):a.$input.datepicker(a.opt.datepicker);return b};a.opt._timeFmt=a.opt.timeUTC?"utc":"local";a.opt.datepicker.altFormat="yy-mm-dd";a.opt.datepicker.altField=a.$ele;a.opt.allowMultiples&&(a.opt.datepicker.altFormat="",a.opt.datepicker.altField=
"",a.$dtCntr.css("display","").on("click",".spwidgets-item-remove",function(b){b=c(b.target).closest(".spwidgets-item").data("spwidget_dt1");a.opt.allowMultiples&&(b=c.SPWidgets.parseDateString(b));a.removeDate({date:b,format:"yy-mm-dd"})}));a.$ele.css("display","none").data("SPDateFieldInstance",a);a.isInline&&a.inlineCntr.data("SPDateFieldInstance",a);a.$timepicker=a.createDatePicker();a.eleOrigVal&&a.setDate({date:a.eleOrigVal.split(a.opt.delimeter),format:"yy-mm-dd",triggerEvent:!1});a.$input.on("change",
function(b){b.stopPropagation();a.$ele.change()});a.$ui.css("display","")})};k.onPageClick=function(e){e=c(e.target);var d=c("div.spwidget-datetime-selector:visible:not('.spwidget-inline')"),b=null;if(!c.contains(document.documentElement,e[0]))return this;d.length&&(b=e.closest("div.spwidget-datetime-selector"),!b.length&&e.is("input.spwidget-date-datepicker,.ui-datepicker-trigger")&&(b=e.parent().find("div.spwidget-datetime-selector")),d.not(b).hide());return this};k.styleSheet='.spwidget-date-cntr {\n    display: inline-block;   \n    position: relative;\n}\n.spwidget-date-cntr div.spwidget-date-input-cntr {\n    position: relative;\n}\n.spwidget-date-cntr input {\n    width: 99%;\n}\n.spwidget-date-cntr img.ui-datepicker-trigger {\n    display: block;\n    position: absolute;\n    right: 2%;\n    top: .3em;\n}\n\n.spwidget-date-cntr .spwidgets-item-remove {\n    color: red;\n    font-size: xx-small;\n    vertical-align: super;\n    cursor: pointer;\n}\n/** --------------------------- Date and Time picker -- */\n.spwidget-date-cntr div.spwidget-datetime-selector {\n    padding: .5em;\n    position: absolute;\n    width: 28em;\n    z-index: 1;\n}\n.spwidget-date-cntr div.spwidget-datetime-selector div.ui-datepicker-inline {\n    width: 14em;\n}\n\n.spwidget-date-cntr div.spwidget-datetime-selector div.spwidget-date-selector,\n.spwidget-date-cntr div.spwidget-datetime-selector div.spwidget-time-selector {\n    float: left;\n}\n.spwidget-date-cntr div.spwidget-selectors:before,\n.spwidget-date-cntr div.spwidget-selectors:after {\n    content: "";\n    display: table;\n    line-height: 0;\n}\n.spwidget-date-cntr div.spwidget-selectors:after {\n    clear: both;    \n}\n.spwidget-date-cntr div.spwidget-datetime-selector select.spwidget-hour,\n.spwidget-date-cntr div.spwidget-datetime-selector select.spwidget-min,\n.spwidget-date-cntr div.spwidget-datetime-selector select.spwidget-ampm {\n    font-size: 1.2em;\n}\n/* Time selector */\n.spwidget-date-cntr div.spwidget-time-selector {\n    margin-left: .2em;\n    width: 11em;\n}\n.spwidget-date-cntr div.spwidget-time-selector-cntr {\n    padding: .2em;\n}\n.spwidget-date-cntr div.spwidget-time-selector div.ui-widget-header {\n    text-align: center;\n    line-height: 2em;\n    margin-bottom: .5em;\n}\n.spwidget-date-cntr .spwidget-time-hour,\n.spwidget-date-cntr .spwidget-time-min,\n.spwidget-date-cntr .spwidget-time-ampm {\n    margin-top: .2em;\n    padding: .2em;\n}\n.spwidget-date-cntr .spwidget-time-selector-cntr select,\n.spwidget-date-cntr .spwidget-time-selector-cntr label {\n    overflow: hidden;\n    display: inline-block;\n    font-weight: bold;\n}\n.spwidget-date-cntr .spwidget-time-selector-cntr select {\n    width: 4em;\n}\n.spwidget-date-cntr .spwidget-time-selector-cntr label {\n    width: 5em;\n    font-size: .9em;\n}\n\n/* inline mode */\n.spwidget-date-cntr .spwidget-inline div.spwidget-datetime-selector {\n    position: relative;\n    width: 26em;\n}\n\n.spwidget-btn-set {\n    display: none;\n    position: absolute;\n    right: .2em;\n    bottom: .2em;\n}\n.spwidget-date-multiples-cntr .spwidget-btn-set {\n    display: block;\n}\n';
k.htmlTemplate='<div class="spwidget-date-cntr">\n    <div class="spwidget-date-selected-cntr" style="display:none;"></div>\n    <div class="spwidget-date-input-cntr">\n        <input class="spwidget-date-datepicker" name="SPDateFieldInput" value="" />\n    </div>\n</div>\n<div class="spwidget-datetime-selector ui-widget-content ui-corner-all">\n    <div class="spwidget-selectors">\n        <div class="spwidget-date-selector"></div>\n        <div class="spwidget-time-selector ui-widget-content ui-corner-all">\n            <div class="spwidget-time-selector-cntr">\n                <div class="ui-widget-header ui-helper-clearfix ui-corner-all">\n                    Time\n                </div>\n                <div class="spwidget-time-hour">\n                    <label>Hour</label>\n                    <select name="spwidget_hour" class="spwidget-hour">\n                        <option value="1"> 1</option>\n                        <option value="2"> 2</option>\n                        <option value="3"> 3</option>\n                        <option value="4"> 4</option>\n                        <option value="5"> 5</option>\n                        <option value="6"> 6</option>\n                        <option value="7"> 7</option>\n                        <option value="8"> 8</option>\n                        <option value="9"> 9</option>\n                        <option value="10">10</option>\n                        <option value="11">11</option>\n                        <option value="12">12</option>\n                    </select>\n                </div>\n                <div class="spwidget-time-min">   \n                    <label>Minutes</label>\n                    <select name="spwidget_min" class="spwidget-min">\n                        <option value="00">00</option>\n                        <option value="05">05</option>\n                        <option value="10">10</option>\n                        <option value="15">15</option>\n                        <option value="20">20</option>\n                        <option value="25">25</option>\n                        <option value="30">30</option>\n                        <option value="35">35</option>\n                        <option value="40">40</option>\n                        <option value="45">45</option>\n                        <option value="50">50</option>\n                        <option value="55">55</option>\n                    </select>\n                </div>\n                <div class="spwidget-time-ampm">\n                    <label>AM|PM</label>\n                    <select name="spwidget_ampm" class="spwidget-ampm">\n                        <option value="AM">AM</option>\n                        <option value="PM">PM</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="spwidget-btn-set">\n        <div class="spwidget-btn">\n            Set\n        </div>\n    </div>\n</div>\n'})(s);
(function(c){var k={isInitDone:!1,templates:null};c.SPWidgets.defaults.filter={list:"",webURL:c().SPServices.SPGetCurrentSite(),columns:["Title"],textFieldTooltip:"Use a semicolon to delimiter multiple keywords.",definedClass:"spwidget-column-dirty",showFilterButton:!0,showFilterButtonTop:!0,filterButtonLabel:"Filter",onFilterClick:null,onReady:null,onReset:null,ignoreKeywords:/^(of|and|a|an|to|by|the|or|from)$/i,delimeter:";"};c.fn.SPFilterPanel=function(e){var d=arguments;k.isInitDone||(k.isInitDone=
!0,""!==k.styleSheet&&c('<style type="text/css">\n\n'+k.styleSheet+"\n\n</style>").prependTo("head"),k.templates=c(k.htmlTemplate));return"string"===typeof e?this.eq(0).hasClass("hasSPFilterPanel")?function(b){b=b.eq(0).find("div.spwidget-filter").data("SPFilterPanelInst");var a=e.toLowerCase(),c=b.$ele;switch(a){case "getfilter":c=k.getFilterValues(b);break;case "setfilter":k.setFilterValues(b,d[1]);break;case "reset":k.doResetFilter(b);break;case "destroy":b.$ele.removeClass("hasSPFilterPanel").empty()}return c}(this):
void 0:this.each(function(){var b=c.extend({},c.SPWidgets.defaults.filter,e),a={$ele:c(this),$ui:null,opt:b,getListDefinition:function(){return c.Deferred(function(a){c().SPServices({operation:"GetList",listName:b.list,cacheXML:!0,async:!0,webURL:b.webURL,completefunc:function(b,d){var e=c(b.responseXML);"error"===d?a.rejectWith(e,[b,d]):e.SPMsgHasError()?a.rejectWith(e,[b,d]):a.resolveWith(e,[b,d])}})}).promise()},buildWidget:function(){return c.Deferred(function(b){a.getListDefinition().then(function(d,
h){var n=this,q="",l=k.templates.filter("#filter_column").html();a.$ui=c(k.templates.filter("#filter_main_ui").html()).appendTo(a.$ele.empty().addClass("hasSPFilterPanel"));a.$list=n;c.each(a.opt.columns,function(b,d){var e=n.find("Field[DisplayName='"+d+"']"),f=l,g="",h=null;e.length||(e=n.find("Field[Name='"+d+"']"));if(e.length){h={type:null,otherFilterTypes:"",sp_type:e.attr("Type"),sp_format:e.attr("Format")};h.Name=e.attr("Name");switch(e.attr("Type")){case "Choice":case "MultiChoice":e.find("CHOICES CHOICE").each(function(a,
b){g+=c.SPWidgets.fillTemplate(k.templates.filter("#filter_choice_field").html(),{DisplayName:e.attr("DisplayName"),Name:e.attr("Name"),value:c(b).text()})});f=f.replace(/__COLUMN__UI__/,g);f=c.SPWidgets.fillTemplate(f,{DisplayName:e.attr("DisplayName"),type:"choice",Name:e.attr("Name")});break;case "Lookup":case "LookupMulti":null===h.type&&(h.type="lookup",h.list=e.attr("List"),"Self"===h.list&&(h.list=n.find("List").attr("Title")));case "User":case "UserMulti":null===h.type&&(h.type="people");
case "Counter":null===h.type&&(h.type="text",h.otherFilterTypes='<option value="Gt">Greater Than</option><option value="Lt">Less Than</option>');case "DateTime":null===h.type&&(h.type="date",h.otherFilterTypes='<option value="Gt">After</option><option value="Lt">Before</option>',h.sp_format="DateOnly"!==e.attr("Format")?"DateTime":"DateOnly");default:null===h.type&&(h.type="text"),g=k.templates.filter("#filter_text_field").html(),f=f.replace(/__COLUMN__UI__/,g).replace(/__OTHER_FILTER_TYPES__/,h.otherFilterTypes),
f=c.SPWidgets.fillTemplate(f,c.extend(h,{DisplayName:e.attr("DisplayName"),Name:e.attr("Name"),tooltip:a.opt.textFieldTooltip}))}q+=f}});a.$ele.find("div.spwidget-filter-column-cntr").html(q);a.$ele.find("div.spwidget-type-lookup input").each(function(){var a=c(this);a.SPLookupField({list:a.closest("div.spwidget-column").data("spwidget_list"),template:'<div>{{Title}} <span class="spwidgets-item-remove">[x]</span></div>',listTemplate:"{{Title}}",allowMultiples:!0,readOnly:!1,filter:"",showSelector:!0});
a.parent().find(".spwidget-tooltip").remove()});a.$ele.find("div.spwidget-type-people input").each(function(){var a=c(this),b="User";"PeopleOnly"!==n.find("Field[Name='"+a.attr("name")+"']").attr("UserSelectionMode")&&(b="All");a.pickSPUser({allowMultiple:!0,type:b});a.parent().find(".spwidget-tooltip").remove()});a.$ele.find("div.spwidget-type-date").each(function(){var a=c(this);a.find("input").SPDateField({allowMultiples:!0,showTimepicker:"DateTime"===a.data("spwidget_sp_format")?!0:!1});a.find(".spwidget-tooltip").remove();
a.find("select.spwidget-filter-type").val("Eq").find("option[value='Contains']").remove();return this});a.opt.showFilterButton||a.opt.showFilterButtonTop?a.$ui.find("div.spwidget-filter-button-cntr").each(function(){var b=c(this),d=c();a.opt.showFilterButtonTop&&(d=d.add(b.clone(!0)).prependTo(a.$ui));a.opt.showFilterButton?d=d.add(b):b.remove();d.find("button[name='filter']").button({icons:{primary:"ui-icon-search"},label:a.opt.filterButtonLabel}).on("click",k.onFilterButtonClick);d.find("button[name='reset']").button({icons:{primary:"ui-icon-arrowreturnthick-1-n"},
text:!1}).on("click",function(b){k.doResetFilter(a);return this})}):a.$ui.find("div.spwidget-filter-button-cntr").remove();a.$ui.on("change.SPWigets.SPFilterPanel","select.spwidget-filter-type",k.onFilterTypeChange);if(""!==a.opt.definedClass)a.$ui.on("change.SPWidgets.SPFilterPanel",".spwidget-filter-input",k.onFilterInputChange);a.$ui.data("SPFilterPanelInst",a);c.isFunction(a.opt.onReady)&&a.opt.onReady.call(a.$ele,e);a.$ui.fadeIn().promise().then(function(){c(this).css("display","");b.resolve()})}).fail(function(c,
d){a.$ele.html('<div class="ui-state-error">Unable to retrieve list information. '+this.SPGetMsgError()+"</div>");b.reject()})}).promise()}};a.opt.ignoreKeywords&&!a.opt.ignoreKeywords instanceof RegExp&&(a.opt.ignoreKeywords=/Inst.opt.ignoreKeywords/i);a.buildWidget();return this})};k.onFilterInputChange=function(e){var d=c(this);e=d.closest("div.spwidget-filter-value-input");var b=e.closest("div.spwidget-column"),a=b.find("div.spwidget-filter-type-cntr select.spwidget-filter-type").val(),d=d.val(),
g=e.closest("div.spwidget-filter").data("SPFilterPanelInst");b.is(".spwidget-type-choice")&&(e.find(".spwidget-filter-input:checked").length||(d=""));""!==d?b.addClass(g.opt.definedClass):"IsNull"!==a&&"IsNotNull"!==a&&b.removeClass(g.opt.definedClass);return this};k.onFilterTypeChange=function(e){var d=c(this);e=d.closest("div.spwidget-column");var b=e.find("div.spwidget-filter-type-cntr select.spwidget-match-type"),a=e.find("div.spwidget-filter-value-cntr"),g=a.find(".spwidget-input"),f="",h=e.data("spwidget_column_type"),
k=d.val(),d=d.closest("div.spwidget-filter").data("SPFilterPanelInst");"IsNull"===k||"IsNotNull"===k?(a.addClass("spwidget-disabled"),g.attr("disabled","disabled"),b.attr("disabled","disabled"),e.addClass(d.opt.definedClass)):(a.removeClass("spwidget-disabled"),g.removeAttr("disabled","disabled"),b.removeAttr("disabled"),"choice"===h||"multichoice"===h?g.filter(":checkbox").each(function(){var a=c(this);if(a.is(":checked"))return f+=a.val(),!1}):f+=g.val(),f||e.removeClass(d.opt.definedClass));return this};
k.onFilterButtonClick=function(e){e=c(this).closest("div.spwidget-filter").data("SPFilterPanelInst");var d=null;c.isFunction(e.opt.onFilterClick)&&(d=k.getFilterValues(e),e.opt.onFilterClick.call(e.$ele,d));return this};k.doResetFilter=function(e){if(c.isFunction(e.onReset)&&!0===e.onReset.call(e.$ele,k.getFilterValues(e)))return e;e.$ui.find("div[data-spwidget_column_type='text'] input").val("").end().find("div[data-spwidget_column_type='choice'] input").prop("checked",!1).end().find(".hasPickSPUser").pickSPUser("method",
"clear").end().find(".hasSPDateField").SPDateField("reset").end().find(".hasLookupSPField").SPLookupField("method","clear");""!==e.opt.definedClass&&e.$ui.find("."+e.opt.definedClass).removeClass(e.opt.definedClass);e.$ui.find("select.spwidget-filter-type").each(function(){var d=c(this),b=d.val();if("IsNull"===b||"IsNotNull"===b)d.val("Eq"),d.change()});return e};k.getFilterValues=function(e){function d(a){return c.SPWidgets.getCamlLogical({type:a.logicalType,values:a.values,onEachValue:function(b){return"<"+
a.matchType+"><FieldRef Name='"+a.columnName+"' /><Value Type='Text'>"+c.SPWidgets.escapeXML(b)+"</Value></"+a.matchType+">"}})}var b={CAMLQuery:"",URLParams:"",filters:{},count:0},a=[];e.$ui.find("div.spwidget-column").each(function(g,f){var h=c(f),n=h.find(".spwidget-input"),q=n.attr("name"),l=new k.ColumnFilter({columnName:q,matchType:h.find("select.spwidget-filter-type").val(),logicalType:h.find("select.spwidget-match-type").val()}),h=h.data("spwidget_column_type"),s={};if("IsNull"===l.matchType||
"IsNotNull"===l.matchType)l.CAMLQuery="<"+l.matchType+"><FieldRef Name='"+q+"' /></"+l.matchType+">",l.count+=1;else switch(h){case "choice":case "multichoice":n.each(function(){var a=c(this),b=a.val();a.is(":checked")&&l.values.push(b)});l.values.length&&(l.count=l.values.length,l.CAMLQuery=d(l));break;case "lookup":case "people":(function(){var a=[];n.each(function(){var b=c(this),b=c.SPWidgets.parseLookupFieldValue(b.val()),d,e;d=0;for(e=b.length;d<e;d++)b[d].id&&(l.values.push(b[d].id+";#"+b[d].title),
a.push(b[d].id))});l.values.length&&(l.count=l.values.length,l.CAMLQuery=c.SPWidgets.getCamlLogical({type:l.logicalType,values:a,onEachValue:function(a){return"<"+l.matchType+"><FieldRef Name='"+l.columnName+"' LookupId='True'/><Value Type='Lookup'>"+a+"</Value></"+l.matchType+">"}}))})();break;case "date":n.each(function(){var a=n.SPDateField("getDate");a.dates.length&&(l.values=a.dates,l.count=l.values.length,l.CAMLQuery=c.SPWidgets.getCamlLogical({type:l.logicalType,values:l.values,onEachValue:function(a){return"<"+
l.matchType+"><FieldRef Name='"+l.columnName+"'/><Value Type='DateTime'>"+a+"</Value></"+l.matchType+">"}}));return!1});break;case "text":String(c.trim(n.val())).length&&function(){var a=n.val().split(e.opt.delimeter),b,f,g;b=0;for(f=a.length;b<f;b++)g=c.trim(a[b]),!e.opt.ignoreKeywords.test(g)&&g&&l.values.push(g);l.CAMLQuery=d(l);l.count=l.values.length}()}0<l.count&&(a.push(l.CAMLQuery),b.count+=l.count,b.filters[q]=l,s[q]={matchType:l.matchType,logicalType:l.logicalType,values:l.values},l.URLParams=
c.param(s,!1),""!==b.URLParams&&(b.URLParams+="&"),b.URLParams+=l.URLParams)});1<b.count?b.CAMLQuery=c.SPWidgets.getCamlLogical({type:"AND",values:a}):1===b.count&&(b.CAMLQuery=a[0]);return b};k.setFilterValues=function(e,d){if("object"!==typeof d||c.isEmptyObject(d))return e;k.doResetFilter(e);c.each(d,function(b,a){var d=e.$ui.find(".spwidget-filter-input[name='"+b+"']"),f=d.closest("div.spwidget-column"),h=f.data("spwidget_column_type"),n=f.find("select[name='"+b+"_type']"),q=f.find("div.spwidget-filter-type-cntr select.spwidget-match-type"),
l=new k.ColumnFilter;c.extend(l,a);l.matchType&&n.val(l.matchType);l.logicalType&&q.val(l.logicalType);if("IsNull"!==a.matchType&&"IsNotNull"!==a.matchType)switch(h){case "text":l.values instanceof Array?d.val(l.values.join(e.opt.delimeter)):d.val(l.values);break;case "choice":case "multichoice":c.each(l.values,function(a,b){d.filter("[value='"+b+"']").prop("checked",!0)});break;case "lookup":d.SPLookupField("method","add",l.values.join(";#"));break;case "people":d.pickSPUser("method","add",l.values.join(";#"));
break;case "date":"DateTime"===f.data("spwidget_sp_format")?d.SPDateField("setDate",l.values):d.SPDateField("setDate",l.values,"yy-mm-dd")}else n.change();d.change()});return e};k.ColumnFilter=function(c){var d=new function(){};"object"!==typeof c&&(c={});d.columnName=c.columnName||"";d.matchType=c.matchType||"";d.logicalType=c.logicalType||"";d.values=c.values||[];d.CAMLQuery=c.CAMLQuery||"";d.URLParams=c.URLParams||"";d.count=c.count||0;return d};k.styleSheet='/** \n * Stylesheet for the Board widget\n * \n * BUILD: September 07, 2013 - 03:52 PM\n */\ndiv.spwidget-filter {\n    width: 100%;\n    position: relative;\n}\ndiv.spwidget-filter .spwidget-date-cntr,\ndiv.spwidget-filter .spwidgets-lookup-cntr {\n    display: block;\n}\n/* Adjust the width of the widget inputs inside the filter panel */\ndiv.spwidget-filter .spwidget-type-text input.spwidget-filter-input,\ndiv.spwidget-filter .spwidget-type-people input.ui-autocomplete-input,\ndiv.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input {\n    width: 95%;\n}\n\ndiv.spwidget-filter .spwidgets-lookup-cntr {\n    width: 96%;\n}\ndiv.spwidget-filter .spwidget-date-cntr div.spwidget-date-input-cntr {\n    width: 97%\n}\n\ndiv.spwidget-filter div.spwidget-column {\n    padding: .5em;\n    margin: .5em;\n    position: relative;\n    border-bottom: 1px solid  darkgray;\n    box-shadow: 1px 1px 1px 0 lightgray inset;\n}\ndiv.spwidget-filter div.spwidget-filter-type-cntr {\n    right: 4%;\n    position: absolute;\n    font-size: .8em;\n    top: .6em;\n    opacity: .6;\n    filter: Alpha(opacity=60);\n}\ndiv.spwidget-filter div.spwidget-filter-type-cntr:hover {\n    opacity: 1;\n}\ndiv.spwidget-filter div.spwidget-filter-value-cntr {\n    width: 100%;\n}\n\ndiv.spwidget-filter div.spwidget-filter-value-cntr > label {\n    display: block;\n    padding: .2em;\n    font-weight: bold;\n}\ndiv.spwidget-filter div.spwidget-column-dirty div.spwidget-filter-value-cntr > label {\n    color: #FF0000;\n}\ndiv.spwidget-filter .spwidget-tooltip {\n    display: block;\n    font-size: .8em;\n    font-style: italic;\n}\n\n/* LOOKUP FIELDS */\ndiv.spwidget-filter div.spwidgets-lookup-cntr div.spwidgets-lookup-selected > div.spwidgets-item {\n    display: block;\n    margin-left: 0px;\n}\n\n/* CHOICE FIELDS */\ndiv.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input {\n    max-height: 6em;\n    overflow: auto;\n    -moz-appearance: textfield;\n    -webkit-appearance: textfield;\n    background-color: white;\n    background-color: -moz-field;\n    border: 1px solid  darkgray;\n    box-shadow: 1px 1px 1px 0 lightgray inset;\n    font: -moz-field;\n    font: -webkit-small-control;\n    padding: 2px 5px;\n}\ndiv.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input label {\n    display: block;\n    padding: .2em;\n}\n\n/** DISABLED COLUMN VALUE CONTAINER */\ndiv.spwidget-filter .spwidget-disabled {\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n    filter: alpha(opacity=50);\n    opacity: 0.5;\n}\n\n/** Button container */\ndiv.spwidget-filter div.spwidget-filter-button-cntr {\n    padding: .5em 4%;\n    margin-top: .5em;\n    text-align: right;\n}\n\n';
k.htmlTemplate='<div id="filter_main_ui">\n    <div class="spwidget-filter" style="display: none;">\n        <div class="spwidget-filter-column-cntr"></div>\n        <div class="spwidget-filter-button-cntr">\n            <button type="button" class="spwidget-button" name=\'reset\'>Reset</button>\n            <button type="button" class="spwidget-button" name=\'filter\'>Filter</button>\n        </div>\n    </div>\n</div>\n<div id="filter_column">\n    <div class="spwidget-column spwidget-type-{{type}}" \n            data-spwidget_column_type="{{type}}" \n            data-spwidget_list="{{list}}" \n            data-spwidget_sp_type="{{sp_type}}" \n            data-spwidget_sp_format="{{sp_format}}" >\n        <div class="spwidget-filter-value-cntr">\n            <label>{{DisplayName}}</label>\n            <div class="spwidget-filter-value-input">\n                __COLUMN__UI__\n            </div>\n        </div>\n        <div class="spwidget-filter-type-cntr" title="Match Type">\n            <select name="{{Name}}_type" class="spwidget-filter-type" tabindex="-1">\n                <option value="Contains">Contains</option>\n                <option value="Eq" selected="selected">Equal</option>\n                <option value="Neq">Not Equal</option>\n                <option value="IsNull">Is Blank</option> \n                <option value="IsNotNull">Is Not Blank</option>\n                __OTHER_FILTER_TYPES__\n            </select>\n            <select name="{{Name}}_match" class="spwidget-match-type" tabindex="-1">\n                <option value="Or" selected="selected">Any</option>\n                <option value="And">All</option>\n            </select>\n        </div>\n    </div>\n</div>\n<div id="filter_text_field">\n    <input name="{{Name}}" title="{{DisplayName}}" type="text" value="" class="spwidget-input spwidget-filter-input" />\n    <span class="spwidget-tooltip">{{tooltip}}</span>\n</div>\n<div id="filter_choice_field">\n    <label>\n        <input name="{{Name}}" title="{{DisplayName}}" type="checkbox" value="{{value}}" class="spwidget-input spwidget-filter-input" />\n        {{value}}\n    </label>\n</div>\n'})(s)})(jQuery);
