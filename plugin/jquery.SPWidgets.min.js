(function(g){var r=g;document.head||(document.head=document.getElementsByTagName("head")[0]);(function(){try{g.pt||(g.pt={})}catch(b){g.pt={}}void 0===g.pt._cache&&(g.pt._cache={});g.SPWidgets={};g.SPWidgets.version="20140614083309";g.SPWidgets.defaults={};g.fn.SPMsgHasError=function(){var b=g(this).find("ErrorCode"),f=!1;if(!b.length)return g(this).find("faultcode").length?!0:!1;b.each(function(){if("0x00000000"!==g(this).text())return f=!0,!1});return f};g.fn.SPGetMsgError=function(){var b=
g(this),f="",c=b.find("ErrorCode"),d=0;c.length||(c=b.find("faultcode"));if(!c.length)return"";c.each(function(){var a=g(this);"0x00000000"!==a.text()&&(d+=1,f+="("+d+") "+a.text()+": "+a.parent().children().not(a).text()+"\n")});return f=d+" error(s) encountered! \n"+f};g.SPWidgets.fillTemplate=function(b,f){var c,d,a,h,k,e,p,n,m;"object"===typeof b&&1===arguments.length&&(f=b.data,b=b.tmplt);c="";d="string"!==typeof b?String(g("<div/>").append(b).html()):b;a=d.match(/(\{\{.*?\}\})/g);g.isArray(f)||
(f=[f]);if(null!==a)for(e=0,p=f.length;e<p;e++){n=d;h=0;for(k=a.length;h<k;h++)a[h]=a[h].replace(/[\{\}]/g,""),m=f[e][a[h]]||"",g.isFunction(m)&&(m=m()),n=n.replace("{{"+a[h]+"}}",m);c+=n}return c};g.SPWidgets.parseLookupFieldValue=function(b){var f=[],c=String(b).split(";#"),d=c.length,a,h;if(void 0===b)return f;for(b=0;b<d;b++)a=c[b],b++,h=c[b],(a||h)&&f.push({id:a,title:h});return f};g.SPWidgets.getCamlLogical=function(b){b=g.extend({},{type:"AND",values:[],onEachValue:null},b);var f="<And>",c=
"</And>",d="",a=0,h=0,k=!1;b.type=String(b.type).toUpperCase();g.isArray(b.values)||(b.values=[b.values]);"AND"!==b.type&&(f="<Or>",c="</Or>");d=f;a=b.values.length;h=a-1;k=g.isFunction(b.onEachValue);2>a&&(d="");for(f=0;f<a;f++)if(d=k?d+String(b.onEachValue(b.values[f])).toString():d+String(b.values[f]).toString(),1<h-f){d+=g.SPWidgets.getCamlLogical(g.extend({},b,{values:b.values.slice(f+1,a-f)}));break}1<a&&(d+=c);return d};g.SPWidgets.SPGetDateString=function(b,f){function c(a){return 10>a?"0"+
a:a}f=String(f||"local").toLowerCase();b=b||new Date;var d="";return d="utc"===f?b.getUTCFullYear()+"-"+c(b.getUTCMonth()+1)+"-"+c(b.getUTCDate())+"T"+c(b.getUTCHours())+":"+c(b.getUTCMinutes())+":"+c(b.getUTCSeconds())+"Z":b.getFullYear()+"-"+c(b.getMonth()+1)+"-"+c(b.getDate())+"T"+c(b.getHours())+":"+c(b.getMinutes())+":"+c(b.getSeconds())};g.SPWidgets.parseDateString=function(b){var f=null,c,d;if(!b)return f;if(f=Date.parse(10===b.length?b+"T00:00":b))return new Date(f);d=[1,4,5,6,7,10,11];b=
b.match(/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/);if(!b)return f;f=0;for(c=d.length;f<c;f++)b[d[f]]=~~b[d[f]];--b[2];"Z"===b[8]?(void 0!==b[9]&&(d=60*b[10]+b[11],"+"===b[9]&&(d=-d),b[5]+=d),f=new Date(Date.UTC(b[1],b[2],b[3],b[4],b[5],b[6],b[7]))):f=new Date(b[1],b[2],b[3],b[4],b[5],b[6],b[7]);return f};g.SPWidgets.makeSameHeight=function(b,f,c){var d=0,a=g(b);c||(c="height");a.each(function(){var a=g(this).css(c,
"");d<a.outerHeight(!0)&&(d=a.outerHeight(!0))});0<d&&(f&&(d+=f),a.css(c,d));return b};g.SPWidgets.escapeXML=function(b){return"string"!==typeof b?"":b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")};g.SPWidgets.unEscapeXML=function(b){return"string"!==typeof b?"":b.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"')};g.SPWidgets.getRuntimeInfo=function(){function b(){this.SPWidgets=
g.SPWidgets.version;this.jQuery=g.fn.jquery||"?";this.SPServices=this.jQueryUICss=this.jQueryUI="?";return this}b.prototype.asString=function(){var a="",b;for(b in this)this.hasOwnProperty(b)&&(a+="[ "+b+" = "+this[b]+" ] ");return a};var f=new b,c=g('<div style="position:fixed;width:100px;left:-1000px;"/>').appendTo("body"),d="";try{f.jQueryUI=r.ui.version}catch(a){}try{f.SPServices=g().SPServices.Version()}catch(h){g.fn.SPServices&&(f.SPServices="loaded")}d=c.css("background-image");c.addClass("ui-widget-header");
c.css("background-image")!==d&&(f.jQueryUICss="loaded");c.remove();return f};g.SPWidgets.getSPVersion=function(b){var f={12:"2007",14:"2010",15:"2013"},c=12;"undefined"!==typeof SP&&(c=14,SP.ClientSchemaVersions?SP.ClientSchemaVersions.currentVersion&&(c=parseInt(SP.ClientSchemaVersions.currentVersion)):(c=parseInt(_spPageContextInfo.webUIVersion),4===c&&(c=14)));b&&(c=f[c]||c);return c}})(r);(function(b){var l={initDone:!1,maxColumns:20};b.SPWidgets.defaults.board={list:"",field:"",CAMLQuery:"<Query></Query>",
CAMLViewFields:"",fieldFilter:null,optionalLabel:"(none)",template:null,webURL:b().SPServices.SPGetCurrentSite(),showColPicker:!1,colPickerLabel:"Columns",colPickerVisible:[],colPickerCloseLabel:"Close",colPickerApplyLabel:"Apply",colPickerCheckLabel:"Check-Uncheck All",colPickerTotalLabel:"Selected.",colPickerMaxColMsg:"Can not exceed 10 columns!",colPickerMinColMsg:"Mininum of 2 required!",onGetListItems:null,onPreUpdate:null,onBoardCreate:null,height:null};b.fn.SPShowBoard=function(f){l.initDone||
(l.initDone=!0,""!==l.styleSheet&&b('<style type="text/css">\n\n'+l.styleSheet+"\n\n</style>").prependTo("head"));var c=arguments,d=this;this.each(function(){var a=b(this),h="string"===typeof f,k=a.hasClass("hasSPShowBoard"),e=null,p="",g=null;if(k&&!h)return this;if(h&&k&&!a.hasClass("loadingSPShowBoard"))return p=f.toLowerCase(),g=a.data("SPShowBoardOptions"),"refresh"===p?g._getListItems().then(function(){g.showItemsOnBoard({refresh:!0})}):"redraw"===p?g.setBoardColumnHeight():"setvisible"===p?
g.setUserDefinedVisibleCol(c[1]):"setheight"===p?(g.height=c[1],g.setBoardColumnHeight()):"getcolumns"===p&&(d=g.getBoardColumnList()),this;if(a.hasClass("loadingSPShowBoard"))return this;e=b.extend({},b.SPWidgets.defaults.board,f,{ele:a,states:[],statesMap:{},tmpltHeader:"",tmpltState:"",statesCntr:"",headersCntr:"",listItems:[],initDone:!1,formUrls:null,isStateRequired:!0,maxColumnVisible:10,showNumberOfColumns:10,getBoardStates:function(){return b.Deferred(function(c){b().SPServices({operation:"GetList",
listName:e.list,cacheXML:!0,async:!1,webURL:e.webURL,completefunc:function(d,f){var h=b(d.responseXML),k=h.find("Fields Field[StaticName='"+e.field+"']");if(!k.length){k=h.find("Fields Field[DisplayName='"+e.field+"']");if(!k.length){c.rejectWith(a,["Field ("+e.field+") not found in list definition!",d,f]);return}e._origField=e.field;e.field=k.attr("StaticName")}"FALSE"===k.attr("Required")&&(e.isStateRequired=!1);switch(k.attr("Type").toLowerCase()){case "choice":e.isStateRequired||(e.states.push({type:"choice",
title:e.optionalLabel,name:e.optionalLabel}),e.statesMap[""]=e.states[e.states.length-1]);e.fieldFilter&&(e.fieldFilter=e.fieldFilter.split(/\,/));k.find("CHOICES CHOICE").each(function(a,c){var d=b(this).text();if(!e.fieldFilter||b.grep(e.fieldFilter,function(a){return a===d}).length){if(a>=l.maxColumns){try{console.log("SPWIDGETS:BOARD:Warning: Can only build a max of "+l.maxColumns+" columns!")}catch(f){}return!1}e.states.push({type:"choice",title:d,name:d});e.statesMap[d]=e.states[e.states.length-
1]}});c.resolveWith(e,[d,f]);break;case "lookup":e.fieldFilter||(e.fieldFilter="<Query></Query>");b().SPServices({operation:"GetListItems",listName:k.attr("List"),async:!0,cacheXML:!0,CAMLQuery:e.fieldFilter,webURL:e.webURL,CAMLRowLimit:l.maxColumns,CAMLViewFields:'<ViewFields><FieldRef Name="'+k.attr("ShowField")+'" /></ViewFields>',completefunc:function(d,f){if("error"===f)c.rejectWith(a,["Communications Error!",d,f]);else{var h=b(d.responseXML);h.SPMsgHasError()?c.rejectWith(a,[h.SPGetMsgError(),
d,f]):(e.isStateRequired||(e.states.push({type:"lookup",title:e.optionalLabel,name:""}),e.statesMap[""]=e.states[e.states.length-1]),h.SPFilterNode("z:row").each(function(a,c){if(a>=l.maxColumns){try{console.log("SPWIDGETS:BOARD:Warning: Can only build a max of "+l.maxColumns+" columns!")}catch(d){}return!1}var f=b(this),h=f.attr("ows_ID"),f=f.attr("ows_"+k.attr("ShowField")),h=h+";#"+f;e.states.push({type:"lookup",title:f,name:h});e.statesMap[h]=e.states[e.states.length-1]}),c.resolveWith(e,[d,f]))}}});
break;default:c.rejectWith(a,["Field ("+e.field+") Type ("+k.attr("Type")+") is not supported!",d,f])}}})}).promise()},_getListItems:function(){return b.Deferred(function(c){function d(f){b.isFunction(e.onGetListItems)&&e.onGetListItems.call(a,e.listItems,f);c.resolveWith(a,[e.listItems])}b.isFunction(e.CAMLQuery)?e.CAMLQuery.call(a,function(a){b.isArray(a)&&(e.listItems=a,d(e.CAMLQuery))},f):b().SPServices({operation:"GetListItems",listName:e.list,async:!0,CAMLQuery:e.CAMLQuery,CAMLRowLimit:0,CAMLViewFields:e.CAMLViewFields,
webURL:e.webURL,completefunc:function(f,h){if("error"===h)c.rejectWith(a,["Communications Error!",f,h]);else{var k=b(f.responseXML);k.SPMsgHasError()?c.rejectWith(a,[k.SPGetMsgError(),f,h]):(e.listItems=k.SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0}),d(k))}}})}).promise()},getBoardItemDataObject:function(a){var c=null,d,f,h;if(a)for(a=String(a),d=0,f=e.listItems.length;d<f;d++)h=e.listItems[d].ID,b.isFunction(h)&&(h=e.listItems[d].ID()),h=String(h),a===h&&(c=e.listItems[d],d=f+f);return c},
showItemsOnBoard:function(c){function d(c,h){var m="",k=null,g="";b.isFunction(e.template)?(m=e.template.call(a,c,h))&&(m=String(m)):m=b.SPWidgets.fillTemplate(e.template,s);void 0!==h&&""!==m?h.html(m):""!==m&&(k=c.ID,b.isFunction(c.ID)&&(k=c.ID()),void 0===l[p]&&(l[p]=""),e.initDone&&f.refresh&&(g+=" spwidget-temp"),l[p]+='<div class="spwidget-board-state-item ui-state-default ui-corner-all'+g+'" data-id="'+k+'">'+m+"</div>");return m}var f=b.extend({},{rows:e.listItems,refresh:!1,doBoardInsert:!0},
c);c=[];var h=[],k=[],l={},g=null,p=null,n=g=null,s=null,w;if(!f.refresh)for(n=0,w=e.states.length;n<w;n++)e.states[n].headerTotalEle.html("0"),e.states[n].dataEle.empty();n=0;for(w=f.rows.length;n<w;n++)s=f.rows[n],p=s[e.field]||"",g=s.ID,b.isFunction(p)&&(p=s[e.field]()),b.isFunction(g)&&(g=g()),e.statesMap[p]&&(!1===f.refresh?(e.initDone&&c.push(s),d(s)):(g=e.statesCntr.find("div[data-id='"+g+"']"),g.length?(g.addClass("spwidget-temp"),g.closest("div.spwidget-board-state").data("boardstate")!==
p&&(g.appendTo(e.statesMap[p].dataEle),k.push(s)),d(s,g)):(e.initDone&&c.push(s),d(s))));if(f.doBoardInsert){for(n in l)l.hasOwnProperty(n)&&""!==l[n]&&e.statesMap[n].dataEle.append(l[n]);b.pt.addHoverEffect(a.find(".spwidget-board-state-item"))}e.initDone&&f.refresh&&e.statesCntr.find("div.spwidget-board-state-item").not("div.spwidget-temp").each(function(){h.push(e.getBoardItemDataObject(b(this).data("id")));b(this).remove()}).end().removeClass("spwidget-temp");e.initDone&&(e.statesCntr.find("div.spwidget-board-state").sortable("refresh").end().disableSelection(),
n=e.getEventObject(),c.length&&(n.itemsModified.length=0,n.itemsModified.push(c),a.trigger("spwidget:boarditemadd",[a,b.extend({},n)])),h.length&&(n.itemsModified.length=0,n.itemsModified.push(h),a.trigger("spwidget:boarditemremove",[a,b.extend({},n)])),n.itemsModified.length=0,n.itemsModified.push.apply(n.itemsModified,c),n.itemsModified.push.apply(n.itemsModified,h),n.itemsModified.push.apply(n.itemsModified,k),n.itemsModified.length&&a.trigger("spwidget:boardchange",[a,n]));e.updBoardHeaders();
e.setBoardColumnHeight();return l},updBoardHeaders:function(a){var c;if(!b.extend({},{state:null},a).state)for(a=0,c=e.states.length;a<c;a++)e.states[a].headerTotalEle.html(e.states[a].dataEle.children().length)},getEventObject:function(a){a||(a=e.statesCntr.find("div.spwidget-board-state-item:first"));a=b(a);a={stateTotals:{},itemTotal:0,currentState:a.closest("div.spwidget-board-state").data("boardstate"),itemObj:e.getBoardItemDataObject(a.data("id"))||{},itemsModified:[]};var c,d;c=0;for(d=e.states.length;c<
d;c++)a.itemTotal+=a.stateTotals[e.states[c].name]=Number(e.states[c].headerTotalEle.text());return a},getListFormUrl:function(a){function c(){b().SPServices({operation:"GetFormCollection",listName:e.list,webURL:e.webURL,cacheXML:!0,async:!1,completefunc:function(a,c){b(a.responseXML).find("Form").each(function(){var a=b(this);e.formUrls[String(a.attr("Type")).toLowerCase()]=e.webURL+"/"+a.attr("Url")})}})}a=String(a).toLowerCase();null===e.formUrls&&(e.formUrls={},c());return e.formUrls[a]||""},
setUserDefinedVisibleCol:function(a){function c(a){var d=!1;b.each(e.states,function(b,e){if(e.title===a||e.name===a)return d=!0,!1});return d}var d=0,f=!1;if(a){if(!b.isArray(a)||!a.length){if(!b.isArray(a)&&"all"!==String(a).toLowerCase())return;f=!0;a=[]}2>a.length||(f||(d=0,b.each(a,function(a,b){c(b)&&d++;if(2===d)return!1})),d=0,b.each(e.states,function(c,f){-1<b.inArray(f.title,a)||-1<b.inArray(f.name,a)?(d++,!1===f.isVisible&&(f.isVisible=!0,f.dataEle.css("display",""),f.headerEle.css("display",
""))):(f.isVisible=!1,f.dataEle.css("display","none"),f.headerEle.css("display","none"));if(d>=e.maxColumnVisible)return!1}),e.setBoardColumnClass(d),e.setBoardColumnHeight(),e.triggerBoardColumnChangeEvent())}},setBoardColumnClass:function(a){var c=e.headersCntr.add(e.statesCntr);a=parseInt(a);if(!a||2>a)a=0,b.each(e.states,function(b,e){e.isVisible&&a++});if(e.showNumberOfColumns===a)return e;c.addClass("spwidget-states-"+a);e.showNumberOfColumns&&c.removeClass("spwidget-states-"+e.showNumberOfColumns);
e.showNumberOfColumns=a;return e},triggerBoardColumnChangeEvent:function(){var a=[];e.initDone&&(b.each(e.statesMap,function(b,e){e.isVisible&&a.push(e.title)}),e.ele.trigger("spwidget:boardColumnChange",[e.ele,a]))},setupColumnPicker:function(){var c=a.find(".spwidget-board-column-list-cntr"),d=c.find("div.spwidget-board-column-list"),f=c.children("div.ui-state-default:last"),h={$totalCntr:c.find("span.spwidget-board-column-total"),setTotalSelected:function(){var a=h.getSelected().length;h.$totalCntr.html(a);
return a},getSelected:function(){return d.find("a.ui-state-highlight")},showMessage:function(a){b('<div class="spwidget-board-msg ui-state-error ui-corner-all">'+a+"</div>").appendTo(f).fadeOut(8E3,function(){b(this).remove()})},setSelected:function(){var a=d.find("a");b.each(e.states,function(b,e){var c=a.filter("[data-board_col_index='"+b+"']");e.isVisible?h.selectColumn(c,!1):h.selectColumn(c,!0)});h.setTotalSelected()},selectColumn:function(a,e){b(a).each(function(){var a=b(this),c=a.find(".ui-icon");
a.hasClass("ui-state-highlight")||e?!1!==e&&(c.removeClass("ui-icon-check"),a.removeClass("ui-state-highlight")):(c.addClass("ui-icon-check"),a.addClass("ui-state-highlight"))});return a},setVisibleColumns:function(a){a||(a=h.getSelected());var c=a.length;b.each(e.states,function(b,e){a.filter("[data-board_col_index='"+b+"']").length?!1===e.isVisible&&(e.isVisible=!0,e.dataEle.css("display",""),e.headerEle.css("display","")):(e.isVisible=!1,e.dataEle.css("display","none"),e.headerEle.css("display",
"none"))});e.setBoardColumnClass(c);e.setBoardColumnHeight()},setUserDefinedVisibleCol:function(a){var c=0,f="";if(!b.isArray(a)||!a.length){if(!b.isArray(a)&&"all"!==String(a).toLowerCase())return;a=[];b.each(e.states,function(b,e){a.push(e.title)})}b.each(a,function(a,d){b.each(e.states,function(a,b){if(b.title===d)return c++,1<c&&(f+=","),f+="a[data-board_col_name='"+b.name+"']",!1});if(c>=e.maxColumnVisible)return!1});2<=c&&(h.setVisibleColumns(d.find(f)),h.triggerEvent())}};h.triggerEvent=e.triggerBoardColumnChangeEvent;
c.find("button[name='apply']").button({label:e.colPickerApplyLabel,icons:{secondary:"ui-icon-circle-check"}}).on("click",function(a){a=h.getSelected();var b=a.length;b>e.maxColumnVisible?h.showMessage(e.colPickerMaxColMsg):2>b?h.showMessage(e.colPickerMinColMsg):(c.hide(),h.setVisibleColumns(a),h.triggerEvent())});c.find("button[name='check']").attr("title",e.colPickerCheckLabel).button({text:!1,icons:{primary:"ui-icon-radio-off"}}).on("click",function(a){a=h.getSelected();a.length?h.selectColumn(a,
!0):h.selectColumn(d.find("a"));h.setTotalSelected()});c.find("button[name='close']").attr("title",e.colPickerCloseLabel).button({text:!1,icons:{primary:"ui-icon-circle-close"}}).on("click",function(a){c.hide()});a.find("div.spwidget-board-settings").css("display","").find("div.spwidget-board-settings-columns").each(function(){var a=b(this);a.button({label:e.colPickerLabel,icons:{secondary:"ui-icon-triangle-1-s"}}).on("click.SPWidgets",function(){c.is(":visible")?c.hide():(h.setSelected(),c.show().position({my:"left top",
at:"left bottom",of:a}))});return!1});d.each(function(){var a=b(this),c="";b.each(e.states,function(a,b){c+='<a href="javascript:" data-board_col_index="'+a+'" data-board_col_name="'+b.name+'"><span class="ui-icon ui-icon-minus"></span><span>'+b.title+"</span></a>"});a.html(c);return!1}).on("click","a",function(){h.selectColumn(this);h.setTotalSelected()});c.find("span.spwidget-board-column-total-label").html(e.colPickerTotalLabel)},setBoardColumnHeight:function(){e.headersCntr.is(":visible")&&b.SPWidgets.makeSameHeight(e.headersCntr.find("div.spwidget-board-state:visible"),
0,"min-height");e.height?e.statesCntr.find("div.spwidget-board-state:visible").css({height:e.height,"min-height":""}):e.statesCntr.is(":visible")&&b.SPWidgets.makeSameHeight(e.statesCntr.find("div.spwidget-board-state:visible").css("height",""),20,"min-height")},getBoardColumnList:function(){var a=[],b,c;b=0;for(c=e.states.length;b<c;b++)a.push({name:e.states[b].name,title:e.states[b].title,isVisible:e.states[b].isVisible});return a}});if(!e.list||!e.field)return a.html("<div>SPWidgets:Board [ERROR] Missing required input parameters!</div>"),
this;a.addClass("loadingSPShowBoard").data("SPShowBoardOptions",e);e.getBoardStates().then(function(){""===e.CAMLViewFields?e.CAMLViewFields='<ViewFields><FieldRef Name="ID" /><FieldRef Name="Title" /><FieldRef Name="'+e.field+'" /></ViewFields>':0>e.CAMLViewFields.indexOf(e.field)&&(e.CAMLViewFields=e.CAMLViewFields.replace(/\<\/ViewFields\>/i,'<FieldRef Name="'+e.field+'" /></ViewFields>'));a.html(b(l.htmlTemplate).filter("div.spwidget-board"));e.tmpltHeader=b("<div/>").append(a.find("div.spwidget-board-headers-cntr div.spwidget-board-state").clone()).html();
e.tmpltState=b("<div/>").append(a.find("div.spwidget-board-states-cntr div.spwidget-board-state")).html();e.states.length<=e.maxColumnVisible&&(e.showNumberOfColumns=e.states.length);e.statesCntr=a.find("div.spwidget-board-states-cntr").addClass("spwidget-states-"+e.showNumberOfColumns).empty();e.headersCntr=a.find("div.spwidget-board-headers-cntr").addClass("spwidget-states-"+e.showNumberOfColumns).empty();b.each(e.states,function(a,c){c.headerEle=b(e.tmpltHeader).appendTo(e.headersCntr).attr("data-boardstate",
c.name).attr("data-boardindex",a).find(".spwidget-board-header-title").html(c.title).end();c.dataEle=b(e.tmpltState).appendTo(e.statesCntr).attr("data-boardindex",a).attr("data-boardstate",c.name);c.headerTotalEle=c.headerEle.find("span.spwidget-state-item-total");c.isVisible=!0;a>e.maxColumnVisible-1&&(c.headerEle.css("display","none"),c.dataEle.css("display","none"),c.isVisible=!1)});b(e.headersCntr,e.statesCntr).append('<div style="clear:both;"></div>');!0===e.showColPicker&&e.setupColumnPicker();
b.isArray(e.colPickerVisible)&&e.colPickerVisible.length&&e.setUserDefinedVisibleCol(e.colPickerVisible);a.on("sortreceive sortremove",function(a,c){e.updBoardHeaders();b(c.item).removeClass("ui-state-hover")}).on("sortreceive",function(c,d){var f=e.getEventObject(d.item),h=b.Deferred(),k="",k=b.isFunction(f.itemObj.ID)?f.itemObj.ID():f.itemObj.ID;f.updates=[];f.updatePromise=h.promise();f.updates.push([e.field,f.currentState]);if(b.isFunction(e.onPreUpdate)&&!0===e.onPreUpdate.call(d.item,c,d.item,
f)||!f.updates.length)return this;b().SPServices({operation:"UpdateListItems",listName:e.list,async:!0,ID:k,valuepairs:f.updates,webURL:e.webURL,completefunc:function(e,k){if("error"===k)h.rejectWith(a,["Communications Error!",e,k]);else{var g=b(e.responseXML),l=null;g.SPMsgHasError()?h.rejectWith(a,[g.SPGetMsgError(),e,k]):(l=b(e.responseXML).SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0}),b(c.target).trigger("spwidget:boardchange",[d.item,f]),h.resolveWith(c.target,[l[0],f.itemObj,e]))}}})}).on("click",
"a.spwidgets-board-action",function(a){a=b(a.currentTarget);var c=String(a.data("spwidgets_board_action")).toLowerCase(),d="",f=b.pt.getEscapedUrl(window.location.href);switch(c){case "edit-item":d=e.getListFormUrl("EditForm");break;case "view-item":d=e.getListFormUrl("DisplayForm")}window.location.href=d+"?ID="+a.data("spwidgets_id")+"&Source="+f;return this});null===e.template&&(e.template=b(l.htmlTemplate).filter("div.spwidget-item-template"));e._getListItems().then(function(){e.showItemsOnBoard();
e.statesCntr.find("div.spwidget-board-state").each(function(){var c=b(this);c.sortable({connectWith:c.siblings(),containment:a,cursor:"move",tolerance:"pointer",opacity:".80",placeholder:"ui-state-highlight spwidget-board-placeholder",forcePlaceholderSize:!0,remove:function(a,b){e.setBoardColumnHeight()}})});e.statesCntr.disableSelection();e.initDone=!0;e.setBoardColumnHeight();a.addClass("hasSPShowBoard").removeClass("loadingSPShowBoard");b.isFunction(e.onBoardCreate)&&e.onBoardCreate.call(a,e.getEventObject());
b(a).trigger("spwidget:boardcreate",[a,e.getEventObject()])})}).fail(function(b,e,c){a.append('<div class="ui-state-error"><p>'+b+"</p></div>")});return this});return d};l.styleSheet="/** \n * Stylesheet for the Board widget\n * \n * BUILD: Paul:March 15, 2014 11:21 AM\n */\ndiv.spwidget-board {\n    width: 100%;\n    position: relative;\n}\n\ndiv.spwidget-board div.spwidget-board-headers,\ndiv.spwidget-board div.spwidget-board-headers-cntr,\ndiv.spwidget-board div.spwidget-board-states-cntr, \ndiv.spwidget-board div.spwidget-board-states {\n    width: 100%;\n}\n\ndiv.spwidget-board div.spwidget-board-state {\n    width: 49%;\n    float: left;\n    margin: 0% .1%;\n    padding: .2%;\n    overflow: auto;\n}\n/* Board Individual Headers */\ndiv.spwidget-board div.spwidget-board-headers-cntr div.spwidget-board-state {\n    font-weight: bold;\n    font-size: 1.1em;\n    overflow: hidden;\n    word-wrap: break-word;\n}\n/* Board Header Title */\ndiv.spwidget-board div.spwidget-board-headers-cntr .spwidget-board-header-title,\ndiv.spwidget-board div.spwidget-board-headers-cntr .spwidget-state-item-stat-cntr {\n    display: inline-block\n}\n/* Board Header Stats container*/\ndiv.spwidget-board div.spwidget-board-headers-cntr .spwidget-state-item-stat-cntr {\n    font-size: .8em;\n    float: right;\n}\ndiv.spwidget-board div.spwidget-board-headers-cntr .spwidget-item-stat {\n    display: inline-block;\n    min-width: 2em;\n    padding: 0 0.2em;\n    text-align: center;\n}\n\n/* Board column content */\ndiv.spwidget-board div.spwidget-board-states div.spwidget-board-state {\n    margin-bottom: 1em;\n    min-height: 10em;\n}\n\ndiv.spwidget-board div.spwidget-board-state div.spwidget-board-state-item {\n    padding: .2em;\n    margin: .5em .2em;\n    font-weight: normal;\n    cursor: move;\n    overflow: auto;\n}\ndiv.spwidget-board div.spwidget-board-state-item div.spwidget-board-item-actions{\n    margin-top: .2em;\n    padding: .2em .5em;\n    overflow: hidden;\n}\ndiv.spwidget-board .spwidget-board-placeholder {\n    height: 3em;\n}\n\n/** Setting container */\ndiv.spwidget-board-settings {\n    font-size: .8em;\n    margin: .2em;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr {\n    z-index: 5;\n    position: absolute;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr > div {\n    padding: .2em;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr > div:first-child,\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr > div:last-child {\n    text-align: right;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list {\n    width: 20em;\n    height: 17em;\n    overflow: auto;\n    position: relative\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr .spwidget-board-msg {\n    position: absolute;\n    top: 1px;\n    left: 1px;\n    padding: .2em;\n}\ndiv.spwidget-board-settings div.ui-state-default {\n    position: relative;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list > a {\n    display: block;\n    margin: .2em;\n    padding: .2em;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list > a > span.ui-icon {\n    display: inline-block;\n}\n\n/* Number of Columns (96 % #columns)\n * Currently support 10 columns. \n */\ndiv.spwidget-board .spwidget-states-3 div.spwidget-board-state {\n    width: 32.4%;\n}\ndiv.spwidget-board .spwidget-states-4 div.spwidget-board-state {\n    width: 24%;\n}\ndiv.spwidget-board .spwidget-states-5 div.spwidget-board-state {\n    width: 19.1%;\n}\ndiv.spwidget-board .spwidget-states-6 div.spwidget-board-state {\n    width: 15.8%;\n}\ndiv.spwidget-board .spwidget-states-7 div.spwidget-board-state {\n    width: 13.4%;\n}\ndiv.spwidget-board .spwidget-states-8 div.spwidget-board-state {\n    width: 11.6%;\n}\ndiv.spwidget-board .spwidget-states-9 div.spwidget-board-state {\n    width: 10.2%;\n}\ndiv.spwidget-board .spwidget-states-10 div.spwidget-board-state {\n    width: 9.1%;\n}\n";
l.htmlTemplate='<div class="spwidget-board">\n    <div class="spwidget-board-settings" style="display:none;">\n        <div class=\'spwidget-board-settings-columns\'>Columns</div>\n        <div class="spwidget-board-column-list-cntr ui-widget-content ui-corner-all" style="display: none">\n            <div class="ui-state-default">\n                <span>\n                    <span class="spwidget-board-column-total"></span> \n                    <span class="spwidget-board-column-total-label">Selected.</span>\n                </span>\n                <button type="button" name="check" title="Check-Uncheck All">Check</button>\n                <button type="button" name="close" title="Close">Close</button>\n            </div>\n            <div class="spwidget-board-column-list">\n            </div>\n            <div class="ui-state-default">\n                <button type="button" name="apply">Apply</button>\n            </div>\n        </div>\n    </div>\n    <div class="spwidget-board-headers">\n        <div class="spwidget-board-headers-cntr">\n            <div class="spwidget-board-state ui-widget-content ui-corner-top">\n                <span class="spwidget-board-header-title"></span>\n                <span class="spwidget-state-item-stat-cntr">\n                    <span class="spwidget-item-stat ui-widget-content ui-corner-all spwidget-state-item-total">0</span>\n                </span>\n            </div>\n            <div style="clear:both;"></div>\n        </div>\n    </div>\n    <div style="clear:both;"></div>\n    <div class="spwidget-board-states">\n        <div class="spwidget-board-states-cntr">\n            <div class="spwidget-board-state ui-widget-content ui-corner-bottom"></div>\n            <div style="clear:both;"></div>\n        </div>\n    </div>\n    <div style="clear:both;"></div>\n</div>\n<div class="spwidget-item-template">\n    <div>\n        <div>#{{ID}}: {{Title}}</div>\n        <div class="ui-state-active ui-corner-all spwidget-board-item-actions">\n            <a class="spwidgets-board-action" href="javascript:" title="View Item" data-spwidgets_id="{{ID}}" data-spwidgets_board_action="view-item"><img src="/_layouts/images/icgen.gif" border="0"/></a>\n            <a class="spwidgets-board-action" href="javascript:" title="Edit Item" data-spwidgets_id="{{ID}}" data-spwidgets_board_action="edit-item"><img src="/_layouts/images/CMSEditSourceDoc.GIF" border="0"/></a>\n        </div>\n    </div>\n</div>\n'})(r);
(function(b){var g={_islookupFieldCssDone:!1,_isLookupbodyEventDone:!1};b.SPWidgets.defaults.LookupField={list:"",allowMultiples:!0,inputLabel:"",inputPlaceholder:"Type and Pick",readOnly:!1,exactMatch:!0,uiContainer:null,selectFields:["Title"],filter:"",filterFields:["Title"],filterOrderBy:"",template:'<div>{{Title}} <span class="spwidgets-item-remove">[x]</span></div>',listTemplate:"{{Title}}",listHeight:0,onItemAdd:null,onItemRemove:null,onReady:null,msgNoItems:"",maxResults:50,minLength:2,hideInput:!0,
padDelimeter:!1,showSelector:!1};b.fn.SPLookupField=function(f){g._islookupFieldCssDone||(g._islookupFieldCssDone=!0,b('<style type="text/css">\n\n'+g.styleSheet+"\n\n</style>").prependTo("head"));var c=arguments;this.each(function(){var d=b(this);if(!d.is("input")&&!d.is("textarea")||d.hasClass("hasLookupSPField")){if("string"===typeof f&&d.is("input")){var a=d.data("SPWidgetLookupFieldUI").data("SPWidgetLookupFieldOpt");if("method"===f.toLowerCase()){var d=String(c[1]||"").toLowerCase(),h=c[2];
"clear"===d?(b.isArray(h)||(h=h?[h]:[]),h.length?function(){var e=b();b.each(h,function(b,c){e=e.add(a._selectedItemsCntr.find("div.spwidgets-item-id-"+c))});g.removeItem(a,e)}():g.removeItem(a,a._selectedItemsCntr.find("div.spwidgets-item"))):"add"===d&&g.addItem(a,h)}}return this}a=b.extend({},b.SPWidgets.defaults.LookupField,f,{_ele:d.css("display","none").addClass("hasLookupSPField")});a.showSelectedItems=function(e,c){var d=a._selectedItemsCntr.css("display",""),f=[],h=!1;d.find("div.spwidgets-item").length&&
!1!==a.allowMultiples||d.empty();b.isArray(e)?f=e:f.push(e);b.each(f,function(e,f){if(!d.find("div.spwidgets-item-id-"+f.ID).length){var k=b('<div class="spwidgets-item spwidgets-item-id-'+f.ID+'" data-spid="'+f.ID+'" style="display:none">'+b.SPWidgets.fillTemplate(a.template,f)+"</div>").appendTo(d).find(".spwidgets-item-remove").on("click.SPWidgets",function(b){g.removeItem(a,this)}).end();b.isFunction(a.onItemAdd)&&!0!==c&&a.onItemAdd.call(a._ele,k,f,a._cntr);0<d.find("div.spwidgets-item-id-"+
f.ID).length&&(h=!0,k.fadeIn("slow").promise().then(function(){b(this).css("display","")}),!0!==c&&a.storeItemIDs(f.ID,a.allowMultiples),!1===a.allowMultiples&&!0===a.hideInput&&a._lookupInputEleCntr.css("display","none"))}});a.readOnly&&a._cntr.find(".spwidgets-item-remove").remove();h&&a._ele.trigger("change")};a.storeItemIDs=function(e,c){var d=b.trim(a._ele.val()),f=!1;b.isArray(e)||(e=[e]);!0!==c&&(d="");b.each(e,function(b,e){e&&(1>d.length&&(!0===a.padDelimeter&&!f)&&(d+=";#",f=!0),0<d.length&&
(d+=";#"),d+=e+";#")});a._ele.val(d)};a.showCurrentInputSelection=function(e){return b.Deferred(function(c){var d=b.extend({},{async:!0},e),f=b.SPWidgets.parseLookupFieldValue(a._ele.val());f.length?b().SPServices({operation:"GetListItems",async:d.async,listName:a.list,CAMLQuery:"<Query><Where>"+b.SPWidgets.getCamlLogical({type:"OR",values:f,onEachValue:function(a){var b="";a.id&&(b="<Eq><FieldRef Name='ID'/><Value Type='Counter'>"+a.id+"</Value></Eq>");return b}})+"</Where></Query>",CAMLViewFields:"<ViewFields>"+
a._selectFields+"</ViewFields>",CAMLRowLimit:0,completefunc:function(e,d){var f=b(e.responseXML).SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0,removeOws:!0});a.addToAutocompleteCache(f);a.showSelectedItems(f,!0);c.resolveWith(a,[e,d])}}):c.resolveWith(a,[null,null])}).promise()};a.getItemObjectFromCache=function(e){var c=null;b.each(a._autocompleteCache,function(a,d){b.each(d,function(a,b){if(b.ID==e)return c=b,!1});if(null!==c)return!1});return c};a.addToAutocompleteCache=function(e){b.isArray(e)||
(e=[e]);b.each(e,function(b,e){a._autocompleteCache[e.ID]||(a._autocompleteCache[e.ID]=[]);a._autocompleteCache[e.ID].push(e)})};a._cntr=b(g.htmlTemplate).find(".spwidgets-lookup-cntr").clone(1);null===a.uiContainer?a._cntr.insertAfter(a._ele):a._cntr.appendTo(b(a.uiContainer));a._selectedItemsCntr=a._cntr.find("div.spwidgets-lookup-selected");a._lookupInputEleCntr=a._cntr.find("div.spwidgets-lookup-input");a._lookupInputEle=a._lookupInputEleCntr.find("input[name='spwidgetLookupInput']");a._ignoreKeywordsRegEx=
/^(of|and|a|an|to|by|the|or)$/i;a._cntr.data("SPWidgetLookupFieldOpt",a);a._ele.data("SPWidgetLookupFieldUI",a._cntr);a.showSelector?(a._selectorCntr=a._cntr.find("div.spwidget-lookup-selector-cntr"),a._queryInitDone=!1,a._cntr.find(".spwidget-lookup-selector-showhide").on("click",function(b){a._selectorCntr.is(":visible")?a._selectorCntr.css("display","none"):(a._selectorCntr.css("display","block").position({my:"left top",at:"left bottom",of:a._lookupInputEle}),a._queryInitDone||(a._queryInitDone=
!0,g.doSelectorDataInit(a)))}),a._selectorCntr.find("button[name='close']").button({text:!1,icons:{primary:"ui-icon-circle-close"}}).click(function(){a._selectorCntr.css("display","none")}),a._lookupInputEle.on("focus",function(b){a._selectorCntr.is(":visible")&&a._selectorCntr.css("display","none")})):a._cntr.find(".spwidget-lookup-selector-showhide,.spwidget-lookup-selector-cntr").remove();a.inputLabel?a._cntr.find("div.spwidgets-lookup-input label").empty().append(a.inputLabel):a._cntr.find("div.spwidgets-lookup-input label").remove();
a.inputPlaceholder&&a._lookupInputEleCntr.find("input").attr("placeholder",a.inputPlaceholder);!0===a.readOnly&&(a._lookupInputEleCntr.css("display","none"),a._cntr.find("div.spwidget-lookup").addClass("spwidget-lookup-readyonly"));a._selectFields="";b.each(a.selectFields,function(b,c){a._selectFields+="<FieldRef Name='"+c+"'/>"});a._templateTokens=String(a.template).match(/(\$\{.*?\})/g);null==a._templateTokens&&(a._templateTokens=[]);b.each(a._templateTokens,function(b,c){a._templateTokens[b]=c.replace(/[\$\{\}]/g,
"")});var k=a._autocompleteCache={};a._cntr.find("div.spwidgets-lookup-input input").autocomplete({minLength:2,appendTo:a._cntr,open:function(c,d){b(this).autocomplete("widget").each(function(){0<a.listHeight&&b(this).css("height",a.listHeight+"px");return!1})},source:function(c,d){c.term=b.trim(c.term);var f=String(b.trim(c.term)).toUpperCase();if(f in k)d(k[f]);else{k[f]=[];var h=[],g=String(c.term);if(null===g.match(/\D/)&&null!==g.match(/\d/))h.push("<Eq><FieldRef Name='ID'/><Value Type='Counter'>"+
g+"</Value></Eq>");else{g=[c.term];a.exactMatch||(g=String(c.term).split(/ /));for(var l=0,q=a.filterFields.length;l<q;l++){for(var t=[],u=0,y=g.length;u<y;u++)a._ignoreKeywordsRegEx.test(g[u])||t.push("<Contains><FieldRef Name='"+a.filterFields[l]+"'/><Value Type='Text'>"+g[u]+"</Value></Contains>");h.push(b.SPWidgets.getCamlLogical({values:t,type:"AND"}))}}h=b.SPWidgets.getCamlLogical({values:h,type:"OR"});a.filter&&(h=b.SPWidgets.getCamlLogical({values:[h,a.filter],type:"AND"}));b().SPServices({operation:"GetListItems",
listName:a.list,async:!0,CAMLQuery:"<Query><Where>"+h+"</Where>"+a.filterOrderBy+"</Query>",CAMLRowLimit:a.maxResults,CAMLViewFields:"<ViewFields>"+a._selectFields+"</ViewFields>",completefunc:function(c,e){b(c.responseXML).SPFilterNode("z:row").each(function(){var c=b(this).SPXmlToJson({includeAllAttrs:!0})[0];c.value="";c.label=b.SPWidgets.fillTemplate(a.listTemplate,c);k[f].push(c)});d(k[f])}})}},select:function(b,c){a.showSelectedItems(c.item)}}).on("keyup.SPWidgets",function(c){if(13==c.which){var d=
b(c.target).val();d&&String(d).length<a.minLength&&b(c.target).autocomplete("search",d+"    ")}});a._ele.val()?a.showCurrentInputSelection().then(function(c,d){b.isFunction(a.onReady)&&a.onReady.call(a._ele,a._cntr)}):b.isFunction(a.onReady)&&a.onReady.call(a._ele,a._cntr);return this});return this};g.removeItem=function(f,c){var d=b(c).closest("div.spwidgets-item"),a=f._selectedItemsCntr,h=[];if(b.isFunction(f.onItemRemove)){d.each(function(){h.push(f.getItemObjectFromCache(b(this).data("spid")))});
if(!1===f.onItemRemove.call(f._ele,d,h,f._cntr))return g;h=[]}d.fadeOut("fast").promise().then(function(){d.remove();!f.msgNoItems&&(!1===f.allowMultiples||!0===f.allowMultiples&&1>a.find("div.spwidgets-item").length)&&a.css("display","none");!1===f.allowMultiples&&!0===f.hideInput&&f._lookupInputEleCntr.css("display","");1>a.find("div.spwidgets-item").length&&f.msgNoItems&&a.append("<div>"+f.msgNoItems+"</div>");a.find("div.spwidgets-item").each(function(){h.push(b(this).data("spid"))});f._lookupInputEleCntr.find("input").focus();
f.storeItemIDs(h);f._ele.change()});return g};g.addItem=function(b,c){if(!c||"string"!==typeof c)return b;var d=b._ele.val();""===d&&!0===b.padDelimeter&&(d+=";#");d&&(d+=";#");b._ele.val(d+c);b.showCurrentInputSelection();return b};g.doSelectorDataInit=function(f){var c={$resultsCntr:f._selectorCntr.find("div.spwidget-lookup-selector-item-cntr"),nextPageToken:"",isLoading:!1,hasMorePages:!0,$lastPage:b(),queryXml:f.filter?"<Query><Where>"+f.filter+"</Where>"+f.filterOrderBy+"</Query>":"<Query>"+
f.filterOrderBy+"</Query>"};g._isLookupbodyEventDone||(g._isLookupbodyEventDone=!0,b("body").on("click",function(c){c=b(c.target);var a=b("div.spwidget-lookup-selector-cntr:visible"),f=null;a.length&&(f=c.closest("div.spwidget-lookup-selector-cntr"),!f.length&&c.is(".spwidget-lookup-selector-showhide")&&(f=c.parent().find("div.spwidget-lookup-selector-cntr")),a.not(f).hide())}));c.getListRows=function(){return b.Deferred(function(d){c.isLoading?d.resolveWith($lastPage,[$lastPage]):(c.isLoading=!0,
b().SPServices({operation:"GetListItems",listName:f.list,async:!0,CAMLQuery:c.queryXml,CAMLRowLimit:f.maxResults,CAMLViewFields:"<ViewFields>"+f._selectFields+"</ViewFields>",CAMLQueryOptions:function(){if(""!==c.nextPageToken)return"<QueryOptions><Paging ListItemCollectionPositionNext='"+b.SPWidgets.escapeXML(c.nextPageToken)+"'/></QueryOptions>"}(),completefunc:function(a,h){var k=b(a.responseXML),e=k.SPFilterNode("rs:data").eq(0),g=k.SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0,removeOws:!0}),
k=b("<div/>").insertBefore(c.$nextPage),l="";c.nextPageToken=e.attr("ListItemCollectionPositionNext")||"";""===c.nextPageToken&&(c.hasMorePages=!1);b.each(g,function(a,c){f.addToAutocompleteCache(c);c.value="";c.label=b.SPWidgets.fillTemplate(f.listTemplate,c);l+='<div class="spwidget-lookup-item" data-spwidgetsindex="'+a+'">'+c.label+"</div>"});k.html(l).find("div.spwidget-lookup-item").each(function(){var a=b(this);a.hover(function(){a.addClass("ui-state-hover")},function(){a.removeClass("ui-state-hover")})}).end().on("click",
"div.spwidget-lookup-item",function(a){a=b(this).data("spwidgetsindex");f.showSelectedItems(g[a])});c.isLoading=!1;d.resolveWith(k,[k])}}))})};c.$nextPage=b('<div class="ui-state-highlight spwidget-lookup-selector-next">Next...</div>').appendTo(c.$resultsCntr.empty()).click(function(b){c.hasMorePages&&(c.$nextPage.css("display","none"),c.getListRows().then(function(a){c.hasMorePages?c.$nextPage.css("display",""):a.children().length||a.append("<div class='ui-state-highlight'>No Items Found!</div>");
c.$resultsCntr.scrollTop(a.position().top)}))});c.$nextPage.click();return f};g.styleSheet='/**\n * Stylesheet for the Lookup Field widget.\n * \n */\n\n.spwidgets-lookup-cntr {\n    position: relative;\n    display: inline-block;\n    zoom: 1; /* IE7 hack */\n    *display: inline; /* IE7 hack */\n}\n\n\n.spwidgets-lookup-cntr .spwidgets-lookup-selected {\n    -moz-appearance: textfield;\n    -webkit-appearance: textfield;\n    background-color: white;\n    background-color: -moz-field;\n    border: 1px solid  darkgray;\n    box-shadow: 1px 1px 1px 0 lightgray inset;  \n    font: -moz-field;\n    font: -webkit-small-control;\n    margin-top: 5px;\n    padding: 2px 5px; \n}\n\n.spwidgets-lookup-cntr  .spwidgets-lookup-selected .spwidgets-item {\n    display: inline-block;\n    margin-left: .5em;\n}\n.spwidgets-lookup-cntr .spwidgets-item:first-child {\n    margin-left: 0px;\n}\n.spwidgets-lookup-cntr .spwidgets-item-remove {\n    color: red;\n    font-size: xx-small;\n    vertical-align: super;\n    cursor: pointer;\n}\n\n.spwidgets-lookup-cntr .spwidgets-lookup-input {\n    margin: .2em 0em;\n    position: relative;\n}\n.spwidgets-lookup-cntr .spwidgets-lookup-input input {\n    width: 99%;\n}\n.spwidgets-lookup-cntr ul.ui-autocomplete {\n    overflow: auto;\n    z-index: 1;\n}\n\n/* Ready only display */\n.spwidgets-lookup-cntr div.spwidget-lookup-readyonly .spwidgets-lookup-selected {\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    background-color: transparent;\n    border: none;\n    box-shadow: none;\n    font: inherit;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-readyonly .spwidgets-item-remove {\n    display: none;\n}\n\n/** SELECTOR */\n.spwidgets-lookup-cntr .spwidget-lookup-selector-showhide {\n    background-repeat: no-repeat;\n    background-image: url("/_layouts/images/bizdatacontentsource.gif");\n    cursor: pointer;\n    display: block;\n    position: absolute;\n    text-indent: -99999px;\n    z-index: 5;\n    height: 16px;\n    width: 16px;\n    right: 5px;\n    top: .3em;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-cntr {\n    display: none;\n    position: absolute;\n    left: 0px;\n    z-index: 10;\n    padding: .2em;\n    width: 98%;\n    font-size: .8em;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-cntr > .ui-state-default {\n    padding: .2em;\n    text-align: right;\n}\n\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr {\n    height: 15em;\n    overflow: auto;\n    padding: .2em;\n    font-size: 1em;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr .ui-state-highlight {\n    padding: .5em;\n    margin: 1em .2em;\n    text-align: center;\n    font-size: 1.1em;\n    font-weight: bold;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr .spwidget-lookup-selector-next {\n    cursor: pointer;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr .spwidget-lookup-item {\n    padding: .2em .5em;\n    margin: .2em;\n    cursor: pointer;\n    font-weight: normal;\n}\n\n';
g.htmlTemplate='<div>\n    <div class="spwidgets-lookup-cntr">\n        <div class="spwidget-lookup">\n            <div class="spwidgets-lookup-selected" style="display:none;">\n            </div>\n            <div class="spwidgets-lookup-input">\n                <label>Add</label>\n                <input type="text" name="spwidgetLookupInput" value="" />\n                <span class="spwidget-lookup-selector-showhide" title="Browse">Browse</span>\n                <div class="spwidget-lookup-selector-cntr ui-widget-content">\n                    <div class="ui-state-default">\n                        <button type="button" name="close" title="Close">Close</button>\n                    </div>\n                    <div class="spwidget-lookup-selector-item-cntr"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n'})(r);
(function(){g.pt.pickSPUser={_isPickSPUserCssDone:!1};g.SPWidgets.defaults.peoplePicker={allowMultiples:!0,maxSearchResults:50,webURL:null,type:"User",onPickUser:null,onCreate:null,onRemoveUser:null,inputPlaceholder:"Type and Pick",appendTo:null,minLength:3,resolvePrincipals:!0,meKeyword:"[me]",meKeywordLabel:"Current User"};g.fn.pickSPUser=function(b){g.pt.pickSPUser._isPickSPUserCssDone||(g.pt.pickSPUser._isPickSPUserCssDone=!0,g('<style type="text/css">\n\n'+g.pt.pickSPUser.styleSheet+"\n\n</style>").prependTo("head"));
var l=arguments,f=this;if("string"===typeof b)return function(b){return b.is("input")&&b.hasClass("hasPickSPUser")?g.pt.pickSPUser.handleAction.apply(b,l):f}(f.eq(0));this.each(function(){var c=g(this),d=g.extend({},g.SPWidgets.defaults.peoplePicker,b,{eleUserInput:c.css("display","none").addClass("hasPickSPUser")});d.webURL||(d.webURL=g().SPServices.SPGetCurrentSite());d.maxSearchResults=parseInt(d.maxSearchResults)||50;var a=g(g.pt.pickSPUser.htmlTemplate).find(".pt-pickSPUser").clone(1).insertAfter(c);
d.eleSelected=a.find("div.pt-pickSPUser-selected").empty().on("click",".tt-delete-icon",function(){g.pt.pickSPUser.removeUser(this)});d.elePickInput=a.find("div.pt-pickSPUser-input");d.isUserAlreadySelected=function(a,b){var c="div[data-pickspuserid='"+a+"']";b&&(c+="[data-pickspusername='"+b+"']");return 0<d.eleSelected.find(c).length};d.addPeopleToList=function(a,b){var c=(new String(a)).split(";#"),f=c.length,h,l,v,q;for(h=0;h<f;h++)l=c[h],h++,v=c[h],"<userid/>"===l.toLowerCase()&&(v=d.meKeywordLabel),
q=g.pt.pickSPUser.getUserHtmlElement(d,l,v).appendTo(d.eleSelected),function(a,b,c){c=b;"<userid/>"===l.toLowerCase()&&(c=d.meKeyword);d.getSearchResults(c).done(function(c,e,d){var f=String(b).toLowerCase();g.each(c,function(b,c){if(String(c.displayName).toLowerCase()===f)return a.data("pickspuser_object",c),!1})})}(q,v,l);g.pt.addHoverEffect(d.eleSelected.find("div.pt-pickSPUser-person-cntr"));!1===d.allowMultiples&&d.elePickInput.css("display","none");g.pt.pickSPUser.storeListOfUsers(d.eleSelected,
b)};d.getSearchResults=function(a){return g.Deferred(function(b){g().SPServices({operation:"SearchPrincipals",searchText:a,maxResults:d.maxSearchResults,principalType:d.type,async:!0,webURL:d.webURL,completefunc:function(c,f){var h=g(c.responseXML),l=[];-1<String(d.meKeyword).indexOf(a.toLowerCase())&&l.push({displayName:d.meKeywordLabel,accountId:"<UserID/>",accountName:d.meKeywordLabel,accountType:"User",value:d.meKeywordLabel,label:d.meKeywordLabel});h.find("PrincipalInfo").each(function(){var a=
g(this),a={displayName:a.find("DisplayName").text(),accountId:a.find("UserInfoID").text(),accountName:a.find("AccountName").text(),accountType:a.find("PrincipalType").text(),value:a.find("DisplayName").text(),label:""};a.label+=a.displayName;l.push(a)});b.resolveWith(c,[l,c,f])}})}).promise()};!0===d.allowMultiples&&d.eleSelected.addClass("pt-pickSPUser-selected-multiple");var f={};d.elePickInput.find("input[name='pickSPUserInputField']").attr("placeholder",d.inputPlaceholder).autocomplete({minLength:d.minLength,
appendTo:d.appendTo||d.elePickInput,source:function(a,b){a.term in f?b(f[a.term]):(f[a.term]=[],d.getSearchResults(a.term).then(function(c,d,g){f[a.term].push.apply(f[a.term],c);b(f[a.term])}))},select:function(b,e){if(!1===d.allowMultiples)d.eleSelected.empty();else if(d.isUserAlreadySelected(e.item.accountId,e.item.displayName)){setTimeout(function(){b.target.value=""},50);return}var f=function(){g.pt.pickSPUser.getUserHtmlElement(d,e.item.accountId,e.item.displayName).appendTo(d.eleSelected).data("pickspuser_object",
e.item);g.pt.pickSPUser.storeListOfUsers(a);g.pt.addHoverEffect(a.find("div.pt-pickSPUser-person-cntr"));setTimeout(function(){b.target.value=""},50);!1===d.allowMultiples&&d.elePickInput.hide();g.isFunction(d.onPickUser)&&d.onPickUser.call(d.eleUserInput,g.extend({},e.item));c.trigger(g.Event("spwidget:peoplePickerAdd"),[d.eleUserInput,g.extend({},e.item)])};"-1"===e.item.accountId&&d.resolvePrincipals?g.fn.pickSPUser.resolvePrincipals({principalKeys:e.item.accountName}).then(function(a,b){e.item.accountId=
g(a).find("AccountName:contains('"+e.item.accountName+"')").parent().find("UserInfoID").text();f()}):f()}});a.data("pickSPUserContainerOpt",d);c.data("pickSPUserContainer",a);c.val()&&d.addPeopleToList(c.val(),!0);g.isFunction(d.onCreate)&&d.onCreate.call(c,c);c.trigger(g.Event("spwidget:peoplePickerCreate"),[d.eleUserInput]);return this});return this};g.fn.pickSPUser.resolvePrincipals=function(b){b=g.extend({},{principalKeys:[],principalType:"All",addToUserInfoList:!0,async:!0},b);g.isArray(b.principalKeys)||
(b.principalKeys=[b.principalKeys]);b.principalXml="";var l=/<string>/i,f,c;f=0;for(c=b.principalKeys.length;f<c;f++)l.test(b.principalKeys[f])?b.principalXml+=b.principalKeys[f]:b.principalXml+="<string>"+b.principalKeys[f]+"</string>";return g.ajax({type:"POST",cache:!1,async:b.async,url:g().SPServices.SPGetCurrentSite()+"/_vti_bin/People.asmx",contentType:"text/xml;charset=utf-8",beforeSend:function(b){b.setRequestHeader("SOAPAction","http://schemas.microsoft.com/sharepoint/soap/ResolvePrincipals")},
dataType:"xml",data:'<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><ResolvePrincipals xmlns="http://schemas.microsoft.com/sharepoint/soap/"><principalKeys>'+b.principalXml+"</principalKeys><principalType>"+b.principalType+"</principalType><addToUserInfoList>"+b.addToUserInfoList+"</addToUserInfoList></ResolvePrincipals></soap:Body></soap:Envelope>"})};g.pt.pickSPUser.getUserHtmlElement=
function(b,l,f){b=g(g.pt.pickSPUser.htmlTemplate).find(".pt-pickSPUser-person").clone(1);b.attr("data-pickSPUserID",l);b.find("span.pt-person-name").append(f).end().attr("data-pickSPUserNAME",f);return b};g.pt.pickSPUser.removeUser=function(b){var l=g(b).closest("div.pt-pickSPUser"),f=l.data("pickSPUserContainerOpt");b=g(b).closest("div.pt-pickSPUser-person");var c=b.data("pickspuser_object");g.isFunction(f.onRemoveUser)&&f.onRemoveUser.call(f.ele,f.ele,b,c);b.fadeOut("fast",function(){g(this).remove();
g.pt.pickSPUser.storeListOfUsers(l)});!1===f.allowMultiples&&f.elePickInput.show("fast",function(){f.elePickInput.find("input").focus()});f.eleUserInput.trigger(g.Event("spwidget:peoplePickerRemove"),[f.eleUserInput,c])};g.pt.pickSPUser.storeListOfUsers=function(b,l){var f=g(b).closest("div.pt-pickSPUser"),c=f.data("pickSPUserContainerOpt"),d="",a={};f.find("div.pt-pickSPUser-selected div.pt-pickSPUser-person").each(function(){var b=g(this).attr("data-pickSPUserID")+";#"+g(this).attr("data-pickSPUserNAME");
a[b]||(a[b]=!0,d&&(d+=";#"),d+=b)});c.eleUserInput.val(d);l||c.eleUserInput.change()};g.pt.pickSPUser.handleAction=function(b,l,f){b=String(b).toLowerCase();l=String(l).toLowerCase();var c=g(this).data("pickSPUserContainer").data("pickSPUserContainerOpt"),d=this;if("method"===b)switch(l){case "clear":c.eleUserInput.val("");c.eleSelected.empty();!1===c.allowMultiples&&(c.eleSelected.css("display","none"),c.elePickInput.show());break;case "destroy":g(this).hasClass("hasPickSPUser")&&g(this).removeClass("hasPickSPUser").next(".pt-pickSPUser").remove().show().trigger("change");
break;case "add":c.addPeopleToList(f);break;case "remove":f&&(b=c.eleSelected.find("div[data-pickspuserid='"+f+"']"),b.length||(b=c.eleSelected.find("div[data-pickspusername='"+f+"']")),b.length&&g.pt.pickSPUser.removeUser(b));break;case "getselected":d=g.SPWidgets.parseLookupFieldValue(c.eleUserInput.val())}return d};g.pt.pickSPUser.styleSheet="/**\n * Styles for the Pick User Widget\n */\n.pt-pickSPUser .pt-pickSPUser-selected-multiple {\n    min-height: 3em;\n}\n\n.pt-pickSPUser .pt-pickSPUser-selected .pt-pickSPUser-person {\n    float: left;\n    margin-left: .2em;\n}\n.pt-pickSPUser .pt-pickSPUser-hint {\n    font-size: .9em;\n}\n\n.pt-pickSPUser div.pt-pickSPUser-input input.ui-autocomplete {\n    width: 99%;\n}\n.pt-pickSPUser div.pt-pickSPUser-input ul.ui-autocomplete {\n    z-index: 1;\n}\n\n.pt-pickSPUser .pt-pickSPUser-person-cntr {\n    margin: .2em 0em;\n    padding: .2em;\n    position: relative;\n}\n\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-person-name {\n    padding-right: 2em;\n}\n\n/* Item action container (delete button) */\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions {\n    position: absolute;\n    right: 1px;\n    top: 1px;\n    padding: .2em;\n    display: none;\n}\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions .pt-pickSPUser-person-action-links,\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions .pt-pickSPUser-person-action-links .tt-confirm-delete {\n    float:right;\n}\n\n/* Make the action visible if we hover or we are trying to confirm a deletion */\n.pt-pickSPUser .pt-pickSPUser-person-cntr.ui-state-hover .pt-pickSPUser-person-actions,\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions.tt-confirm,\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions a {\n    display:block;\n    float: right;\n}\n\n/* autocomplete busy image */\n.ui-autocomplete-loading {\n    background: white url('/_layouts/images/loading.gif') right center no-repeat;\n}\n\n\n";
g.pt.pickSPUser.htmlTemplate='\x3c!--\n    Html Templates for the PickSPUser plugin.\n    \n    |\n    |   $Author$\n    | $Revision$\n    |     $Date$\n    |       $Id$\n    |\n--\x3e\n<div>\n    <div class="pt-pickSPUser">\n        <div class="pt-pickSPUser-selected">\n            None Selected!\n        </div>\n        <div style="clear:both"></div>\n        <div class="pt-pickSPUser-input" \n                title="Type user name above to view search results.">\n            <input name="pickSPUserInputField" value="" type="text"/>\n        </div>\n    </div>\n    \n    <div class="pt-pickSPUser-person">\n        <div class="pt-pickSPUser-person-cntr ui-state-default ui-corner-all">\n            <span class="pt-person-name"></span>\n            <div class="pt-pickSPUser-person-actions">\n                <div class="tt-record-item-action-links">\n                    <a class="tt-delete-icon" href="javascript:" onclick="jQuery.pt.pickSPUser.removeUser(this);">\n                        <img style="border: medium none; margin-right: 2px;" alt="Delete" src="/_layouts/images/delitem.gif">\n                    </a>\n                    <div style="clear:both;"></div>\n                </div>\n                <div style="clear:both;"></div>\n            </div>\n        </div>\n    </div>\n</div>\n';
g.pt.addHoverEffect=function(b){return g(b).each(function(){if(!g(this).hasClass("addHoverEffectDone")){g(this).addClass("addHoverEffectDone");var b=this;g(b).mouseenter(function(){g(b).toggleClass("ui-state-hover")});g(b).mouseleave(function(){g(b).toggleClass("ui-state-hover")})}})}})(r);(function(b){var g={isSPUploadCssDone:!1};b.SPWidgets.defaults.upload={listName:"",folderPath:"",uploadDonePage:"",onPageChange:null,onUploadDone:null,uploadUrlOpt:"",overwrite:!1,uploadPage:"",overlayClass:"",
overlayBgColor:"white",overlayMessage:"<div>Working on it</div>",selectFileMessage:"Click here to select file...",uploadDoneMessage:"Upload Successful!",fileNameErrorMessage:'A file name cannot contain any of the following characters: \\ / : * ? " &lt; &gt; | # { } % ~ &amp;',noFileErrorMessage:"No file selected!",checkInFormHeight:"25em",webURL:null,debug:!1,filenameInputSelector:"input[id$='onetidIOFile']"};b.fn.SPControlUpload=function(f){g.isSPUploadCssDone||(g.isSPUploadCssDone=!0,b('<style type="text/css">\n\n'+
g.StyleSheet+"\n\n</style>").prependTo("head"),b.SPWidgets.defaults.upload.webURL||(b.SPWidgets.defaults.upload.webURL=b().SPServices.SPGetCurrentSite()));return b(this).each(function(){var c=b.extend({},b.SPWidgets.defaults.upload,f),d;c.log=c.debug?g.log:function(){};c.showHideBusy=function(a){return b.Deferred(function(b){a?c.$busyOverlay.fadeOut("fast").promise().then(function(){b.resolve()}):c.$busyOverlay.fadeIn("slow").promise().then(function(){b.resolve()})}).promise()};c.showHideFullForm=
function(a){a?(c.$content.removeClass("spwidget-show-full-form"),c.$iframeCntr.css({overflow:"",height:""})):(c.$content.addClass("spwidget-show-full-form"),c.$iframeCntr.css({overflow:"auto",height:"auto"}));return c};c.showHideSuccess=function(a){a?c.$successCntr.stop().fadeOut().promise(function(){c.$successCntr.css("display","none")}):c.$successCntr.stop().show().promise(function(){c.$successCntr.css("display","block")});return c};c.showError=function(a){a=b.extend({},{message:"",autoHide:!0},
a);c.$errorCntrMsg.html(a.message);c.$errorCntr.stop().css("display","block");a.autoHide&&c.$errorCntr.animate({opacity:1},5E3,function(){c.clearError()});return c};c.clearError=function(){c.$errorCntr.css("display","none");return c};c.resetWidget=function(){c.ev={state:1,action:"uploading",hideOverlay:!0,pageUrl:"",page:null,isUploadDone:!1,file:{}};c.$iframe.attr("src",c.uploadPage);return c};c.getUploadedFileRow=function(){var a={};b().SPServices({operation:"GetListItems",async:!1,webURL:c.webURL,
listName:c.listName,CAMLQuery:"<Query><Where><Eq><FieldRef Name='Author' LookupId='TRUE'/><Value Type='Integer'><UserID/></Value></Eq></Where><OrderBy><FieldRef Name='Modified' Ascending='FALSE'/></OrderBy></Query>",CAMLViewFields:"<ViewFields><FieldRef Name='ID'/><FieldRef Name='EncodedAbsUrl'/><FieldRef Name='FileLeafRef' /><FieldRef Name='Author' /><FieldRef Name='Editor' /><FieldRef Name='Created' /><FieldRef Name='Modified' /></ViewFields>",CAMLRowLimit:1,CAMLQueryOptions:"<QueryOptions><ViewAttributes Scope='Recursive' /></QueryOptions>",
completefunc:function(c,d){var e=b(c.responseXML).SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0});e.length&&(a=e[0])}});return a};c.isUploadPage=function(a){var b=!1,d=document.createElement("a"),e=null;d.href=String(a).toLowerCase();c.userUploadPage?(e=document.createElement("a"),e.href=String(c.userUploadPage).toLowerCase(),d.pathname===e.pathname&&(b=!0)):b=/upload(ex)?\.aspx$/.test(d.pathname);return b};c.listName&&0!==c.listName.indexOf("{")&&(c.listName=b.pt.getListUID(c.listName));
if(!c.listName)return b(this).html('<div class="ui-state-error">Input parameter [listName] not valid!</div>'),this;c.spVersion=b.SPWidgets.getSPVersion(!0);c.userUploadPage=c.uploadPage;c.uploadPage=String(c.uploadPage);if(c.uploadPage)-1===c.uploadPage.toLowerCase().indexOf("http")&&(d="/",0==c.uploadPage.indexOf("/")&&(d=""),c.uploadPage=c.webURL+d+c.uploadPage);else switch(c.spVersion){case "2013":c.uploadPage=c.webURL+"/_layouts/15/UploadEx.aspx";break;case "2010":c.uploadPage=c.webURL+"/_layouts/UploadEx.aspx";
break;default:c.uploadPage=c.webURL+"/_layouts/Upload.aspx"}c.uploadDonePage=String(c.uploadDonePage);c.uploadDonePage||(c.uploadDonePage=c.webURL+"/_layouts/images/STS_ListItem_43216.gif");c._iframeLoadId=1;c._uploadUrlParams="?List="+b.pt.getEscapedUrl(c.listName)+"&RootFolder="+b.pt.getEscapedUrl(c.folderPath)+"&Source="+b.pt.getEscapedUrl(c.uploadDonePage)+"&"+(new Date).getTime()+"=1&"+c.uploadUrlOpt;c.uploadPage+=c._uploadUrlParams;c._lastError="";c._reloadCount=0;c.ev={state:1,action:"uploading",
hideOverlay:!0,pageUrl:"",page:null,isUploadDone:!1,file:{}};c.$ele=b(this);d={};c.overlayBgColor&&(d["background-color"]=c.overlayBgColor);c.$cntr=b(b(g.HtmlUI).filter("div.SPControlUploadUI").clone()).appendTo(c.$ele.addClass("hasSPControlUploadUI").empty()).data("SPControlUploadOptions",c);c.$buttonCntr=c.$cntr.find("div.buttonPane").click(function(a){g.onUpload(this)});c.$content=c.$cntr.find("div.mainContainer");c.$iframeCntr=c.$cntr.find("div.iFrameWindow");c.$iframe=c.$iframeCntr.children("iframe");
c.$busyOverlay=c.$cntr.find("div.loadingOverlay");c.$busyOverlayMsg=c.$busyOverlay.find("div.loadingOverlayMsg");c.$successCntr=c.$cntr.find("div.spwidget-success-cntr");c.$errorCntr=c.$cntr.find("div.spwidget-error-cntr");c.$errorCntrMsg=c.$errorCntr.find(".spwidget-msg");c.reInvalidChr=/[\/:*?"<>|#{}%~&]/;c.$successCntr.on("click",".spwidget-close",function(a){c.showHideSuccess(!0)}).find(".spwidget-msg").html(c.uploadDoneMessage);c.$errorCntr.on("click",".spwidget-close",function(a){c.clearError()});
c.$busyOverlay.addClass(c.overlayClass).css(d);c.$busyOverlayMsg.html(c.overlayMessage);c.showHideBusy();c.$cntr.find("iframe").css("height",c.checkInFormHeight).load(function(a){g.onIframeChange(c.$ele.find(".SPControlUploadUI"))}).attr("src",c.uploadPage).end();return this})};g.onUpload=function(f){var c=b(f).closest(".SPControlUploadUI"),d=c.find("iframe").contents(),a=d.find("input[type='file']").closest("tr").siblings().find("span"),h=c.data("SPControlUploadOptions");f=h.ev;h.log("Upload.onUpload("+
h._iframeLoadId+"): Start....");a.css("display","none");if(d.find("input[type='file']").val())if(h.reInvalidChr.test(d.find("div.SPControlUploadModUIFileSelected").text()))h.showError({message:h.fileNameErrorMessage});else{f.state=2;f.action="preLoad";if(h.onPageChange&&!1===h.onPageChange.call(h.$ele,f))return!1;h.showHideFullForm(!0);h.showHideBusy().then(function(){h.log("Upload.onUpload("+h._iframeLoadId+"): Clicking the OK button on upload form.");d.find("input[type='button'][id$='btnOK']").click();
if(a.is(":visible"))return h.log("Upload.onUpload("+h._iframeLoadId+"): Error message reported! \n"+a.text()),c.find(".loadingOverlay").css("display","none").end(),!1})}else h.showError({message:h.noFileErrorMessage})};g.isSPBusyAnimation=function(b){return b.find("#GearPage").length||b.find("#ms-loading-box").length?!0:!1};g.onIframeChange=function(f){var c=b(f).closest(".SPControlUploadUI"),d=c.data("SPControlUploadOptions"),a=0,h=b(c.find("iframe").contents());if(d.debug)try{d.log("Upload.onIframeChange(): ENTERING... Document readyState: "+
h[0].readyState+" IFRAME URL: "+h[0].location.href)}catch(k){}g.isSPBusyAnimation(h)?d.log("Upload.onIframeChange(): EXITING... Gear page displyed."):2===d.ev.state&&"preLoad"===d.ev.action&&!0===h[0].spcontrolupload_init_done?(d.log("Upload.onIframeChange("+d._iframeLoadId+"): Exiting! ev.action=["+d.ev.action+"] and ev.state=["+d.ev.state+"] - Nothing to do. Action handled by onUpload(). Setting action to postLoad"),d.ev.action="postLoad"):(d._iframeLoadId++,a=d._iframeLoadId,d.log("Upload.onIframeChange("+
a+"): State=["+d.ev.state+"] Action=["+d.ev.action+"]"),setTimeout(function(){if(a!==d._iframeLoadId)d.log("Upload.onIframeChange("+a+"): not latest invokation! Existing.");else{var e=d.ev,f=h.find("form").eq(0);h=b(c.find("iframe").contents());d.log("Upload.onIframeChange("+a+"): STARTING... Executing setTimeout(). URL:"+h[0].location.href);if(!0===h.spcontrolupload_init_done)d.log("Upload.onIframeChange("+a+"): EXITING!!! Page was already processed!");else{h.spcontrolupload_init_done=!0;e.pageUrl=
h[0].location.href;e.page=h;d.$iframeCntr.scrollTop(0);h.scrollTop(0);if(d.isUploadPage(e.pageUrl)){d.log("Upload.onIframeChange("+a+"): URL is the upload page!");h.find("body").css({overflow:"hidden"});f.children(":visible").hide().end().append(b(g.HtmlUI).filter("div#SPControlUploadModUI").clone()).find("div.SPControlUploadModUIFileSelected").html(d.selectFileMessage);if(RegExp(/error/i).test(b.trim(h.find(".ms-pagetitle").text()))||RegExp(/error/i).test(b.trim(h.find("title").text()))||RegExp(/error\.aspx/i).test(b.trim(h.find("form").attr("action")))){d.log("Upload.onIframeChange("+
a+"): page displaying an error... Storing it and reloading upload form.");d._lastError=h.find("[id$='LabelMessage']").text();if(1<d._reloadCount){alert("Error encountered during upload which is causing program to loop. Last upload error was: "+d._lastError);c.find(".loadingOverlay").fadeOut();return}d._reloadCount+=1;c.find("iframe").attr("src",d.uploadPage);return}if(g.isSPBusyAnimation(h)&&!h.find("input[type='file']").length){d.log("Upload.onIframeChange("+a+"): SP processing page (GearPage)... Exiting and waiting for next page...");
return}h.find("input[type='file']").closest("table").appendTo(h.find("#SPControlUploadModUI")).removeClass("ms-authoringcontrols");var k=h.find("#SPControlUploadModUI").find("input[type='file']").closest("tr").siblings().css("display","none").end().end().siblings("tr .ms-error").css("display","").end().on("change focus click",function(a){a=b(this).val();var c="",e="/_layouts/images/urn-content-classes-smartfolder16.gif";if(a){try{c=a.substr(a.lastIndexOf(".")+1)}catch(f){c="GEN"}e="/_layouts/images/IC"+
c.toUpperCase()+".GIF";a=a.replace(/\\/g,"/").split("/").pop()||a}else a=d.selectFileMessage;h.find("#SPControlUploadModUI > div").html(a).css("background-image","url('"+e+"')")}).css({cursor:"pointer",height:"100px",position:"absolute",left:"0px",top:"0px",filter:"alpha(opacity=1)",opacity:"0.01",outline:"none","-moz-opacity":"0.01","font-size":"100px","z-index":"5"});f.on("mousemove",function(a){k.css({left:a.pageX-(k.width()-50),top:a.pageY-30}).blur()});d._lastError&&(d.showError({message:d._lastError}),
d._lastError="");d._reloadCount=0;d.overwrite?h.find("input[type='checkbox'][name$='OverwriteSingle']").prop("checked","checked"):h.find("input[type='checkbox'][name$='OverwriteSingle']").prop("checked","");e.state=1;e.action="postLoad";e.hideOverlay=!0}else{d.log("Upload.onIframeChange("+d._iframeLoadId+"): File uploaded to server! Need ["+d.uploadDonePage+"] to be done.");e.state=3;e.action="postLoad";e.hideOverlay=!0;e.file=d.getUploadedFileRow();if(g.isSameUrlPage(e.pageUrl,d.uploadDonePage))d.log("Upload.onIframeChange("+
d._iframeLoadId+"): Upload widget process DONE!"),e.isUploadDone=!0,e.hideOverlay=!1,d.showHideBusy(),d.showHideSuccess();else if(d.log("Upload.onIframeChange("+d._iframeLoadId+"): Post Upload Form being displayed! Hooking into form.onsubmit!"),f.length){var m=f.prop("onsubmit"),x=f.find(d.filenameInputSelector).eq(0);x.length&&(f.children(":visible").css("display","none").addClass("ptWasVisible"),x.closest("div[id^='WebPart']").appendTo(f).css("display","").removeClass("ptWasVisible"));f[0].onsubmit=
function(){d.log("Upload.onIframeChange("+a+"): iframe form.onsubmit triggered!");d.showHideBusy();var c=!0;b.isFunction(d.onPageChange)&&(c=d.onPageChange.call(d.$ele,b.extend({},e,{state:3,action:"preLoad"})));if(!1===c)return d.showHideBusy(!0),c;b.isFunction(m)&&(c=m());if(!1===c)return d.showHideBusy(!0),c;d.showHideFullForm(!0);return c}}b(c.find("iframe")[0].contentWindow).unload(function(a){d.log("Upload.onIframeChange("+d._iframeLoadId+"): iframe.unload() triggered!");d.showHideBusy();d.showHideFullForm(!0);
if(b.isFunction(d.onPageChange))return d.onPageChange.call(d.$ele,b.extend({},e,{state:3,action:"preLoad"}))})}d.log("Upload.onIframeChange("+d._iframeLoadId+"): iframe page setup done!");d.onPageChange&&d.onPageChange.call(d.$ele,e);if("postload"!==e.action.toLowerCase()||!0===e.hideOverlay)d.showHideBusy(!0),!1===e.isUploadDone&&3===e.state&&d.showHideFullForm();e.isUploadDone&&(d.resetWidget(),d.$successCntr.animate({opacity:1},3E3,function(){d.showHideSuccess(!0)}),b.isFunction(d.onUploadDone)&&
d.onUploadDone.call(d.$ele,e.file))}}},500))};g.isSameUrlPage=function(b,c){if(!b||!c)return!1;var d=function(a){var b=document.createElement("a");b.href=a;return unescape(b.pathname)},a=String(d(b)).toLowerCase(),d=String(d(c)).toLowerCase();return a===d};b.pt.getEscapedUrl=escapeProperly;b.pt.getUnEscapedUrl=unescapeProperly;b.pt.getListUID=function(f){if(!f)return"";var c="";if(b.pt._cache["getListUID:"+f])return c=b.pt._cache["getListUID:"+f];b().SPServices({operation:"GetList",listName:f,async:!1,
completefunc:function(d,a){c=b(d.responseXML).find("List").attr("ID")}});c&&(b.pt._cache["getListUID:"+f]=c);return c};g.log=function(){var f,c,d=1,a=0,h=!1,g=!1,e=["#FFFFFF","#F5F5F2"];"undefined"===typeof console||"undefined"===typeof console.debug?f=function(){var b,f,h="";b=0;for(f=arguments.length;b<f;b++)h+='<div style="padding: .1em .1em;background-color:'+e[a]+'"><span>['+d+"] </span>"+arguments[b]+"</div>",d++,a=1===a?0:1;h&&(c.append(h),c.dialog("isOpen")||c.dialog("open"))}:h=!0;return function(){g||
(g=!0,h||(c=b("<div><h2>SPWidgets Debug Output</h2></div>").appendTo("body").dialog({title:"Debug output",height:300})));if(h){var a,e;a=0;for(e=arguments.length;a<e;a++)console.debug(arguments[a])}else f.apply(this,arguments)}}();g.StyleSheet="/**\n * FILE: jquery.SPControlUpload.css\n * \n * \n */\n.spcontrolupload .mainContainer {\n\tposition: relative;\n\tdisplay:block;\n\theight: 4em;\n}\n\n.spcontrolupload .iFrameWindow,\n.spcontrolupload .buttonPane,\n.spcontrolupload .spwidget-success-cntr,\n.spcontrolupload .loadingOverlay {\n    position: absolute;\n    top: 0px;\n    height: 3em;\n    width: 100%;\n}\n.spcontrolupload .buttonPane {\n    left: 0px;\n    width: 10%;\n    overflow: hidden;\n    cursor: pointer;\n}\n.spcontrolupload .buttonPane .upload_button {\n    font-weight: bold;\n    font-size: 1.1em;\n    text-align: center;\n    margin-top: .8em;\n}\n\n.spcontrolupload .iFrameWindow {\n    width: 90%;\n    left: 10%;\n    overflow: hidden;\n}\n.spcontrolupload .iFrameWindow iframe {\n\toverflow: auto;\n\twidth: 100%;\n\theight: 99%;\n}\n\n.spcontrolupload .spwidget-show-full-form .iFrameWindow {\n    overflow: auto;\n    width: 100%;\n    margin: 0em;\n    left: 0px;\n    right: auto;\n    z-index: 5;\n}\n\n.spcontrolupload .loadingOverlayMsg {\n\tfont-size: 1em;\n\tbackground-position: left top;\n    background-repeat: no-repeat;\n    background-image: url('/_layouts/images/loadingcirclests16.gif');\n    margin: 0.5em;\n    padding-left: 25px;\n}\n\n.spcontrolupload .spwidget-success-cntr,\n.spcontrolupload .spwidget-error-cntr {\n    display: none;\n}\n.spcontrolupload div.spwidget-msg-cntr {\n    margin: 0.5em .5em .5em 3em;\n\tfont-size: 1em;\n\tbackground-position: left top;\n    background-repeat: no-repeat;    \n}\n.spcontrolupload .spwidget-close {\n    color: red;\n    font-size: xx-small;\n    font-weight: bold;\n    vertical-align: super;\n    cursor: pointer;\n}\n\n.spcontrolupload .spwidget-success-cntr div.spwidget-msg-cntr {\n    background-image: url('/_layouts/images/STS_ListItem_43216.gif');\n    padding-left: 30px;\n}\n\n.spcontrolupload .spwidget-error-cntr {\n    bottom: -1.5em;\n    left: 0px;\n    width: 100%;\n    position: absolute;\n}\n\n/* For debug/dev purpose. Add it to .spcontrolupload container */\n.spcontrolupload-dev-mode .iFrameWindow {\n    overflow: auto !important;\n    height: auto !important;\n    z-index: 5 !important;\n}\n.spcontrolupload-dev-mode .iFrameWindow iframe {\n    overflow: scroll !important;\n}\n\n";
g.HtmlUI='<div class="SPControlUploadUI spcontrolupload">\n    <div class="mainContainer">\n        <div class="buttonPane ui-state-default">\n            <div class="upload_button">\n                Upload\n            </div>\n        </div>\n        <div class="iFrameWindow ui-state-default">\n            <iframe name="SPControlUploadUI" frameborder="0" scrollbars="yes" scrolling="yes"></iframe>\n        </div>\n        <div class="loadingOverlay ui-widget-content">\n            <div class="loadingOverlayMsg"></div>\n        </div>\n        <div class="spwidget-success-cntr ui-widget-content">\n            <div class="spwidget-msg-cntr">\n                <span class="spwidget-msg">Upload Successful!</span> \n                <span class="spwidget-close">x</span> \n            </div>\n        </div>\n        <div class="spwidget-error-cntr ui-state-error">\n            <div class="spwidget-msg-cntr">\n                <span class="spwidget-msg">Error</span> \n                <span class="spwidget-close">x</span> \n            </div>\n        </div>\n    </div>\n</div>\n\n<div id="SPControlUploadModUI" \n    style="\n        position:   absolute;\n        width:      99.9%;\n        height:     99.9%;\n        left:       0px;\n        top:        0px;\n        padding-left:       .5em;\n        background-color:   white;">\n    <div class="SPControlUploadModUIFileSelected"\n        style="\n        background-position: left center;\n        background-repeat: no-repeat;\n        background-image: url(\'/_layouts/images/urn-content-classes-smartfolder16.gif\');\n        padding: 0.5em 2em;">Select...</div>\n</div>\n'})(r);
(function(b){var g={isInitDone:!1,evNamespace:".spwidgets.spdatefield"};b.SPWidgets.defaults.date={allowMultiples:!1,delimeter:";",remainOpen:!0,datepicker:{dateFormat:"mm/dd/yy",buttonImage:"/_layouts/images/CALENDAR.GIF",showOn:"both",buttonImageOnly:!0},dateTemplate:'{{date}} <span class="spwidgets-item-remove">[x]</span>',showTimepicker:!1,timeFormat:" {{hour}}:{{minutes}} {{ampm}}",timeUTC:!0,labelHour:"Hour",labelMinutes:"Minutes",labelAMPM:"AM|PM",labelTime:"Time",labelSet:"Set",onSelect:null};
b.fn.SPDateField=function(f){var c=arguments,d=this;g.isInitDone||(g.isInitDone=!0,""!==g.styleSheet&&b('<style type="text/css">\n\n'+g.styleSheet+"\n\n</style>").prependTo("head"),b("body").on("click"+g.evNamespace,g.onPageClick));return"string"===typeof f?function(){var a=String(c[0]).toLowerCase(),f=d;b(d).each(function(g,e){if(b(d).hasClass("hasSPDateField")){var l=b(e),n=l.data("SPDateFieldInstance");if(n&&0<l.length)switch(a){case "getdate":f=n.getDate();break;case "setdate":c[1]&&n.setDate({date:c[1],
format:c[2]||n.opt.datepicker.dateFormat});break;case "removedate":c[1]&&n.removeDate({date:c[1],format:c[2]||n.opt.datepicker.dateFormat});break;case "reset":n.reset();break;case "destroy":n.destroy()}}});return f}():this.each(function(){var a={$ele:b(this).addClass("hasSPDateField"),isInline:!1,inlineCntr:null};if(!a.$ele.is("input[type='text']")){if(a.$ele.is(":input"))return;a.isInline=!0;a.inlineCntr=b(this);a.$ele=b('<input name="spdatefieldinline" value="" type="text" style="display:none" />')}a.opt=
b.extend(!0,{},b.SPWidgets.defaults.date,f);a.$ui=b(g.htmlTemplate).filter("div.spwidget-date-cntr").clone();a.isInline?(a.$ui.appendTo(a.inlineCntr).addClass("spwidget-inline").css("display","none"),a.$ele.appendTo(a.$ui)):a.$ui.insertAfter(a.$ele).css("display","none");a.eleOrigVal=a.$ele.val();a.$ele.val("");a.$input=a.$ui.find("input[name='SPDateFieldInput']").val(a.$ele.val());a.$inputCntr=a.$input.closest(".spwidget-date-input-cntr");a.$dtCntr=a.$ui.find("div.spwidget-date-selected-cntr");a.getDate=
function(){var b={input:a.$ele.val(),dates:[]};b.input&&(a.opt.allowMultiples?b.dates=b.input.split(a.opt.delimeter):b.dates.push(b.input));return b};a.reset=function(){a.$input.val("").datepicker("hide");a.$ele.val("").change();a.$dtCntr.empty();return a};a.setDate=function(c){var d=b.extend({},{date:"",time:"",format:a.opt.datepicker.dateFormat,setDatepicker:!0,triggerEvent:!0},c),e=a.$ele.val(),f="",g;if(!d.date)return a;b.isArray(d.date)||(d.date=[d.date]);b.each(d.date,function(c,h){var l=h,
q="",t="";if(!(l instanceof Date))if(l=String(l),-1<l.indexOf("T"))l=b.SPWidgets.parseDateString(l);else try{l=b.datepicker.parseDate(d.format,h)}catch(u){return a}g=l;q=b.datepicker.formatDate("yy-mm-dd",l);t=b.datepicker.formatDate(a.opt.datepicker.dateFormat,l);a.opt.showTimepicker&&(q=b.SPWidgets.SPGetDateString(l,a.opt._timeFmt),t+=a.$timepicker.formatTime(l));a.opt.allowMultiples?0>e.indexOf(q)&&(e&&(e+=a.opt.delimeter),e+=q,f+='<span class="spwidgets-item" data-spwidget_dt1="'+q+'" data-spwidget_dt2="'+
t+'">'+b.SPWidgets.fillTemplate({tmplt:a.opt.dateTemplate,data:{date:t}})+" </span>"):(e=q,f=t)});a.opt.allowMultiples?a.$dtCntr.append(f):d.setDatepicker&&(a.$input.val(f),a.isInline&&!a.opt.showTimepicker?a.$inputCntr.datepicker("setDate",g):a.isInline&&a.$timepicker.updateDateTimeWidgets(g));a.$ele.val(e);d.triggerEvent&&(a.isInline||a.$ele.change(),b.isFunction(a.opt.onSelect)&&a.opt.onSelect.call(a.isInline?a.inlineCntr:a.$ele));return a};a.removeDate=function(c){var d=b.extend({},{date:"",format:a.opt.datepicker.dateFormat},
c),e=a.getDate();if(!d.date)return a;b.isArray(d.date)||(d.date=[d.date]);b.each(d.date,function(c,f){var h=f,g="",l="";if(!(h instanceof Date))try{h=b.datepicker.parseDate(d.format,f)}catch(q){return a}g=a.opt.showTimepicker?b.SPWidgets.SPGetDateString(h,a.opt._timeFmt):b.datepicker.formatDate("yy-mm-dd",h);l=RegExp("("+a.opt.delimeter+")?"+g,"g");e.input=e.input.replace(l,"");a.opt.allowMultiples&&a.$dtCntr.find("span[data-spwidget_dt1='"+g+"']").remove()});e.input=e.input.replace(RegExp("^"+a.opt.delimeter),
"").replace(RegExp(a.opt.delimeter+"$"),"");a.$ele.val(e.input).change();return a};a.destroy=function(){a.$ele.removeData("SPDateFieldInstance");a.$ele.removeClass("hasSPDateField").css("display","");a.$ui.css("display","none");a.$input.datepicker("hide");a.$input.datepicker("destroy");a.$timepicker&&(a.$timepicker.$timePicker.off(".spdatefield"),a.$input.off(".spdatefield"));a.isInline&&a.inlineCntr.removeClass("hasSPDateField").removeData("SPDateFieldInstance");a.$ui.remove()};a.createDatePicker=
function(){var c={};if(a.opt.showTimepicker){c.$selectorCntr=b(g.htmlTemplate).filter("div.spwidget-datetime-selector").clone().appendTo(a.$inputCntr).css("display","none");c.$datePicker=c.$selectorCntr.find("div.spwidget-date-selector");c.$timePicker=c.$selectorCntr.find("div.spwidget-time-selector");c.$setButton=c.$selectorCntr.find("div.spwidget-btn-set");c.$hourSelect=c.$timePicker.find("select.spwidget-hour");c.$minSelect=c.$timePicker.find("select.spwidget-min");c.$ampmSelect=c.$timePicker.find("select.spwidget-ampm");
c.heightDone=!1;c.firstShowDone=!1;c.getTime=function(){var a={hour:c.$hourSelect.val(),minutes:c.$minSelect.val(),ampm:c.$ampmSelect.val()};a.hour24=a.hour;"PM"===a.ampm&&"12"!==a.hour?a.hour24=String(parseInt(a.hour)+12):"AM"===a.ampm&&"12"===a.hour&&(a.hour24="0");return a};c.formatTime=function(d){var e=d,f="";d instanceof Date?(e={hour:d.getHours(),hour24:String(d.getHours()),minutes:String(d.getMinutes()),ampm:"AM"},12<e.hour?(e.hour=String(e.hour-12),e.ampm="PM"):12===e.hour&&(e.ampm="PM"),
e.hour=String(e.hour),"0"===e.hour&&(e.hour="12"),2>String(e.minutes).length&&(e.minutes="0"+e.minutes)):d||(e=c.getTime());return f=b.SPWidgets.fillTemplate(a.opt.timeFormat,e)};c.setDateTime=function(b){var e=c.getTime();b instanceof Date||(b=c.$datePicker.datepicker("getDate"),null===b&&(b=new Date));b.setHours(e.hour24);b.setMinutes(e.minutes);a.setDate({date:b,format:a.opt.datepicker.dateFormat,setDatepicker:!0});c.execUsersCallback(a.$input.val())};c.updateDateTimeWidgets=function(a){var b;
a instanceof Date||(a=new Date);b=a.getHours();0===b?b="12":12<b&&(b-=12);c.$hourSelect.val(b);for(b=a.getMinutes();b%5;)--b;10>b&&(b="0"+b);c.$minSelect.val(b);11<a.getHours()?c.$ampmSelect.val("PM"):c.$ampmSelect.val("AM");c.$datePicker.datepicker("setDate",a)};c.showPicker=function(){c.$selectorCntr.show(function(){var d;c.heightDone||(c.heightDone=!0,b.SPWidgets.makeSameHeight(c.$datePicker.find("div.ui-datepicker-inline").add(c.$timePicker)));c.firstShowDone||(c.firstShowDone=!0,d=a.getDate(),
d=d.dates.length?b.SPWidgets.parseDateString(d.dates[d.dates.length-1]):new Date,c.updateDateTimeWidgets(d))}).position({my:"left top",at:"left bottom",of:a.$input})};c.execUsersCallback=function(d,e){b.isFunction(a.opt.datepicker._onSelect)&&a.opt.datepicker._onSelect.call(c.$datePicker,d,e)};a.opt.datepicker.altFormat="";a.opt.datepicker.altField="";if(a.opt.datepicker.buttonImage&&!a.isInline)b('<img class="ui-datepicker-trigger" src="'+a.opt.datepicker.buttonImage+'" alt="..." title="...">').appendTo(a.$inputCntr).on("click"+
g.evNamespace,function(){c.showPicker()});if(a.opt.allowMultiples||a.isInline)c.$selectorCntr.addClass("spwidget-date-multiples-cntr"),c.$setButton.find("div.spwidget-btn").button({label:a.opt.labelSet}).on("click"+g.evNamespace,function(a){c.setDateTime();return this});c.$timePicker.find("div.ui-widget-header").html(a.opt.labelTime).end().find("div.spwidget-time-hour > label").html(a.opt.labelHour).end().find("div.spwidget-time-min > label").html(a.opt.labelMinutes).end().find("div.spwidget-time-ampm > label").html(a.opt.labelAMPM).end();
b.isFunction(a.opt.datepicker.onSelect)&&(a.opt.datepicker._onSelect=a.opt.datepicker.onSelect);a.opt.datepicker.numberOfMonths=1;a.opt.datepicker.onSelect=function(b,d){if(a.opt.allowMultiples||a.isInline)return this;c.setDateTime(new Date(d.currentYear,d.currentMonth,d.currentDay))};c.$datePicker.datepicker(a.opt.datepicker);c.$timePicker.on("change"+g.evNamespace+" keyup"+g.evNamespace,"select",function(b){b.stopPropagation();b.preventDefault();if(a.opt.allowMultiples||a.isInline)return this;c.setDateTime();
return this});a.isInline&&(a.$input.css("display","none"),c.$selectorCntr.addClass("spwidget-inline").css("display",""));if(!a.isInline)a.$input.on("focus"+g.evNamespace,function(){c.showPicker()})}else a.opt.allowMultiples&&a.opt.remainOpen&&(a.opt.datepicker.showAnim=""),b.isFunction(a.opt.datepicker.onSelect)&&(a.opt.datepicker._onSelect=a.opt.datepicker.onSelect),a.opt.datepicker.onSelect=function(c,d){a.setDate({date:c,format:d.settings.dateFormat,setDatepicker:!1});b.isFunction(a.opt.datepicker._onSelect)&&
a.opt.datepicker._onSelect.call(this,c,d);a.opt.allowMultiples&&a.$input.val("");a.opt.allowMultiples&&(a.opt.remainOpen&&!a.isInline)&&setTimeout(function(){a.$input.datepicker("show")},5)},a.isInline?(a.$inputCntr.datepicker(a.opt.datepicker),a.$input.css("display","none")):a.$input.datepicker(a.opt.datepicker);return c};a.opt._timeFmt=a.opt.timeUTC?"utc":"local";a.opt.datepicker.altFormat="yy-mm-dd";a.opt.datepicker.altField=a.$ele;a.opt.allowMultiples&&(a.opt.datepicker.altFormat="",a.opt.datepicker.altField=
"",a.$dtCntr.css("display","").on("click",".spwidgets-item-remove",function(c){c=b(c.target).closest(".spwidgets-item").data("spwidget_dt1");a.opt.allowMultiples&&(c=b.SPWidgets.parseDateString(c));a.removeDate({date:c,format:"yy-mm-dd"})}));a.$ele.css("display","none").data("SPDateFieldInstance",a);a.isInline&&a.inlineCntr.data("SPDateFieldInstance",a);a.$timepicker=a.createDatePicker();a.eleOrigVal&&a.setDate({date:a.eleOrigVal.split(a.opt.delimeter),format:"yy-mm-dd",triggerEvent:!1});a.$input.on("change",
function(b){b.stopPropagation();a.$ele.change()});a.$ui.css("display","")})};g.onPageClick=function(f){f=b(f.target);var c=b("div.spwidget-datetime-selector:visible:not('.spwidget-inline')"),d=null;if(!b.contains(document.documentElement,f[0]))return this;c.length&&(d=f.closest("div.spwidget-datetime-selector"),!d.length&&f.is("input.spwidget-date-datepicker,.ui-datepicker-trigger")&&(d=f.parent().find("div.spwidget-datetime-selector")),c.not(d).hide());return this};g.styleSheet='.spwidget-date-cntr {\n    display: inline-block;   \n    position: relative;\n}\n.spwidget-date-cntr div.spwidget-date-input-cntr {\n    position: relative;\n}\n.spwidget-date-cntr input {\n    width: 99%;\n}\n.spwidget-date-cntr img.ui-datepicker-trigger {\n    display: block;\n    position: absolute;\n    right: 2%;\n    top: .3em;\n}\n\n.spwidget-date-cntr .spwidgets-item-remove {\n    color: red;\n    font-size: xx-small;\n    vertical-align: super;\n    cursor: pointer;\n}\n/** --------------------------- Date and Time picker -- */\n.spwidget-date-cntr div.spwidget-datetime-selector {\n    padding: .5em;\n    position: absolute;\n    width: 28em;\n    z-index: 1;\n}\n.spwidget-date-cntr div.spwidget-datetime-selector div.ui-datepicker-inline {\n    width: 14em;\n}\n\n.spwidget-date-cntr div.spwidget-datetime-selector div.spwidget-date-selector,\n.spwidget-date-cntr div.spwidget-datetime-selector div.spwidget-time-selector {\n    float: left;\n}\n.spwidget-date-cntr div.spwidget-selectors:before,\n.spwidget-date-cntr div.spwidget-selectors:after {\n    content: "";\n    display: table;\n    line-height: 0;\n}\n.spwidget-date-cntr div.spwidget-selectors:after {\n    clear: both;    \n}\n.spwidget-date-cntr div.spwidget-datetime-selector select.spwidget-hour,\n.spwidget-date-cntr div.spwidget-datetime-selector select.spwidget-min,\n.spwidget-date-cntr div.spwidget-datetime-selector select.spwidget-ampm {\n    font-size: 1.2em;\n}\n/* Time selector */\n.spwidget-date-cntr div.spwidget-time-selector {\n    margin-left: .2em;\n    width: 11em;\n}\n.spwidget-date-cntr div.spwidget-time-selector-cntr {\n    padding: .2em;\n}\n.spwidget-date-cntr div.spwidget-time-selector div.ui-widget-header {\n    text-align: center;\n    line-height: 2em;\n    margin-bottom: .5em;\n}\n.spwidget-date-cntr .spwidget-time-hour,\n.spwidget-date-cntr .spwidget-time-min,\n.spwidget-date-cntr .spwidget-time-ampm {\n    margin-top: .2em;\n    padding: .2em;\n}\n.spwidget-date-cntr .spwidget-time-selector-cntr select,\n.spwidget-date-cntr .spwidget-time-selector-cntr label {\n    overflow: hidden;\n    display: inline-block;\n    font-weight: bold;\n}\n.spwidget-date-cntr .spwidget-time-selector-cntr select {\n    width: 4em;\n}\n.spwidget-date-cntr .spwidget-time-selector-cntr label {\n    width: 5em;\n    font-size: .9em;\n}\n\n/* inline mode */\n.spwidget-date-cntr .spwidget-inline div.spwidget-datetime-selector {\n    position: relative;\n    width: 26em;\n}\n\n.spwidget-btn-set {\n    display: none;\n    position: absolute;\n    right: .2em;\n    bottom: .2em;\n}\n.spwidget-date-multiples-cntr .spwidget-btn-set {\n    display: block;\n}\n';
g.htmlTemplate='<div class="spwidget-date-cntr">\n    <div class="spwidget-date-selected-cntr" style="display:none;"></div>\n    <div class="spwidget-date-input-cntr">\n        <input class="spwidget-date-datepicker" name="SPDateFieldInput" value="" />\n    </div>\n</div>\n<div class="spwidget-datetime-selector ui-widget-content ui-corner-all">\n    <div class="spwidget-selectors">\n        <div class="spwidget-date-selector"></div>\n        <div class="spwidget-time-selector ui-widget-content ui-corner-all">\n            <div class="spwidget-time-selector-cntr">\n                <div class="ui-widget-header ui-helper-clearfix ui-corner-all">\n                    Time\n                </div>\n                <div class="spwidget-time-hour">\n                    <label>Hour</label>\n                    <select name="spwidget_hour" class="spwidget-hour">\n                        <option value="1"> 1</option>\n                        <option value="2"> 2</option>\n                        <option value="3"> 3</option>\n                        <option value="4"> 4</option>\n                        <option value="5"> 5</option>\n                        <option value="6"> 6</option>\n                        <option value="7"> 7</option>\n                        <option value="8"> 8</option>\n                        <option value="9"> 9</option>\n                        <option value="10">10</option>\n                        <option value="11">11</option>\n                        <option value="12">12</option>\n                    </select>\n                </div>\n                <div class="spwidget-time-min">   \n                    <label>Minutes</label>\n                    <select name="spwidget_min" class="spwidget-min">\n                        <option value="00">00</option>\n                        <option value="05">05</option>\n                        <option value="10">10</option>\n                        <option value="15">15</option>\n                        <option value="20">20</option>\n                        <option value="25">25</option>\n                        <option value="30">30</option>\n                        <option value="35">35</option>\n                        <option value="40">40</option>\n                        <option value="45">45</option>\n                        <option value="50">50</option>\n                        <option value="55">55</option>\n                    </select>\n                </div>\n                <div class="spwidget-time-ampm">\n                    <label>AM|PM</label>\n                    <select name="spwidget_ampm" class="spwidget-ampm">\n                        <option value="AM">AM</option>\n                        <option value="PM">PM</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="spwidget-btn-set">\n        <div class="spwidget-btn">\n            Set\n        </div>\n    </div>\n</div>\n'})(r);
(function(b){var g={isInitDone:!1,templates:null};b.SPWidgets.defaults.filter={list:"",webURL:b().SPServices.SPGetCurrentSite(),columns:["Title"],textFieldTooltip:"Use a semicolon to delimiter multiple keywords.",peopleFieldTooltip:"Use [me] keyword to represent current user",definedClass:"spwidget-column-dirty",showFilterButton:!0,showFilterButtonTop:!0,showSortButton:!0,filterButtonLabel:"Filter",orderButtonLabel:"Sort",onFilterClick:null,onReady:null,onReset:null,ignoreKeywords:/^(of|and|a|an|to|by|the|or|from)$/i,
delimeter:";"};b.fn.SPFilterPanel=function(f){var c=arguments;g.isInitDone||(g.isInitDone=!0,""!==g.styleSheet&&b('<style type="text/css">\n\n'+g.styleSheet+"\n\n</style>").prependTo("head"),g.templates=b(g.htmlTemplate));return"string"===typeof f?this.eq(0).hasClass("hasSPFilterPanel")?function(b){b=b.eq(0).find("div.spwidget-filter").data("SPFilterPanelInst");var a=f.toLowerCase(),h=b.$ele;switch(a){case "getfilter":h=g.getFilterValues(b);break;case "setfilter":g.setFilterValues(b,c[1]);break;case "reset":g.doResetFilter(b);
break;case "destroy":b.$ele.removeClass("hasSPFilterPanel").empty()}return h}(this):void 0:this.each(function(){var c=b.extend({},b.SPWidgets.defaults.filter,f),a={$ele:b(this),$ui:null,$uiFilterSortCntr:null,$uiFilterColumnCntr:null,$uiSortButtons:null,opt:c,getListDefinition:function(){return b.Deferred(function(a){b().SPServices({operation:"GetList",listName:c.list,cacheXML:!0,async:!0,webURL:c.webURL,completefunc:function(c,d){var f=b(c.responseXML);"error"===d?a.rejectWith(f,[c,d]):f.SPMsgHasError()?
a.rejectWith(f,[c,d]):a.resolveWith(f,[c,d])}})}).promise()},showSortOrder:function(){a.$uiFilterColumnCntr.hide();a.$uiFilterSortCntr.show()},showFilterColumns:function(){a.$uiFilterSortCntr.hide();a.$uiFilterColumnCntr.show()},buildWidget:function(){return b.Deferred(function(c){a.getListDefinition().then(function(d,e){var p=this,n="",m=g.templates.filter("#filter_column").html();a.$ui=b(g.templates.filter("#filter_main_ui").html()).appendTo(a.$ele.empty().addClass("hasSPFilterPanel"));a.$uiFilterColumnCntr=
a.$ui.find("div.spwidget-filter-column-cntr");a.$uiFilterSortCntr=a.$ui.find("div.spwidget-filter-sort-cntr");a.$list=p;b.each(a.opt.columns,function(c,d){var e=p.find("Field[DisplayName='"+d+"']"),f=m,h="",k=null;e.length||(e=p.find("Field[Name='"+d+"']"));if(e.length){k={type:null,otherFilterTypes:"",sp_type:e.attr("Type"),sp_format:e.attr("Format"),Name:e.attr("Name"),DisplayName:e.attr("DisplayName")};switch(e.attr("Type")){case "Choice":case "MultiChoice":e.find("CHOICES CHOICE").each(function(a,
c){h+=b.SPWidgets.fillTemplate(g.templates.filter("#filter_choice_field").html(),{DisplayName:e.attr("DisplayName"),Name:e.attr("Name"),value:b(c).text()})});f=f.replace(/__COLUMN__UI__/,h).replace(/__OTHER_FILTER_TYPES__/,"");f=b.SPWidgets.fillTemplate(f,{DisplayName:e.attr("DisplayName"),type:"choice",Name:e.attr("Name")});break;case "Attachments":k.type="boolean";k.input_ui='<select name="'+k.Name+'" class="spwidget-input spwidget-filter-input"><option value=""></option><option value="1">Yes</option><option value="0">No</option></select>';
f=b.SPWidgets.fillTemplate(f.replace(/__COLUMN__UI__/,k.input_ui).replace(/__OTHER_FILTER_TYPES__/,""),k);break;case "Lookup":case "LookupMulti":null===k.type&&(k.type="lookup",k.list=e.attr("List"),"Self"===k.list&&(k.list=p.find("List").attr("Title")));case "User":case "UserMulti":null===k.type&&(k.type="people");case "Counter":null===k.type&&(k.type="text",k.otherFilterTypes='<option value="Gt">Greater Than</option><option value="Lt">Less Than</option>');case "DateTime":null===k.type&&(k.type=
"date",k.otherFilterTypes='<option value="Gt">After</option><option value="Lt">Before</option>',k.sp_format="DateOnly"!==e.attr("Format")?"DateTime":"DateOnly");default:null===k.type&&(k.type="text"),h=g.templates.filter("#filter_text_field").html(),f=f.replace(/__COLUMN__UI__/,h).replace(/__OTHER_FILTER_TYPES__/,k.otherFilterTypes),f=b.SPWidgets.fillTemplate(f,b.extend(k,{DisplayName:e.attr("DisplayName"),Name:e.attr("Name"),tooltip:a.opt.textFieldTooltip}))}n+=f}});a.$uiFilterColumnCntr.html(n);
a.$ele.find("div.spwidget-type-lookup input").each(function(){var a=b(this);a.SPLookupField({list:a.closest("div.spwidget-column").data("spwidget_list"),template:'<div>{{Title}} <span class="spwidgets-item-remove">[x]</span></div>',listTemplate:"{{Title}}",allowMultiples:!0,readOnly:!1,filter:"",showSelector:!0});a.parent().find(".spwidget-tooltip").remove()});a.$ele.find("div.spwidget-type-people input").each(function(){var c=b(this),d="User";"PeopleOnly"!==p.find("Field[Name='"+c.attr("name")+"']").attr("UserSelectionMode")&&
(d="All");c.pickSPUser({allowMultiple:!0,type:d});c.parent().find(".spwidget-tooltip").html(a.opt.peopleFieldTooltip)});a.$ele.find("div.spwidget-type-date").each(function(){var a=b(this);a.find("input").SPDateField({allowMultiples:!0,showTimepicker:"DateTime"===a.data("spwidget_sp_format")?!0:!1});a.find(".spwidget-tooltip").remove();a.find("select.spwidget-filter-type").val("Eq").find("option[value='Contains']").remove();return this});a.$ele.find(".spwidget-type-boolean div.spwidget-filter-type-cntr").css("display",
"none");a.opt.showSortButton||a.$ui.find("button[name='order']").remove();a.opt.showFilterButton||a.opt.showFilterButtonTop?a.$ui.find("div.spwidget-filter-button-cntr").each(function(){var c=b(this),d=b();a.opt.showFilterButtonTop&&(d=d.add(c.clone(!0)).prependTo(a.$ui));a.opt.showFilterButton?d=d.add(c):c.remove();d.find("button[name='filter']").button({icons:{primary:"ui-icon-search"},label:a.opt.filterButtonLabel}).on("click",g.onFilterButtonClick);d.find("button[name='reset']").button({icons:{primary:"ui-icon-arrowreturnthick-1-n"},
text:!1}).on("click",function(b){g.doResetFilter(a);return this});a.$uiSortButtons=d.find("button[name='order']").button({icons:{primary:"ui-icon-arrow-2-n-s"},label:a.opt.orderButtonLabel}).on("click",function(c){b(this);a.$uiFilterSortCntr.is(":visible")?a.showFilterColumns():a.showSortOrder();return this})}):a.$ui.find("div.spwidget-filter-button-cntr").remove();a.$ui.on("change.SPWigets.SPFilterPanel","select.spwidget-filter-type",g.onFilterTypeChange);if(""!==a.opt.definedClass)a.$ui.on("change.SPWidgets.SPFilterPanel",
".spwidget-filter-input",g.onFilterInputChange);a.$ui.data("SPFilterPanelInst",a);b.isFunction(a.opt.onReady)&&a.opt.onReady.call(a.$ele,f);a.$ui.fadeIn().promise().then(function(){b(this).css("display","");c.resolve()})}).fail(function(b,d){a.$ele.html('<div class="ui-state-error">Unable to retrieve list information. '+this.SPGetMsgError()+"</div>");c.reject()})}).promise()}};a.opt.ignoreKeywords&&!a.opt.ignoreKeywords instanceof RegExp&&(a.opt.ignoreKeywords=/Inst.opt.ignoreKeywords/i);a.buildWidget();
return this})};g.onFilterInputChange=function(f){var c=b(this);f=c.closest("div.spwidget-filter-value-input");var d=f.closest("div.spwidget-column"),a=d.find("div.spwidget-filter-type-cntr select.spwidget-filter-type").val(),c=c.val(),g=f.closest("div.spwidget-filter").data("SPFilterPanelInst");d.is(".spwidget-type-choice")&&(f.find(".spwidget-filter-input:checked").length||(c=""));""!==c?d.addClass(g.opt.definedClass):"IsNull"!==a&&"IsNotNull"!==a&&d.removeClass(g.opt.definedClass);return this};
g.onFilterTypeChange=function(f){var c=b(this);f=c.closest("div.spwidget-column");var d=f.find("div.spwidget-filter-type-cntr select.spwidget-match-type"),a=f.find("div.spwidget-filter-value-cntr"),g=a.find(".spwidget-input"),k="",e=f.data("spwidget_column_type"),l=c.val(),c=c.closest("div.spwidget-filter").data("SPFilterPanelInst");"IsNull"===l||"IsNotNull"===l?(a.addClass("spwidget-disabled"),g.attr("disabled","disabled"),d.attr("disabled","disabled"),f.addClass(c.opt.definedClass)):(a.removeClass("spwidget-disabled"),
g.removeAttr("disabled","disabled"),d.removeAttr("disabled"),"choice"===e||"multichoice"===e?g.filter(":checkbox").each(function(){var a=b(this);if(a.is(":checked"))return k+=a.val(),!1}):k+=g.val(),k||f.removeClass(c.opt.definedClass));return this};g.onFilterButtonClick=function(f){f=b(this).closest("div.spwidget-filter").data("SPFilterPanelInst");var c=null;b.isFunction(f.opt.onFilterClick)&&(c=g.getFilterValues(f),f.opt.onFilterClick.call(f.$ele,c));return this};g.doResetFilter=function(f){if(b.isFunction(f.onReset)&&
!0===f.onReset.call(f.$ele,g.getFilterValues(f)))return f;f.$ui.find("div[data-spwidget_column_type='text'] input").val("").end().find("div[data-spwidget_column_type='choice'] input").prop("checked",!1).end().find("div[data-spwidget_column_type='boolean'] .spwidget-filter-value-input select").val("").end().find(".hasPickSPUser").pickSPUser("method","clear").end().find(".hasSPDateField").SPDateField("reset").end().find(".hasLookupSPField").SPLookupField("method","clear");""!==f.opt.definedClass&&f.$ui.find("."+
f.opt.definedClass).removeClass(f.opt.definedClass);f.$ui.find("select.spwidget-filter-type").each(function(){var c=b(this),d=c.val();if("IsNull"===d||"IsNotNull"===d)c.val("Eq"),c.change()});return f};g.getFilterValues=function(f){function c(a){return b.SPWidgets.getCamlLogical({type:a.logicalType,values:a.values,onEachValue:function(c){return"<"+a.matchType+"><FieldRef Name='"+a.columnName+"' /><Value Type='Text'>"+b.SPWidgets.escapeXML(c)+"</Value></"+a.matchType+">"}})}var d={CAMLQuery:"",URLParams:"",
filters:{},count:0},a=[];f.$ui.find("div.spwidget-column").each(function(h,k){var e=b(k),p=e.find(".spwidget-input"),n=p.attr("name"),m=new g.ColumnFilter({columnName:n,matchType:e.find("select.spwidget-filter-type").val(),logicalType:e.find("select.spwidget-match-type").val()}),e=e.data("spwidget_column_type"),r={};if("IsNull"===m.matchType||"IsNotNull"===m.matchType)m.CAMLQuery="<"+m.matchType+"><FieldRef Name='"+n+"' /></"+m.matchType+">",m.count+=1;else switch(e){case "choice":case "multichoice":p.each(function(){var a=
b(this),c=a.val();a.is(":checked")&&m.values.push(c)});m.values.length&&(m.count=m.values.length,m.CAMLQuery=c(m));break;case "lookup":case "people":(function(){var a=[];p.each(function(){var c=b(this),c=b.SPWidgets.parseLookupFieldValue(c.val()),d,e;d=0;for(e=c.length;d<e;d++)c[d].id&&(m.values.push(c[d].id+";#"+c[d].title),a.push(c[d].id))});m.values.length&&(m.count=m.values.length,m.CAMLQuery=b.SPWidgets.getCamlLogical({type:m.logicalType,values:a,onEachValue:function(a){return"<"+m.matchType+
"><FieldRef Name='"+m.columnName+"' LookupId='True'/><Value Type='Lookup'>"+a+"</Value></"+m.matchType+">"}}))})();break;case "date":p.each(function(){var a=p.SPDateField("getDate");a.dates.length&&(m.values=a.dates,m.count=m.values.length,m.CAMLQuery=b.SPWidgets.getCamlLogical({type:m.logicalType,values:m.values,onEachValue:function(a){return"<"+m.matchType+"><FieldRef Name='"+m.columnName+"'/><Value Type='DateTime'>"+a+"</Value></"+m.matchType+">"}}));return!1});break;case "text":case "boolean":String(b.trim(p.val())).length&&
function(){var a=p.val().split(f.opt.delimeter),d,e,g;d=0;for(e=a.length;d<e;d++)g=b.trim(a[d]),!f.opt.ignoreKeywords.test(g)&&g&&m.values.push(g);m.CAMLQuery=c(m);m.count=m.values.length}()}0<m.count&&(a.push(m.CAMLQuery),d.count+=m.count,d.filters[n]=m,r[n]={matchType:m.matchType,logicalType:m.logicalType,values:m.values},m.URLParams=b.param(r,!1),""!==d.URLParams&&(d.URLParams+="&"),d.URLParams+=m.URLParams)});1<d.count?d.CAMLQuery=b.SPWidgets.getCamlLogical({type:"AND",values:a}):1===d.count&&
(d.CAMLQuery=a[0]);return d};g.setFilterValues=function(f,c){if("object"!==typeof c||b.isEmptyObject(c))return f;g.doResetFilter(f);b.each(c,function(c,a){var h=f.$ui.find(".spwidget-filter-input[name='"+c+"']"),k=h.closest("div.spwidget-column"),e=k.data("spwidget_column_type"),p=k.find("select[name='"+c+"_type']"),n=k.find("div.spwidget-filter-type-cntr select.spwidget-match-type"),m=new g.ColumnFilter;b.extend(m,a);"boolean"!==e&&(m.matchType&&"boolean"!==e&&p.val(m.matchType),m.logicalType&&n.val(m.logicalType));
if("boolean"===e||"IsNull"!==a.matchType&&"IsNotNull"!==a.matchType)switch(e){case "text":case "boolean":m.values instanceof Array?h.val(m.values.join(f.opt.delimeter)):h.val(m.values);break;case "choice":case "multichoice":b.each(m.values,function(a,c){h.filter("[value='"+c+"']").prop("checked",!0)});break;case "lookup":h.SPLookupField("method","add",m.values.join(";#"));break;case "people":h.pickSPUser("method","add",m.values.join(";#"));break;case "date":"DateTime"===k.data("spwidget_sp_format")?
h.SPDateField("setDate",m.values):h.SPDateField("setDate",m.values,"yy-mm-dd")}else p.change();h.change()});return f};g.ColumnFilter=function(b){var c=new function(){};"object"!==typeof b&&(b={});c.columnName=b.columnName||"";c.matchType=b.matchType||"";c.logicalType=b.logicalType||"";c.values=b.values||[];c.CAMLQuery=b.CAMLQuery||"";c.URLParams=b.URLParams||"";c.count=b.count||0;return c};g.styleSheet='/**\n * Stylesheet for the Board widget\n *\n * BUILD: Paul:June 06, 2014 07:26 PM\n */\ndiv.spwidget-filter {\n    width: 100%;\n    position: relative;\n}\ndiv.spwidget-filter .spwidget-date-cntr,\ndiv.spwidget-filter .spwidgets-lookup-cntr {\n    display: block;\n}\n/* Adjust the width of the widget inputs inside the filter panel */\ndiv.spwidget-filter .spwidget-type-text input.spwidget-filter-input,\ndiv.spwidget-filter .spwidget-type-people input.ui-autocomplete-input,\ndiv.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input {\n    width: 95%;\n}\n\ndiv.spwidget-filter .spwidgets-lookup-cntr {\n    width: 96%;\n}\ndiv.spwidget-filter .spwidget-date-cntr div.spwidget-date-input-cntr {\n    width: 97%\n}\n\ndiv.spwidget-filter div.spwidget-column {\n    padding: .5em;\n    margin: .5em;\n    position: relative;\n    border-bottom: 1px solid  darkgray;\n    box-shadow: 1px 1px 1px 0 lightgray inset;\n}\ndiv.spwidget-filter div.spwidget-filter-type-cntr {\n    right: 4%;\n    position: absolute;\n    font-size: .8em;\n    top: .6em;\n    opacity: .6;\n    filter: Alpha(opacity=60);\n}\ndiv.spwidget-filter div.spwidget-filter-type-cntr:hover {\n    opacity: 1;\n}\ndiv.spwidget-filter div.spwidget-filter-value-cntr {\n    width: 100%;\n}\n\ndiv.spwidget-filter div.spwidget-filter-value-cntr > label {\n    display: block;\n    padding: .2em;\n    font-weight: bold;\n}\ndiv.spwidget-filter div.spwidget-column-dirty div.spwidget-filter-value-cntr > label {\n    color: #FF0000;\n}\ndiv.spwidget-filter .spwidget-tooltip {\n    display: block;\n    font-size: .8em;\n    font-style: italic;\n}\n\n/* LOOKUP FIELDS */\ndiv.spwidget-filter div.spwidgets-lookup-cntr div.spwidgets-lookup-selected > div.spwidgets-item {\n    display: block;\n    margin-left: 0px;\n}\n\n/* CHOICE FIELDS */\ndiv.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input {\n    max-height: 6em;\n    overflow: auto;\n    -moz-appearance: textfield;\n    -webkit-appearance: textfield;\n    background-color: white;\n    background-color: -moz-field;\n    border: 1px solid  darkgray;\n    box-shadow: 1px 1px 1px 0 lightgray inset;\n    font: -moz-field;\n    font: -webkit-small-control;\n    padding: 2px 5px;\n}\ndiv.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input label {\n    display: block;\n    padding: .2em;\n}\n\n/** DISABLED COLUMN VALUE CONTAINER */\ndiv.spwidget-filter .spwidget-disabled {\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n    filter: alpha(opacity=50);\n    opacity: 0.5;\n}\n\n/** Button container */\ndiv.spwidget-filter div.spwidget-filter-button-cntr {\n    padding: .5em 4%;\n    margin-top: .5em;\n    text-align: right;\n}\n\n\n/** Sort Panel */\ndiv.spwidget-filter div.spwidget-filter-sort-cntr {\n    position: relative;\n}\n';
g.htmlTemplate='<div id="filter_main_ui">\n    <div class="spwidget-filter" style="display: none;">\n        <div class="spwidget-filter-column-cntr"></div>\n        <div class="spwidget-filter-sort-cntr" style="display:none;">\n            <div>Add...</div>\n            <div>Order here</div>\n            <div>Close</div>\n        </div>\n        <div class="spwidget-filter-button-cntr">\n            <button type="button" class="spwidget-button ui-priority-secondary" name=\'order\'>Order</button>\n            <button type="button" class="spwidget-button ui-priority-secondary" name=\'reset\'>Reset</button>\n            <button type="button" class="spwidget-button" name=\'filter\'>Filter</button>\n        </div>\n    </div>\n</div>\n<div id="filter_column">\n    <div class="spwidget-column spwidget-type-{{type}}"\n            data-spwidget_column_type="{{type}}"\n            data-spwidget_list="{{list}}"\n            data-spwidget_sp_type="{{sp_type}}"\n            data-spwidget_sp_format="{{sp_format}}" >\n        <div class="spwidget-filter-value-cntr">\n            <label>{{DisplayName}}</label>\n            <div class="spwidget-filter-value-input">\n                __COLUMN__UI__\n            </div>\n        </div>\n        <div class="spwidget-filter-type-cntr" title="Match Type">\n            <select name="{{Name}}_type" class="spwidget-filter-type" tabindex="-1">\n                <option value="Contains">Contains</option>\n                <option value="Eq" selected="selected">Equal</option>\n                <option value="Neq">Not Equal</option>\n                <option value="IsNull">Is Blank</option>\n                <option value="IsNotNull">Is Not Blank</option>\n                __OTHER_FILTER_TYPES__\n            </select>\n            <select name="{{Name}}_match" class="spwidget-match-type" tabindex="-1">\n                <option value="Or" selected="selected">Any</option>\n                <option value="And">All</option>\n            </select>\n        </div>\n    </div>\n</div>\n<div id="filter_text_field">\n    <input name="{{Name}}" title="{{DisplayName}}" type="text" value="" class="spwidget-input spwidget-filter-input" />\n    <span class="spwidget-tooltip">{{tooltip}}</span>\n</div>\n<div id="filter_choice_field">\n    <label>\n        <input name="{{Name}}" title="{{DisplayName}}" type="checkbox" value="{{value}}" class="spwidget-input spwidget-filter-input" />\n        {{value}}\n    </label>\n</div>\n'})(r)})(jQuery);
